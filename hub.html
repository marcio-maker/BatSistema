<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAYNE ENTERPRISES - BAT-HUD SYSTEM v2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* =========================================== */
        /* VARIÁVEIS CSS GLOBAIS */
        /* =========================================== */
        :root {
            --primary-color: #00d9ff;
            --primary-dark: #0066cc;
            --success-color: #00ff88;
            --warning-color: #ffaa00;
            --danger-color: #ff0040;
            --info-color: #bb86fc;
            --background-dark: #000;
            --background-light: rgba(10, 20, 40, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --border-color: rgba(0, 217, 255, 0.3);
        }

        /* =========================================== */
        /* CONFIGURAÇÕES GERAIS */
        /* =========================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            color: var(--text-primary);
        }

        /* =========================================== */
        /* EFEITO DE NEBLINA GOTHAM - REATIVO */
        /* =========================================== */
        .rain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.2);
            background-image:
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.05) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.03) 0%, transparent 50%);
            filter: blur(25px);
            z-index: 0;
            pointer-events: auto;
            transition: opacity 0.5s ease;
        }

        body:hover .rain-overlay {
            background-image:
                radial-gradient(circle at var(--x, 50%) var(--y, 50%),
                    rgba(255, 255, 255, 0.15) 0%,
                    transparent 50%);
        }

        .rain-overlay::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.05), transparent);
            animation: fogPulse 8s infinite alternate;
        }

        @keyframes fogPulse {
            0% {
                transform: scale(1);
                opacity: 0.3;
            }

            100% {
                transform: scale(1.2);
                opacity: 0.6;
            }
        }

        /* =========================================== */
        /* SISTEMA DE ALERTA DE EMERGÊNCIA */
        /* =========================================== */
        .emergency-alert {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.95);
            z-index: 9999;
            animation: emergencyPulse 0.5s infinite alternate;
            cursor: pointer;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .emergency-content {
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 15px;
            border: 5px solid #fff;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.8);
            max-width: 600px;
            animation: shake 0.5s infinite;
        }

        .emergency-title {
            font-size: 42px;
            color: #fff;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 20px #ff0000;
            font-weight: bold;
        }

        .emergency-subtitle {
            font-size: 24px;
            color: #ff4444;
            margin-bottom: 30px;
            text-transform: uppercase;
        }

        .emergency-message {
            font-size: 18px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .emergency-countdown {
            font-size: 36px;
            color: #ff0000;
            margin: 20px 0;
            font-weight: bold;
            text-shadow: 0 0 10px #ff0000;
        }

        @keyframes emergencyPulse {
            0% {
                background: rgba(255, 0, 0, 0.95);
                box-shadow: 0 0 100px rgba(255, 0, 0, 0.8) inset;
            }

            100% {
                background: rgba(255, 50, 50, 0.95);
                box-shadow: 0 0 150px rgba(255, 0, 0, 1) inset;
            }
        }

        /* =========================================== */
        /* WIDGET DO TIMER */
        /* =========================================== */
        .alert-timer {
            display: none;
            position: fixed;
            bottom: 85px;
            right: 40px;
            background: rgba(20, 0, 0, 0.4);
            border: 1px solid rgba(255, 0, 0, 0.4);
            border-radius: 4px;
            padding: 6px 12px;
            color: #fff;
            z-index: 100;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(8px);
            font-family: 'Courier New', monospace;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            animation: alertFadeIn 0.4s ease-out;
        }

        .alert-label {
            font-size: 10px;
            color: rgba(255, 136, 136, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timer-value {
            font-size: 13px;
            color: #ff3333;
            font-weight: bold;
        }

        @keyframes alertFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .timer-skip {
            background: rgba(255, 0, 0, 0.5);
            border: 1px solid #ff0000;
            color: #fff;
            padding: 3px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 10px;
            font-family: 'Arial', sans-serif;
        }

        .timer-skip:hover {
            background: rgba(255, 0, 0, 0.8);
        }

        /* =========================================== */
        /* SISTEMA DE AUTENTICAÇÃO */
        /* =========================================== */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            backdrop-filter: blur(5px);
            padding: 20px;
        }

        .auth-frame {
            background: var(--background-light);
            border: 2px solid var(--border-color);
            width: 100%;
            max-width: 400px;
            padding: 30px 20px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 217, 255, 0.2);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .auth-frame::before,
        .auth-frame::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
        }

        .auth-frame::before {
            top: -2px;
            left: -2px;
            border-right: none;
            border-bottom: none;
        }

        .auth-frame::after {
            bottom: -2px;
            right: -2px;
            border-left: none;
            border-top: none;
        }

        .bat-logo {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .bat-logo h1 {
            color: var(--text-secondary);
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: normal;
            margin-bottom: 15px;
        }

        .bat-symbol {
            width: 60px;
            height: 30px;
            margin: 0 auto;
            position: relative;
            filter: drop-shadow(0 0 10px rgba(0, 217, 255, 0.3));
        }

        .bat-symbol::before {
            content: '▼';
            font-size: 30px;
            color: var(--primary-color);
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            animation: batPulse 2s infinite;
        }

        @keyframes batPulse {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 12px 0;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
            color: var(--primary-color);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            border-bottom-color: var(--primary-color);
            box-shadow: 0 1px 0 rgba(0, 217, 255, 0.2);
        }

        .form-label {
            position: absolute;
            top: 12px;
            left: 0;
            color: rgba(0, 217, 255, 0.5);
            font-size: 14px;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .form-input:focus+.form-label,
        .form-input:valid+.form-label {
            top: -10px;
            font-size: 12px;
            color: var(--primary-color);
        }

        .auth-button {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 12px;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            background: rgba(0, 217, 255, 0.1);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
        }

        .auth-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .auth-button:hover::before {
            left: 100%;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .auth-switch a {
            color: var(--primary-color);
            text-decoration: none;
            margin-left: 5px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .auth-switch a:hover {
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        .auth-error {
            background: rgba(255, 50, 50, 0.1);
            border-left: 3px solid #ff5555;
            padding: 10px;
            margin-top: 15px;
            font-size: 12px;
            color: #ff5555;
            display: none;
            animation: shake 0.5s;
        }

        /* =========================================== */
        /* INDICADOR DE USUÁRIO */
        /* =========================================== */
        .user-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--background-light);
            border: 2px solid var(--border-color);
            padding: 8px 15px;
            font-size: 11px;
            color: var(--primary-color);
            z-index: 100;
            backdrop-filter: blur(5px);
            display: none;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.1);
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-indicator .logout-btn {
            margin-left: 8px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            font-size: 9px;
            transition: color 0.3s ease;
            white-space: nowrap;
        }

        .user-indicator .logout-btn:hover {
            color: #ff5555;
        }

        /* =========================================== */
        /* INTERFACE HUD PRINCIPAL */
        /* =========================================== */
        .hud-frame {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: none;
            z-index: 5;
            overflow: hidden;
        }

        .piece-container {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            /* ← Adicione esta linha */
        }

        .piece-container:hover {
            transform: scale(1.02);
            z-index: 20;
            /* ← Aumente para acima do radar */
        }

        .piece-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 10px rgba(0, 217, 255, 0.3));
            transition: all 0.3s ease;
        }

        .piece-container:hover .piece-svg {
            filter: drop-shadow(0 0 25px rgba(0, 217, 255, 0.6));
        }

        .piece-container:hover .piece-svg path {
            stroke: #fff;
            stroke-width: 3;
        }

        .piece-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 150, 255, 0.1);
            clip-path: inherit;
            transition: all 0.3s ease;
        }

        .piece-container:hover .piece-bg {
            background: rgba(0, 217, 255, 0.3);
        }

        .piece-text {
            position: absolute;
            color: rgba(0, 217, 255, 0.9);
            font-size: 11px;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(0, 217, 255, 0.7);
            pointer-events: none;
            text-transform: uppercase;
            transition: all 0.3s ease;
            text-align: center;
            z-index: 2;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .piece-container:hover .piece-text {
            color: #fff;
            text-shadow: 0 0 15px var(--primary-color);
        }

        /* POSICIONAMENTO DAS PEÇAS */
        .top-left {
            top: 0;
            left: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 100% 0, 70% 100%, 0 100%);
        }

        .top-center {
            top: 0;
            left: 30%;
            width: 40%;
            height: 40px;
            clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
        }

        .top-right {
            top: 0;
            right: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 30% 100%);
        }

        .mid-left {
            top: 80px;
            left: 0;
            width: 35px;
            height: calc(100% - 160px);
            clip-path: polygon(0 0, 100% 10%, 100% 90%, 0 100%);
        }

        .mid-right {
            top: 80px;
            right: 0;
            width: 35px;
            height: calc(100% - 160px);
            clip-path: polygon(0 10%, 100% 0, 100% 100%, 0 90%);
        }

        .bottom-left {
            bottom: 0;
            left: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 70% 0, 100% 100%, 0 100%);
        }

        .bottom-center {
            bottom: 0;
            left: 30%;
            width: 40%;
            height: 50px;
            clip-path: polygon(10% 0, 90% 0, 100% 100%, 0 100%);
        }

        .bottom-right {
            bottom: 0;
            right: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(30% 0, 100% 0, 100% 100%, 0 100%);
        }

        /* POSICIONAMENTO DOS TEXTOS */
        .top-left .piece-text {
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .top-center .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            font-size: 10px;
            line-height: 1.1;
        }

        .top-right .piece-text {
            top: 12px;
            right: 50%;
            transform: translateX(50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .mid-left .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            white-space: nowrap;
            font-size: 9px;
            max-width: 200px;
        }

        .mid-right .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(90deg);
            white-space: nowrap;
            font-size: 9px;
            max-width: 200px;
        }

        .bottom-left .piece-text {
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .bottom-center .piece-text {
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            font-size: 10px;
            line-height: 1.1;
        }

        .bottom-right .piece-text {
            bottom: 12px;
            right: 50%;
            transform: translateX(50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        /* MENSAGEM CENTRAL */
        .hint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #0af;
            text-align: center;
            z-index: 1;
            pointer-events: none;
            letter-spacing: 1px;
            font-size: 16px;
            width: 90%;
            max-width: 400px;
        }

        .hint span {
            font-size: 11px;
            opacity: 0.7;
            display: block;
            margin-top: 5px;
        }

        /* =========================================== */
        /* SISTEMA DE MODAIS */
        /* =========================================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            padding: 15px;
        }

        .modal-content {
            background: linear-gradient(145deg, rgba(10, 20, 40, 0.95), rgba(5, 10, 20, 0.98));
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            width: 100%;
            max-width: 700px;
            padding: 25px 20px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.4);
            animation: modalAppear 0.3s ease-out;
            color: #fff;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 12px;
        }

        .modal-title {
            color: var(--primary-color);
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            letter-spacing: 1px;
            line-height: 1.3;
            width: calc(100% - 40px);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .modal-close:hover {
            color: #fff;
            background: rgba(0, 217, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            line-height: 1.5;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        .modal-section-title {
            color: var(--primary-color);
            font-size: 14px;
            border-left: 3px solid var(--primary-color);
            padding-left: 10px;
            margin: 20px 0 10px 0;
            text-transform: uppercase;
        }

        .modal-status {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0, 217, 255, 0.1);
            border-left: 3px solid var(--primary-color);
            border-radius: 4px;
        }

        .modal-status-title {
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .modal-list {
            list-style: none;
            padding: 0;
            margin: 12px 0;
        }

        .modal-list li {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            font-size: 13px;
        }

        .modal-list li:before {
            content: "►";
            color: var(--primary-color);
            margin-right: 8px;
            font-size: 10px;
        }

        .modal-data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .data-item {
            background: rgba(0, 217, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .data-label {
            color: var(--primary-color);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-value {
            font-size: 16px;
            font-weight: bold;
            margin-top: 5px;
        }

        /* =========================================== */
        /* SISTEMA DE VILÕES */
        /* =========================================== */
        .villain-tracking-system {
            padding: 10px;
        }

        .villain-search-container {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .villain-search {
            flex: 1;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary-color);
            color: #fff;
            border-radius: 4px;
            font-size: 12px;
        }

        .filter-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .filter-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        .villain-stats {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #888;
            margin-bottom: 15px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 14px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .villain-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .villain-card {
            background: rgba(0, 40, 60, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .villain-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
            transform: translateY(-3px);
        }

        .villain-card img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 2px solid var(--primary-color);
            object-fit: cover;
            margin-bottom: 10px;
            background: #000;
            filter: drop-shadow(0 0 8px rgba(0, 217, 255, 0.5));
        }

        .villain-name {
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .villain-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            margin: 5px 0;
            display: inline-block;
        }

        .status-encarcerado {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .status-foragido {
            background: rgba(255, 0, 64, 0.2);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        .status-ativo {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        .status-planejando {
            background: rgba(187, 134, 252, 0.2);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        .status-negocios {
            background: rgba(3, 218, 197, 0.2);
            color: #03dac5;
            border: 1px solid #03dac5;
        }

        .villain-location {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .villain-threat {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            background: rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .villain-export {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }

        .export-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .export-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        /* MODAL DETALHADO DO VILÃO */
        .villain-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 5, 10, 0.95);
            z-index: 10000;
            padding: 20px;
        }

        .villain-detail-content {
            background: var(--background-light);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            max-width: 800px;
            margin: 50px auto;
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.3);
        }

        .villain-detail-img {
            width: 100%;
            border-radius: 8px;
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }

        .villain-detail-info h3 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .detail-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            margin-top: 10px;
        }

        .detail-value {
            font-size: 14px;
            color: #fff;
            margin-bottom: 15px;
        }

        .detail-threat {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(255, 0, 64, 0.2);
            color: var(--danger-color);
            border-radius: 4px;
            font-weight: bold;
        }

        .detail-desc {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid var(--primary-color);
            margin-top: 15px;
            font-size: 13px;
            line-height: 1.5;
        }

        .close-detail-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 24px;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-detail-btn:hover {
            color: #fff;
            transform: rotate(90deg);
        }

        /* =========================================== */
        /* SISTEMA DE ARSENAL */
        /* =========================================== */
        .equipment-tracking-system {
            padding: 10px;
        }

        .equipment-search {
            width: 100%;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary-color);
            color: #fff;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .equipment-card {
            background: rgba(0, 40, 60, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 120px;
            position: relative;
        }

        .equipment-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
            transform: translateY(-3px);
        }

        .equipment-icon {
            font-size: 32px;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 8px rgba(0, 217, 255, 0.5));
        }

        .equipment-name {
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .equipment-value {
            font-size: 16px;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(0, 217, 255, 0.5);
        }

        .equipment-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
        }

        .status-ok {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .status-warn {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        .status-alert {
            background: rgba(255, 0, 64, 0.2);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        .progress-bar {
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .progress-ok {
            background: var(--success-color);
        }

        .progress-warn {
            background: var(--warning-color);
        }

        .progress-alert {
            background: var(--danger-color);
        }

        .equipment-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 5, 10, 0.95);
            z-index: 10000;
            padding: 20px;
        }

        .equipment-detail-content {
            background: var(--background-light);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            max-width: 800px;
            margin: 50px auto;
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.3);
        }

        .equipment-detail-icon {
            font-size: 100px;
            text-align: center;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(0, 217, 255, 0.5));
        }

        .tactical-combos {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 20, 40, 0.5);
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .combo-item {
            margin: 8px 0;
            padding: 5px;
            border-left: 2px solid var(--success-color);
            background: rgba(0, 255, 136, 0.1);
        }

        .diagnostic-panel {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid var(--border-color);
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .diagnostic-output {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: var(--success-color);
            white-space: pre-line;
            line-height: 1.5;
        }

        /* =========================================== */
        /* MAPA DE GOTHAM */
        /* =========================================== */
        .hologram-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, rgba(0, 10, 20, 0.9), rgba(0, 20, 40, 0.9));
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .hologram-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 217, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
            pointer-events: none;
        }

        .city-districts {
            position: absolute;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 5px;
            padding: 10px;
        }

        .district {
            position: relative;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            padding: 5px;
            overflow: hidden;
        }

        .district:hover {
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            transform: scale(1.05);
            z-index: 2;
        }

        .data-point {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
            box-shadow: 0 0 10px currentColor;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .industrial-zone {
            grid-column: 1 / 2;
            grid-row: 2 / 4;
            background: rgba(255, 0, 64, 0.1);
        }

        .city-center {
            grid-column: 2 / 3;
            grid-row: 1 / 3;
            background: rgba(255, 170, 0, 0.1);
        }

        .suburbs {
            grid-column: 1 / 2;
            grid-row: 1 / 2;
            background: rgba(0, 255, 136, 0.1);
        }

        .port-area {
            grid-column: 2 / 3;
            grid-row: 3 / 4;
            background: rgba(255, 119, 0, 0.1);
        }

        .arkham {
            grid-column: 3 / 4;
            grid-row: 1 / 2;
            background: rgba(187, 134, 252, 0.1);
        }

        .wayne-tower {
            grid-column: 3 / 4;
            grid-row: 2 / 4;
            background: rgba(0, 217, 255, 0.1);
        }

        .district-detail {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            display: none;
        }

        .district-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .district-alert {
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }

        .alert-red {
            background: rgba(255, 0, 64, 0.2);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        .alert-yellow {
            background: rgba(255, 170, 0, 0.2);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        .alert-green {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .alert-orange {
            background: rgba(255, 119, 0, 0.2);
            color: #ff7700;
            border: 1px solid #ff7700;
        }

        .alert-purple {
            background: rgba(187, 134, 252, 0.2);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        .map-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .map-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
            flex: 1;
            min-width: 120px;
        }

        .map-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        .incident-timeline {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }

        .timeline-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 11px;
        }

        .timeline-time {
            color: var(--primary-color);
            font-weight: bold;
        }

        .timeline-event {
            color: #fff;
        }

        .timeline-alert {
            color: var(--danger-color);
            font-weight: bold;
        }

        /* =========================================== */
        /* SISTEMA DO BATMÓVEL */
        /* =========================================== */
        .vehicle-control-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .vehicle-status-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .status-item {
            background: rgba(0, 217, 255, 0.05);
            padding: 15px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .status-label {
            color: var(--primary-color);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
        }

        .vehicle-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .control-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .control-btn:hover {
            background: rgba(0, 217, 255, 0.2);
            transform: translateY(-2px);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .navigation-map {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            padding: 15px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .route-input {
            width: 100%;
            padding: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--primary-color);
            color: #fff;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .route-btn {
            background: rgba(0, 217, 255, 0.2);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .route-btn:hover {
            background: rgba(0, 217, 255, 0.3);
        }

        .system-log {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            padding: 15px;
        }

        .log-content {
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: var(--success-color);
            background: #000;
            padding: 10px;
            border-radius: 4px;
            max-height: 100px;
            overflow-y: auto;
            line-height: 1.5;
        }

        /* =========================================== */
        /* WIDGET DE RADAR TÁTICO (Posicionamento Superior Direito) */
        /* =========================================== */
        .radar-widget {
            position: fixed;
            top: 120px;
            left: 250px;
            width: 200px;
            height: 200px;
            background: rgba(0, 20, 40, 0.85);
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            z-index: 2;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .radar-widget:hover {
            border-color: rgba(0, 217, 255, 0.6);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.4);
            transform: scale(1.02);
        }

        .radar-label {
            position: absolute;
            top: 8px;
            left: 8px;
            color: #00d9ff;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: 'Courier New', monospace;
            z-index: 3;
            text-shadow: 0 0 5px rgba(0, 217, 255, 0.7);
        }

        .radar-grid {
            position: absolute;
            inset: 0;
            background-image:
                linear-gradient(rgba(0, 217, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
        }

        .radar-circles {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .radar-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid rgba(0, 217, 255, 0.15);
            border-radius: 50%;
        }

        .radar-sweep {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            background: conic-gradient(from 0deg,
                    rgba(0, 217, 255, 0.3) 0%,
                    rgba(0, 217, 255, 0.1) 10%,
                    transparent 30%);
            transform-origin: top left;
            animation: radarSweep 4s linear infinite;
            pointer-events: none;
        }

        .radar-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #00d9ff;
            top: 50%;
            left: 50%;
            transform-origin: left center;
            animation: radarSweep 4s linear infinite;
            box-shadow: 0 0 10px #00d9ff;
            pointer-events: none;
        }

        .radar-target {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .radar-target.hostile {
            background-color: var(--danger-color);
            box-shadow: 0 0 10px #ff0040;
        }

        .radar-target.friendly {
            background-color: var(--success-color);
            box-shadow: 0 0 10px #00ff88;
        }

        .radar-target.neutral {
            background-color: var(--warning-color);
            box-shadow: 0 0 10px #ffaa00;
        }

        .radar-controls {
            position: absolute;
            bottom: 8px;
            right: 8px;
            display: flex;
            gap: 4px;
            z-index: 3;
        }

        .radar-btn {
            width: 28px;
            height: 28px;
            background: rgba(0, 217, 255, 0.2);
            border: 1px solid rgba(0, 217, 255, 0.4);
            border-radius: 4px;
            color: #00d9ff;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .radar-btn:hover {
            background: rgba(0, 217, 255, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        .radar-btn:active {
            transform: scale(0.95);
        }

        @keyframes radarSweep {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        @keyframes targetPulse {

            0%,
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }

            50% {
                opacity: 0.3;
                transform: translate(-50%, -50%) scale(1.3);
            }
        }

        /* Responsividade do Radar */
        @media (max-width: 768px) {
            .radar-widget {
                width: 150px;
                height: 150px;
                top: 100px;
                left: 50px;
            }

            .radar-label {
                font-size: 7px;
            }

            .radar-target {
                width: 4px;
                height: 4px;
            }

            .radar-btn {
                width: 20px;
                height: 20px;
                font-size: 8px;
            }
        }

        @media (max-width: 480px) {
            .radar-widget {
                width: 100px;
                height: 100px;
                top: 90px;
                left: 40px;
            }

            .radar-grid {
                background-size: 15px 15px;
            }
        }

        @media (max-height: 600px) {
            .radar-widget {
                top: 80px;
                width: 100px;
                height: 100px;
            }

            .radar-target {
                width: 3px;
                height: 3px;
            }

            .radar-label {
                font-size: 6px;
            }
        }

        /* CORREÇÃO IMPORTANTE: Mantém posição em telas grandes */
        @media (min-width: 1200px) {
            .radar-widget {
                top: 140px;
                left: 250px;
                /* Mantém a mesma posição do desktop */
            }
        }

        /* Ajuste para modo paisagem em mobile */
        @media (orientation: landscape) and (max-height: 500px) {
            .radar-widget {
                top: 60px;
                left: 10px;
                width: 100px;
                height: 100px;
            }
        }

        /* =========================================== */
        /* WIDGET 1: ANÁLISE DE FREQUÊNCIA DE VOZ */
        /* =========================================== */
        .voice-analyzer-widget {
            position: fixed;
            top: 120px;
            right: 40px;
            width: 250px;
            height: 150px;
            background: rgba(0, 20, 40, 0.85);
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
            backdrop-filter: blur(5px);
            z-index: 90;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: move;
            user-select: none;
        }

        .voice-analyzer-widget:hover {
            border-color: rgba(0, 217, 255, 0.6);
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.4);
            transform: scale(1.02);
        }

        .voice-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
        }

        .voice-header i {
            color: #00d9ff;
            font-size: 16px;
            margin-right: 10px;
        }

        .voice-header h3 {
            color: #00d9ff;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(0, 217, 255, 0.5);
            font-family: 'Courier New', monospace;
        }

        .voice-visualizer {
            height: 70px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 6px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .voice-visualizer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00d9ff, transparent);
            animation: scanLine 3s linear infinite;
        }

        .frequency-bar {
            width: 10px;
            min-height: 10px;
            background: linear-gradient(to top, #00d9ff, #0066cc);
            border-radius: 3px 3px 0 0;
            position: relative;
            box-shadow: 0 0 8px rgba(0, 217, 255, 0.5);
            animation: barPulse 1.5s infinite ease-in-out;
        }

        .frequency-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to top, transparent, rgba(255, 255, 255, 0.3));
            border-radius: 3px 3px 0 0;
        }

        .voice-status {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            font-family: 'Courier New', monospace;
        }

        .voice-status div {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #00ff88;
            box-shadow: 0 0 6px #00ff88;
            animation: pulse 2s infinite;
        }

        .status-dot.recording {
            background: #ff0040;
            box-shadow: 0 0 6px #ff0040;
        }

        /* =========================================== */
        /* WIDGET 2: SCANNER BIOMÉTRICO */
        /* =========================================== */
        .biometric-scanner-widget {
            position: fixed;
            top: 290px;
            left: 40px;
            width: 280px;
            height: 180px;
            background: rgba(0, 20, 40, 0.85);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
            backdrop-filter: blur(5px);
            z-index: 90;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: move;
            user-select: none;
        }

        .biometric-scanner-widget:hover {
            border-color: rgba(0, 255, 136, 0.6);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.4);
            transform: scale(1.02);
        }

        .scanner-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 255, 136, 0.3);
        }

        .scanner-header i {
            color: #00ff88;
            font-size: 16px;
            margin-right: 10px;
        }

        .scanner-header h3 {
            color: #00ff88;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(0, 255, 136, 0.5);
            font-family: 'Courier New', monospace;
        }

        .scanner-container {
            height: 90px;
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            background: repeating-linear-gradient(45deg,
                    rgba(0, 255, 136, 0.05),
                    rgba(0, 255, 136, 0.05) 2px,
                    transparent 2px,
                    transparent 4px);
        }

        .face-outline {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 65px;
            border: 2px solid rgba(0, 255, 136, 0.5);
            border-radius: 50%;
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg,
                    transparent,
                    #00ff88,
                    #00ff88,
                    transparent);
            box-shadow: 0 0 12px #00ff88;
            animation: scanMove 3s linear infinite;
        }

        .biometric-data {
            margin-top: 10px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .bio-data-item {
            background: rgba(0, 40, 0, 0.3);
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .bio-data-label {
            font-size: 9px;
            color: #88ff88;
            margin-bottom: 3px;
            font-family: 'Courier New', monospace;
        }

        .bio-data-value {
            font-size: 11px;
            color: #00ff88;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .match-progress {
            grid-column: 1 / -1;
            margin-top: 5px;
        }

        .scanner-progress-bar {
            height: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 3px;
        }

        .scanner-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00d9ff);
            width: 98%;
            border-radius: 3px;
            animation: progressWave 2s infinite;
        }

        /* =========================================== */
        /* WIDGET 3: MONITOR DE CRIPTOGRAFIA */
        /* =========================================== */
        .encryption-widget {
            position: fixed;
            bottom: 120px;
            left: 40px;
            width: 300px;
            height: 160px;
            background: rgba(0, 20, 40, 0.85);
            border: 1px solid rgba(187, 134, 252, 0.3);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 0 20px rgba(187, 134, 252, 0.2);
            backdrop-filter: blur(5px);
            z-index: 90;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: move;
            user-select: none;
        }

        .encryption-widget:hover {
            border-color: rgba(187, 134, 252, 0.6);
            box-shadow: 0 0 30px rgba(187, 134, 252, 0.4);
            transform: scale(1.02);
        }

        .encryption-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(187, 134, 252, 0.3);
        }

        .encryption-header h3 {
            color: #bb86fc;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 8px rgba(187, 134, 252, 0.5);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Courier New', monospace;
        }

        .encryption-status {
            padding: 4px 10px;
            background: rgba(187, 134, 252, 0.2);
            border: 1px solid #bb86fc;
            border-radius: 4px;
            font-size: 10px;
            color: #bb86fc;
            font-weight: bold;
            text-transform: uppercase;
            animation: statusPulse 3s infinite;
            font-family: 'Courier New', monospace;
        }

        .encryption-terminal {
            height: 85px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 6px;
            padding: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(187, 134, 252, 0.2);
        }

        .terminal-content {
            position: relative;
            height: 100%;
            overflow: hidden;
        }

        .code-line {
            position: absolute;
            width: 100%;
            color: #bb86fc;
            font-size: 11px;
            font-family: 'Courier New', monospace;
            white-space: nowrap;
            animation: scrollUp 15s linear infinite;
            text-shadow: 0 0 5px rgba(187, 134, 252, 0.7);
            padding: 2px 0;
        }

        .code-line:nth-child(1) {
            animation-delay: 0s;
        }

        .code-line:nth-child(2) {
            animation-delay: 3s;
        }

        .code-line:nth-child(3) {
            animation-delay: 6s;
        }

        .code-line:nth-child(4) {
            animation-delay: 9s;
        }

        .code-line:nth-child(5) {
            animation-delay: 12s;
        }

        .encryption-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 10px;
            font-family: 'Courier New', monospace;
        }

        .key-info {
            color: #88aadd;
        }

        .strength-info {
            color: #00ff88;
        }

        /* =========================================== */
        /* ANIMAÇÕES PARA OS NOVOS WIDGETS */
        /* =========================================== */
        @keyframes barPulse {

            0%,
            100% {
                height: 20%;
                opacity: 0.6;
                transform: scaleY(0.8);
            }

            50% {
                height: 100%;
                opacity: 1;
                transform: scaleY(1.1);
            }
        }

        @keyframes scanLine {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        @keyframes scanMove {
            0% {
                top: 0;
            }

            100% {
                top: 100%;
            }
        }

        @keyframes progressWave {

            0%,
            100% {
                background: linear-gradient(90deg, #00ff88, #00d9ff);
                width: 98%;
            }

            50% {
                background: linear-gradient(90deg, #00d9ff, #00ff88);
                width: 100%;
            }
        }

        @keyframes scrollUp {
            0% {
                transform: translateY(100px);
                opacity: 0;
            }

            10% {
                transform: translateY(80px);
                opacity: 1;
            }

            90% {
                transform: translateY(-80px);
                opacity: 1;
            }

            100% {
                transform: translateY(-100px);
                opacity: 0;
            }
        }

        @keyframes statusPulse {

            0%,
            100% {
                opacity: 1;
                box-shadow: 0 0 10px rgba(187, 134, 252, 0.5);
            }

            50% {
                opacity: 0.7;
                box-shadow: 0 0 5px rgba(187, 134, 252, 0.3);
            }
        }

        /* =========================================== */
        /* ANIMAÇÕES GLOBAIS */
        /* =========================================== */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* =========================================== */
        /* ESTILOS PARA ARRASTO DE WIDGETS */
        /* =========================================== */
        .voice-analyzer-widget,
        .biometric-scanner-widget,
        .encryption-widget,
        .radar-widget {
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease !important;
            position: fixed;
            /* Para desktop */
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            cursor: move;
            /* Mostra que é arrastável */
        }

        /* Remove qualquer animação de flutuação que possa existir */
        .voice-analyzer-widget,
        .biometric-scanner-widget,
        .encryption-widget,
        .radar-widget {
            animation: none !important;
        }

        /* Efeito durante o arrasto */
        .voice-analyzer-widget:active,
        .biometric-scanner-widget:active,
        .encryption-widget:active,
        .radar-widget:active {
            cursor: grabbing !important;
            z-index: 1000 !important;
            /* Garante que fique acima durante arrasto */
            box-shadow: 0 0 30px rgba(0, 217, 255, 0.7) !important;
        }

        /* Ajustes para mobile - substitui position: fixed por absolute */
        @media (max-width: 768px) {

            .voice-analyzer-widget,
            .biometric-scanner-widget,
            .encryption-widget,
            .radar-widget {
                position: absolute !important;
                /* Melhor para mobile */
                touch-action: none;
                /* Permite arrasto em mobile */

                /* GARANTIR QUE OS WIDGETS APAREÇAM EM MOBILE */
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
                pointer-events: auto !important;
            }

            /* Mantém arrasto em mobile */
            .voice-analyzer-widget:active,
            .biometric-scanner-widget:active,
            .encryption-widget:active,
            .radar-widget:active {
                cursor: grabbing !important;
                z-index: 1000 !important;
            }
        }

        /* Botão de reset (mantém o que já existe) */
        #resetWidgetsBtn {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(255, 100, 100, 0.2);
            border: 1px solid rgba(255, 100, 100, 0.5);
            color: #ff6666;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 9px;
            cursor: pointer;
            z-index: 999;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.7;
        }

        #resetWidgetsBtn:hover {
            background: rgba(255, 100, 100, 0.4);
            opacity: 1;
            transform: scale(1.05);
        }

        /* =========================================== */
        /* RESPONSIVIDADE */
        /* =========================================== */
        @media (max-width: 768px) {

            .top-left,
            .top-right,
            .bottom-left,
            .bottom-right {
                width: 35%;
            }

            .top-center,
            .bottom-center {
                width: 30%;
                left: 35%;
            }

            .mid-left,
            .mid-right {
                width: 30px;
            }

            .piece-text {
                font-size: 8px !important;
            }

            .top-center .piece-text,
            .bottom-center .piece-text {
                font-size: 9px !important;
            }

            .hint {
                font-size: 14px;
            }

            .hint span {
                font-size: 10px;
            }

            .user-indicator {
                font-size: 10px;
                padding: 6px 12px;
                max-width: 150px;
            }

            .logout-btn {
                font-size: 8px;
            }

            .emergency-content {
                padding: 30px;
                max-width: 90%;
            }

            .emergency-title {
                font-size: 32px;
            }

            .emergency-subtitle {
                font-size: 18px;
            }

            .emergency-message {
                font-size: 16px;
            }

            .villain-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .equipment-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .vehicle-controls {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .auth-frame {
                padding: 25px 15px;
            }

            .bat-logo h1 {
                font-size: 10px;
                letter-spacing: 1px;
            }

            .bat-symbol {
                width: 50px;
                height: 25px;
            }

            .bat-symbol::before {
                font-size: 25px;
            }

            .form-input {
                font-size: 14px;
                padding: 10px 0;
            }

            .form-label {
                font-size: 12px;
                top: 10px;
            }

            .auth-button {
                padding: 10px;
                font-size: 12px;
            }

            .auth-switch {
                font-size: 11px;
            }

            .top-left,
            .top-right,
            .bottom-left,
            .bottom-right {
                width: 40%;
                height: 60px;
            }

            .top-center,
            .bottom-center {
                width: 20%;
                left: 40%;
                height: 35px;
            }

            .mid-left,
            .mid-right {
                width: 25px;
                top: 60px;
                height: calc(100% - 120px);
            }

            .piece-text {
                font-size: 7px !important;
                line-height: 1 !important;
            }

            .mid-left .piece-text,
            .mid-right .piece-text {
                font-size: 6px !important;
            }

            .hint {
                font-size: 12px;
            }

            .hint span {
                font-size: 9px;
            }

            .modal-content {
                padding: 20px 15px;
            }

            .modal-title {
                font-size: 16px;
            }

            .modal-body {
                font-size: 13px;
            }

            .modal-data-grid {
                grid-template-columns: 1fr;
            }

            .user-indicator {
                font-size: 9px;
                padding: 5px 10px;
                max-width: 120px;
            }

            .logout-btn {
                font-size: 7px;
            }

            .emergency-content {
                padding: 20px;
                border-width: 3px;
            }

            .emergency-title {
                font-size: 24px;
                letter-spacing: 2px;
            }

            .emergency-subtitle {
                font-size: 14px;
            }

            .emergency-message {
                font-size: 14px;
            }

            .emergency-countdown {
                font-size: 28px;
            }

            .alert-timer {
                bottom: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 10px;
            }

            .villain-grid {
                grid-template-columns: 1fr;
            }

            .equipment-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .city-districts {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 320px) {

            .top-left,
            .top-right,
            .bottom-left,
            .bottom-right {
                height: 50px;
            }

            .top-center,
            .bottom-center {
                height: 30px;
            }

            .mid-left,
            .mid-right {
                top: 50px;
                height: calc(100% - 100px);
                width: 20px;
            }

            .piece-text {
                font-size: 6px !important;
            }

            .auth-frame {
                padding: 20px 12px;
            }

            .bat-logo h1 {
                font-size: 9px;
            }

            .bat-symbol {
                width: 40px;
                height: 20px;
            }

            .bat-symbol::before {
                font-size: 20px;
            }

            .form-input {
                font-size: 13px;
            }

            .form-label {
                font-size: 11px;
            }

            .hint {
                font-size: 11px;
            }

            .hint span {
                font-size: 8px;
            }

            .equipment-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .auth-screen {
                align-items: flex-start;
                padding-top: 20px;
                overflow-y: auto;
            }

            .auth-frame {
                margin-top: 20px;
                margin-bottom: 20px;
                max-width: 350px;
            }

            .bat-logo {
                margin-bottom: 20px;
            }

            .bat-logo h1 {
                margin-bottom: 10px;
            }

            .auth-form {
                gap: 15px;
            }

            .top-left,
            .top-right,
            .bottom-left,
            .bottom-right {
                height: 60px;
            }

            .top-center,
            .bottom-center {
                height: 30px;
            }

            .mid-left,
            .mid-right {
                top: 60px;
                height: calc(100% - 120px);
            }

            .piece-text {
                font-size: 8px !important;
            }
        }

        @media (min-height: 1000px) {

            .top-left,
            .top-right,
            .bottom-left,
            .bottom-right {
                height: 120px;
            }

            .mid-left,
            .mid-right {
                top: 120px;
                height: calc(100% - 240px);
            }

            .piece-text {
                font-size: 12px !important;
            }

            .hint {
                font-size: 20px;
            }

            .hint span {
                font-size: 14px;
            }
        }

        @supports (-webkit-touch-callout: none) {

            input,
            textarea {
                font-size: 16px !important;
            }
        }

        @media (prefers-color-scheme: dark) {
            .auth-frame {
                background: rgba(5, 10, 20, 0.97);
            }

            .modal-content {
                background: linear-gradient(145deg, rgba(5, 10, 20, 0.97), rgba(2, 5, 10, 0.99));
            }
        }

        /* =========================================== */
        /* WIDGETS EM MOBILE - TODOS VISÍVEIS E FUNCIONAIS */
        /* =========================================== */
        @media (max-width: 768px) {

            /* FORÇAR TODOS OS WIDGETS A APARECEREM EM MOBILE */
            .radar-widget,
            .voice-analyzer-widget,
            .biometric-scanner-widget,
            .encryption-widget {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
                pointer-events: auto !important;
                position: absolute !important;
                z-index: 10 !important;
                touch-action: none;
            }

            /* POSICIONAMENTO DOS WIDGETS (vertical para não sobrepor) */
            .radar-widget {
                top: 100px !important;
                left: 10px !important;
                width: 140px !important;
                height: 140px !important;
            }

            .voice-analyzer-widget {
                top: 260px !important;
                left: 10px !important;
                width: 140px !important;
                height: 120px !important;
            }

            .biometric-scanner-widget {
                top: 400px !important;
                left: 10px !important;
                width: 140px !important;
                height: 140px !important;
            }

            .encryption-widget {
                top: 560px !important;
                left: 10px !important;
                width: 140px !important;
                height: 130px !important;
            }

            /* AJUSTES INTERNOS DOS WIDGETS */
            .radar-label {
                font-size: 8px !important;
            }

            .radar-btn {
                width: 22px !important;
                height: 22px !important;
                font-size: 9px !important;
            }

            .voice-header h3,
            .scanner-header h3,
            .encryption-header h3 {
                font-size: 9px !important;
            }

            .voice-visualizer {
                height: 40px !important;
                gap: 3px !important;
            }

            .frequency-bar {
                width: 6px !important;
            }

            .scanner-container {
                height: 50px !important;
            }

            .face-outline {
                width: 30px !important;
                height: 40px !important;
            }

            .biometric-data {
                grid-template-columns: 1fr !important;
                gap: 5px !important;
            }

            .encryption-terminal {
                height: 50px !important;
            }

            .code-line {
                font-size: 9px !important;
            }
        }

        @media (max-width: 480px) {

            /* AJUSTES PARA TELAS MUITO PEQUENAS */
            .radar-widget {
                top: 90px !important;
                left: 5px !important;
                width: 120px !important;
                height: 120px !important;
            }

            .voice-analyzer-widget {
                top: 230px !important;
                left: 5px !important;
                width: 120px !important;
                height: 110px !important;
            }

            .biometric-scanner-widget {
                top: 360px !important;
                left: 5px !important;
                width: 120px !important;
                height: 120px !important;
            }

            .encryption-widget {
                top: 500px !important;
                left: 5px !important;
                width: 120px !important;
                height: 110px !important;
            }

            .radar-grid {
                background-size: 15px 15px;
            }

            .radar-target {
                width: 4px;
                height: 4px;
            }
        }
    </style>
</head>

<body>
    <!-- Efeito de chuva Gotham -->
    <div class="rain-overlay"></div>

    <!-- Alerta de Emergência Batman -->
    <div class="emergency-alert" id="emergencyAlert" onclick="dismissEmergency()">
        <div class="emergency-content">
            <h1 class="emergency-title">ALERTA BATMAN</h1>
            <div class="emergency-subtitle">NÍVEL DE AMEAÇA: MÁXIMO</div>
            <div class="emergency-message">
                ⚠️ ATENÇÃO: ATIVIDADE CRIMINOSA DETECTADA<br>
                🔴 REQUER INTERVENÇÃO DO CAVALEIRO DAS TREVAS
            </div>
            <div class="emergency-countdown" id="emergencyCountdown">00:30</div>
            <div style="color: #ff8888; font-size: 14px;">CLIQUE PARA CONFIRMAR</div>
        </div>
    </div>

    <!-- Widget do Timer de Alerta -->
    <div class="alert-timer" id="alertTimer">
        <span class="alert-label">ALERT</span>
        <div class="timer-value" id="nextAlertTime">01:00</div>
        <button class="timer-skip" onclick="skipAlert()">X</button>
    </div>

    <!-- Tela de Login -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-frame">
            <div class="bat-logo">
                <h1>WAYNE ENTERPRISES</h1>
                <div class="bat-symbol"></div>
            </div>

            <div class="auth-error" id="authError">
                Acesso negado. Verifique suas credenciais.
            </div>

            <!-- Formulário de Login -->
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <input type="text" class="form-input" id="loginUser" required>
                    <label class="form-label">USUÁRIO</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="loginPass" required>
                    <label class="form-label">SENHA</label>
                </div>

                <button type="submit" class="auth-button">ACESSAR SISTEMA</button>
            </form>

            <!-- Formulário de Registro -->
            <form class="auth-form" id="registerForm" style="display: none;">
                <div class="form-group">
                    <input type="text" class="form-input" id="regUser" required>
                    <label class="form-label">NOVO USUÁRIO</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="regPass" required>
                    <label class="form-label">SENHA</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="regConfirm" required>
                    <label class="form-label">CONFIRMAR SENHA</label>
                </div>

                <button type="submit" class="auth-button">CRIAR CONTA</button>
            </form>

            <div class="auth-switch">
                <span id="switchText">Não tem acesso?</span>
                <a id="switchLink" onclick="toggleForms()">Solicitar credencial</a>
            </div>
        </div>
    </div>

    <!-- Indicador de Usuário -->
    <div class="user-indicator" id="userIndicator" style="display: none;">
        <span id="userName">Operador</span>
        <button class="logout-btn" onclick="logout()">LOGOUT</button>
    </div>

    <!-- Interface HUD -->
    <div class="hud-frame" id="hudFrame">
        <!-- Peça superior esquerda -->
        <div class="piece-container top-left" onclick="openModal('batcave')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L70,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">BATCAVE SYSTEMS<br>CONTROL PANEL</div>
        </div>

        <!-- Peça superior central -->
        <div class="piece-container top-center" onclick="openModal('command')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L90,100 L10,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">CENTRAL DE COMANDO<br>WAYNE ENTERPRISES</div>
        </div>

        <!-- Peça superior direita -->
        <div class="piece-container top-right" onclick="openModal('surveillance')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L100,100 L30,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">VIGILÂNCIA GOTHAM<br>SURVEILLANCE GRID</div>
        </div>

        <!-- Peça lateral esquerda -->
        <div class="piece-container mid-left" onclick="openModal('weapons')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,10 L100,90 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">ARMAMENTOS<br>E EQUIPAMENTOS</div>
        </div>

        <!-- Peça lateral direita -->
        <div class="piece-container mid-right" onclick="openModal('vehicle')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,10 L100,0 L100,100 L0,90 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">CONTROLE DE<br>VEÍCULOS TÁTICOS</div>
        </div>

        <!-- Peça inferior esquerda -->
        <div class="piece-container bottom-left" onclick="openModal('database')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L70,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">MISSÃO ATIVA<br>LIVE OPERATION DATA</div>
        </div>

        <!-- Peça inferior central -->
        <div class="piece-container bottom-center" onclick="openModal('gotham')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M10,0 L90,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">MAPA GOTHAM<br>INTERATIVE CITY MAP</div>
        </div>

        <!-- Peça inferior direita -->
        <div class="piece-container bottom-right" onclick="openModal('mission')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M30,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">BANCO DE DADOS<br>CRIMINAL GOTHAM</div>
        </div>

        <div class="hint">
            <img src="baixados.png" alt="Bat Logo"
                style="width: 180px; height: auto; display: block; margin: 0 auto 20px; filter: drop-shadow(0 0 15px rgba(0, 217, 255, 0.6)); max-width: 100%;">
            <strong style="display: block; font-size: 20px;">BAT SISTEMA ONLINE</strong>
            <span>Aguardando decisão do Cavaleiro das Trevas</span>
        </div>

        <!-- Widget de Radar -->
        <div class="radar-widget" id="radarWidget">
            <div class="radar-label">⬢ TÁTICO OVERLAY</div>
            <div class="radar-grid"></div>

            <div class="radar-circles">
                <div class="radar-circle" style="width: 33%; height: 33%;"></div>
                <div class="radar-circle" style="width: 66%; height: 66%;"></div>
                <div class="radar-circle" style="width: 99%; height: 99%;"></div>
            </div>

            <!-- Alvos -->
            <div class="radar-target friendly" style="top: 30%; left: 40%;"></div>
            <div class="radar-target hostile" style="top: 60%; left: 75%;"></div>
            <div class="radar-target hostile" style="top: 20%; left: 80%;"></div>
            <div class="radar-target neutral" style="top: 70%; left: 30%;"></div>

            <!-- Linha de varredura -->
            <div class="radar-sweep"></div>
            <div class="radar-line"></div>

            <!-- Controles -->
            <div class="radar-controls">
                <button class="radar-btn" onclick="toggleRadar()">📡</button>
                <button class="radar-btn" onclick="changeRadarMode()">🎯</button>
                <button class="radar-btn" onclick="toggleRadarGrid()">🌐</button>
            </div>
        </div>

        <!-- Widget 1: Análise de Frequência de Voz - SIMPLIFICADO -->
        <div class="voice-analyzer-widget" id="voiceAnalyzerWidget">
            <div class="voice-header">
                <i class="fas fa-wave-square"></i>
                <h3>ANÁLISE DE FREQUÊNCIA DE VOZ</h3>
            </div>

            <div class="voice-visualizer" id="voiceVisualizer">
                <!-- As barras serão geradas por JavaScript -->
            </div>

            <div class="voice-status">
                <div>
                    <div class="status-dot recording"></div>
                    <span style="color: #ff0040;" id="voiceStatusText">GRAVANDO</span>
                </div>
                <div>
                    <div class="status-dot" id="sensitivityDot"></div>
                    <span style="color: #00d9ff;" id="sensitivityText">SENSIBILIDADE: ALTA</span>
                </div>
            </div>
        </div>

        <!-- Widget 2: Scanner Biométrico - SIMPLIFICADO -->
        <div class="biometric-scanner-widget" id="biometricScannerWidget">
            <div class="scanner-header">
                <i class="fas fa-id-card"></i>
                <h3>SCANNER BIOMÉTRICO</h3>
            </div>

            <div class="scanner-container">
                <div class="face-outline"></div>
                <div class="scan-line"></div>
            </div>

            <div class="biometric-data">
                <div class="bio-data-item">
                    <div class="bio-data-label">IDENTIDADE</div>
                    <div class="bio-data-value" id="identityValue">VERIFICANDO...</div>
                </div>
                <div class="bio-data-item">
                    <div class="bio-data-label">CONFIANÇA</div>
                    <div class="bio-data-value" id="confidenceValue">98.4%</div>
                </div>
                <div class="bio-data-item match-progress">
                    <div class="bio-data-label">PROGRESSO DA CORRESPONDÊNCIA</div>
                    <div class="scanner-progress-bar">
                        <div class="scanner-progress-fill" id="scannerProgressFill"></div>
                    </div>
                    <div id="progressPercentage"
                        style="font-size: 9px; color: #00ff88; text-align: right; margin-top: 3px;">98%</div>
                </div>
            </div>
        </div>

        <!-- Widget 3: Monitor de Criptografia - SIMPLIFICADO -->
        <div class="encryption-widget" id="encryptionWidget">
            <div class="encryption-header">
                <h3><i class="fas fa-lock"></i> MONITOR DE CRIPTOGRAFIA</h3>
                <div class="encryption-status" id="encryptionStatus">ATIVO</div>
            </div>

            <div class="encryption-terminal">
                <div class="terminal-content" id="terminalContent">
                    <!-- Linhas de código serão adicionadas por JavaScript -->
                </div>
            </div>

            <div class="encryption-info">
                <div class="key-info">
                    CHAVE: BAT-<span id="encryptionKey">7X9A8B2C</span>
                </div>
                <div class="strength-info">
                    FORÇA: <span id="encryptionStrength">QUÂNTICA</span>
                </div>
            </div>
        </div>

        <!-- Modal Principal -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">Modal Title</h2>
                    <button class="modal-close" onclick="closeModal()">×</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Conteúdo será inserido via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Modal Detalhado do Vilão -->
        <div class="villain-detail-modal" id="villainDetailModal">
            <div class="villain-detail-content">
                <button class="close-detail-btn" onclick="closeVillainDetail()">×</button>
                <div id="villainDetailLeft"></div>
                <div id="villainDetailRight"></div>
            </div>
        </div>

        <!-- Modal Detalhado do Equipamento -->
        <div class="equipment-detail-modal" id="equipmentDetailModal" style="display: none;">
            <!-- Será criado dinamicamente -->
        </div>
    </div>

    <script>
        // ===========================================
        // SISTEMA COMPLETO BAT-HUD v2.0 - CORRIGIDO
        // ===========================================

        // ===========================================
        // VARIÁVEIS GLOBAIS
        // ===========================================
        let secondsToNextAlert = 180;
        let emergencyCountdown = 30;
        let alertInterval;
        let isLoggedIn = false;
        let currentUser = null;
        let liveUpdateIntervals = {};
        let batmobileStatus = {
            speed: 0,
            fuel: 100,
            systems: 'ONLINE',
            destination: '',
            turbo: false,
            camouflage: false
        };

        // ===========================================
        // DADOS DO SISTEMA
        // ===========================================
        const users = JSON.parse(localStorage.getItem('wayne_users')) || [
            { username: 'batman', password: 'darkknight' },
            { username: 'robin', password: 'sidekick' },
            { username: 'alfred', password: 'pennyworth' },
            { username: 'gordon', password: 'commissioner' }
        ];

        const villains = [
            {
                name: "CORINGA",
                status: "ENCARCERADO",
                location: "MANICÔMIO ARKHAM",
                img: "https://img.freepik.com/fotos-premium/cute-joker-persona-isolado-em-fundo-branco_787273-11761.jpg?semt=ais_hybrid",
                alias: "Jack Napier",
                threat: "EXTREMO",
                desc: "Instabilidade mental total. Requer contenção nível 5. Habilidades: Química, manipulação, estratégia caótica. Última atividade: 72h atrás.",
                lastSeen: "2024-01-15 22:30",
                crimes: ["Assalto a banco", "Sequestro", "Terrorismo químico"]
            },
            {
                name: "BANE",
                status: "FORAGIDO",
                location: "SUBTERRÂNEO",
                img: "https://th.bing.com/th/id/R.9443a9d7bfc7973fd6258429e4c343e6?rik=DbRBpjRcPcHfFA&pid=ImgRaw&r=0",
                alias: "Desconhecido",
                threat: "ALTO",
                desc: "Dependência de Veneno. Força física extrema e intelecto tático. Habilidades: Combate corpo a corpo, estratégia militar. Monitorar entrada de drogas em Gotham.",
                lastSeen: "2024-01-20 03:15",
                crimes: ["Tráfico de Veneno", "Extorsão", "Destruição de propriedade"]
            },
            {
                name: "MULHER-GATO",
                status: "ATIVA",
                location: "ZONA LESTE ALTA",
                img: "https://pngset.com/images/catwoman-pics-catwoman-michelle-pfeiffer-latex-clothing-person-human-head-transparent-png-983716.png",
                alias: "Selina Kyle",
                threat: "MÉDIO",
                desc: "Especialista em invasão e furto. Rastrear movimentos noturnos. Habilidades: Acrobacia, lockpicking, infiltração. Alvo: Joalherias de alto valor.",
                lastSeen: "2024-01-19 23:45",
                crimes: ["Furto qualificado", "Invasão de domicílio", "Receptação"]
            },
            {
                name: "PINGÜIM",
                status: "NEGÓCIOS",
                location: "ICEBERG LOUNGE",
                img: "https://i0.wp.com/popoca.com.br/wp-content/uploads/2019/05/The-Batman-Pnguim-e1558146670143.jpg?fit=639%2C700&ssl=1",
                alias: "Oswald Cobblepot",
                threat: "MÉDIO",
                desc: "Opera através de frentes legais. Monitorar transações financeiras. Habilidades: Lavagem de dinheiro, tráfico de armas. Conexões: Máfia russa.",
                lastSeen: "2024-01-20 20:00",
                crimes: ["Lavagem de dinheiro", "Tráfico de armas", "Extorsão"]
            },
            {
                name: "CHARADA",
                status: "PLANEJANDO",
                location: "DESCONHECIDO",
                img: "https://i.pinimg.com/originals/71/6e/ff/716effe6d4c2ac68d95af85168851bae.jpg",
                alias: "Edward Nigma",
                threat: "ALTO",
                desc: "Obsessão por enigmas. Possível ataque cibernético em andamento. Habilidades: Hacking, dispositivos complexos. Padrão: Deixa pistas deliberadamente.",
                lastSeen: "2024-01-18 14:20",
                crimes: ["Ataque cibernético", "Sequestro", "Extorsão"]
            },
            {
                name: "DUAS-CARAS",
                status: "ATIVO",
                location: "TRIBUNAL",
                img: "https://w7.pngwing.com/pngs/193/978/png-transparent-batman-arkham-city-batman-arkham-origins-batman-arkham-knight-two-face-catwoman-batman-arkham-city-video-game-villain-fictional-character.png",
                alias: "Harvey Dent",
                threat: "ALTO",
                desc: "Dualidade psicótica. Decisões baseadas em probabilidade de 50%. Habilidades: Estratégia legal pervertida. Alvos: Figuras da justiça.",
                lastSeen: "2024-01-19 19:30",
                crimes: ["Assalto", "Extorsão", "Obstrução da justiça"]
            },
            {
                name: "ESPANTALHO",
                status: "ENCARCERADO",
                location: "ARKHAM",
                img: "https://pngset.com/images/espantalho-batman-villain-dc-sticker-by-lady-joker-chewbacca-statue-sculpture-art-hand-transparent-png-2629022.png",
                alias: "Jonathan Crane",
                threat: "ALTO",
                desc: "Uso de toxinas do medo. Não remover máscara de oxigênio. Habilidades: Psicologia, química avançada. Experiências: Testes em civis.",
                lastSeen: "2024-01-10 11:00",
                crimes: ["Experimentos ilegais", "Terrorismo", "Sequestro"]
            },
            {
                name: "HARLEY QUINN",
                status: "ATIVA",
                location: "AMUSEMENT MILE",
                img: "https://w7.pngwing.com/pngs/572/946/png-transparent-harley-quinn-batman-harlequin-supervillain-costume-harley-quinn-heroes-leather-fictional-character.png",
                alias: "Harleen Quinzel",
                threat: "MÉDIO",
                desc: "Comportamento errático. Alta agilidade e combate corpo a corpo. Habilidades: Ginástica, armas improvisadas. Estado mental: Impulsivo/imprevisível.",
                lastSeen: "2024-01-19 21:15",
                crimes: ["Assalto", "Vandalismo", "Obstrução da justiça"]
            }
        ];

        const arsenalData = [
            {
                id: 'batmobile',
                name: "BATMÓVEL",
                status: "ONLINE",
                value: "100%",
                icon: "🚗",
                class: "status-ok",
                progress: 100,
                desc: "Tanque tático urbano com propulsão a jato e modo de combate. Capacidade máxima: 300 km/h. Sistema de armas: Canhão de pulso, lança-ganchos, modo blindagem ativa.",
                vitals: [
                    "Combustível: 100%",
                    "Sistemas: ONLINE",
                    "Armamento: PRONTO",
                    "Defesa: ATIVA"
                ],
                combos: ["Bomba Fumaça → Distração", "Turbo → Perseguição rápida"]
            },
            {
                id: 'batarang',
                name: "BATARANGUES",
                status: "24/24",
                value: "24",
                icon: "🦇",
                class: "status-ok",
                progress: 100,
                desc: "Armas de arremesso equilibradas. Inclui versões explosivas e elétricas. Material: Titanium-Aço. Precisão: 99.8% a 50m. Recarga automática no cinto.",
                vitals: [
                    "Quantidade: 24",
                    "Tipo: Padrão/Elt/Exp",
                    "Precisão: 99.8%",
                    "Recarga: PRONTA"
                ],
                combos: ["Bomba Fumaça → Ataque furtivo", "Gancho → Ataque aéreo"]
            },
            {
                id: 'grapnel',
                name: "ARMAS DE GANCHO",
                status: "PRONTO",
                value: "6",
                icon: "⚓",
                class: "status-ok",
                progress: 100,
                desc: "Pistola de compressão para ascensão rápida e locomoção urbana. Alcance: 80m. Velocidade: 15m/s. Sistema de retração magnético.",
                vitals: [
                    "Ganchos: 6",
                    "Alcance: 80m",
                    "Pressão: 300 PSI",
                    "Sistema: OPERACIONAL"
                ],
                combos: ["Visão Detetive → Reconhecimento", "Batarang → Ataque combinado"]
            },
            {
                id: 'armor',
                name: "ARMADURA",
                status: "94%",
                value: "94%",
                icon: "🛡️",
                class: "status-ok",
                progress: 94,
                desc: "Polímero reforçado com Kevlar e placas de titânio. Nível de proteção: Balas .50 cal. Sistema de amortecimento de impacto. Camada externa: Absorção radar.",
                vitals: [
                    "Integridade: 94%",
                    "Proteção: NÍVEL 10",
                    "Mobilidade: 85%",
                    "Furtividade: ATIVA"
                ],
                combos: ["Todos os sistemas → Defesa máxima"]
            },
            {
                id: 'explosive_gel',
                name: "GEL EXPLOSIVO",
                status: "3 CARGAS",
                value: "3",
                icon: "🧨",
                class: "status-warn",
                progress: 60,
                desc: "Aerosol explosivo para destruição estrutural ou incapacitação. Detonação remota ou por impacto. Força: 5x TNT. Contenção: Nanotecnologia estável.",
                vitals: [
                    "Cargas: 3",
                    "Força: 5x TNT",
                    "Estabilidade: 96%",
                    "Recarga: NECESSÁRIA"
                ],
                combos: ["Disruptor → Desarme seguro", "Gancho → Posicionamento tático"]
            },
            {
                id: 'smoke_pellet',
                name: "BOMBA FUMAÇA",
                status: "5/5",
                value: "5",
                icon: "💨",
                class: "status-ok",
                progress: 100,
                desc: "Cápsulas de ocultação rápida para evasão e furtividade. Tempo de dispersão: 2s. Duração: 45s. Área de cobertura: 20m raio. Invisível a infravermelho.",
                vitals: [
                    "Unidades: 5",
                    "Duração: 45s",
                    "Cobertura: 20m",
                    "IR Camouflage: SIM"
                ],
                combos: ["Batarang → Ataque furtivo", "Gancho → Retirada rápida"]
            },
            {
                id: 'disruptor',
                name: "DISRUPTOR",
                status: "RECARR.",
                value: "60%",
                icon: "🔫",
                class: "status-alert",
                progress: 60,
                desc: "Dispositivo eletrônico para desativar armas de fogo e minas remotamente. Alcance: 100m. Frequência: 2.4-5.8 GHz. Sistema anti-interferência.",
                vitals: [
                    "Bateria: 60%",
                    "Alcance: 100m",
                    "Frequência: 5.8 GHz",
                    "Status: RECARGA NEC."
                ],
                combos: ["Gel Explosivo → Desarme e destruição", "Armadura → Proteção durante uso"]
            },
            {
                id: 'vision',
                name: "VISÃO DETETIVE",
                status: "ATIVO",
                value: "100%",
                icon: "👁️",
                class: "status-ok",
                progress: 100,
                desc: "Scanner de radiação infravermelha, térmica e análise química. Identificação biométrica. Rastreamento em 360°. Banco de dados criminal integrado.",
                vitals: [
                    "Scanner: ATIVO",
                    "IR/Térmico: ONLINE",
                    "Biometria: 100%",
                    "Banco de Dados: SINC"
                ],
                combos: ["Todos os sistemas → Análise completa", "Gancho → Reconhecimento aéreo"]
            }
        ];

        const gothamDistricts = {
            'industrial': {
                name: 'ÁREA INDUSTRIAL',
                alert: 'ALERTA VERMELHO',
                alertClass: 'alert-red',
                info: `
                    • Atividade criminal: ALTA<br>
                    • Último incidente: Assalto à carga 2h atrás<br>
                    • Presença policial: 65%<br>
                    • Vilões ativos: PINGÜIM, DOIS-CARAS<br>
                    • Recomendação: PATRULHA INTENSIVA
                `,
                crimeRate: '87%',
                policePresence: '65%',
                incidents: [
                    { time: '02:30', event: 'Assalto à carga', alert: 'ALTO' },
                    { time: '18:45', event: 'Vandalismo', alert: 'MÉDIO' },
                    { time: '22:10', event: 'Tráfico', alert: 'ALTO' }
                ]
            },
            'center': {
                name: 'CENTRO DA CIDADE',
                alert: 'ALERTA AMARELO',
                alertClass: 'alert-yellow',
                info: `
                    • Atividade criminal: MODERADA<br>
                    • Último incidente: Furto em joalheria 4h atrás<br>
                    • Presença policial: 92%<br>
                    • Vilões ativos: MULHER-GATO<br>
                    • Recomendação: VIGILÂNCIA NOTURNA
                `,
                crimeRate: '62%',
                policePresence: '92%',
                incidents: [
                    { time: '04:15', event: 'Furto em joalheria', alert: 'MÉDIO' },
                    { time: '14:30', event: 'Distúrbio civil', alert: 'BAIXO' },
                    { time: '20:45', event: 'Tentativa de assalto', alert: 'MÉDIO' }
                ]
            },
            'suburbs': {
                name: 'SUBÚRBIOS',
                alert: 'ALERTA VERDE',
                alertClass: 'alert-green',
                info: `
                    • Atividade criminal: BAIXA<br>
                    • Último incidente: Perturbação da paz 8h atrás<br>
                    • Presença policial: 78%<br>
                    • Vilões ativos: NENHUM<br>
                    • Recomendação: PATRULHA ROTINEIRA
                `,
                crimeRate: '23%',
                policePresence: '78%',
                incidents: [
                    { time: '21:30', event: 'Perturbação da paz', alert: 'BAIXO' },
                    { time: '15:45', event: 'Vandalismo menor', alert: 'BAIXO' }
                ]
            },
            'port': {
                name: 'PORTO DE GOTHAM',
                alert: 'ALERTA LARANJA',
                alertClass: 'alert-orange',
                info: `
                    • Atividade criminal: ELEVADA<br>
                    • Último incidente: Contrabando detectado 1h atrás<br>
                    • Presença policial: 71%<br>
                    • Vilões ativos: BANE (SUSPEITA)<br>
                    • Recomendação: INVESTIGAÇÃO SUBMARINA
                `,
                crimeRate: '76%',
                policePresence: '71%',
                incidents: [
                    { time: '01:45', event: 'Contrabando detectado', alert: 'ALTO' },
                    { time: '12:20', event: 'Atividade suspeita', alert: 'MÉDIO' },
                    { time: '19:55', event: 'Tráfico de armas', alert: 'ALTO' }
                ]
            },
            'arkham': {
                name: 'MANICÔMIO ARKHAM',
                alert: 'ALERTA ROXO',
                alertClass: 'alert-purple',
                info: `
                    • Status: MÁXIMA SEGURANÇA<br>
                    • Prisioneiros: 42 (incluindo CORINGA, ESPANTALHO)<br>
                    • Guardas: 100% DISPONÍVEL<br>
                    • Última inspeção: ${new Date().toLocaleDateString('pt-BR')}<br>
                    • Recomendação: MONITORAMENTO 24/7
                `,
                crimeRate: '99%',
                policePresence: '100%',
                incidents: [
                    { time: '10:00', event: 'Inspeção de segurança', alert: 'ROTINA' },
                    { time: '16:30', event: 'Transferência de prisioneiro', alert: 'ALTO' }
                ]
            },
            'wayne': {
                name: 'WAYNE TOWER',
                alert: 'SEGURO',
                alertClass: 'alert-green',
                info: `
                    • Status: FORTIFICADO<br>
                    • Sistemas de segurança: ATIVOS<br>
                    • Acesso: RESTRITO NÍVEL 10<br>
                    • Última varredura: AGORA<br>
                    • Bat-Sinal: OPERACIONAL
                `,
                crimeRate: '1%',
                policePresence: '100%',
                incidents: [
                    { time: '00:00', event: 'Varredura de segurança', alert: 'ROTINA' },
                    { time: '12:00', event: 'Teste do Bat-Sinal', alert: 'TESTE' }
                ]
            }
        };

        const surveillanceData = {
            cameras: [
                {
                    id: 1,
                    name: "CAM-001 - Wayne Tower",
                    location: "Topo da Wayne Tower",
                    status: "active",
                    feed: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    details: "Visão panorâmica do centro financeiro. Ângulo de 360°."
                },
                {
                    id: 2,
                    name: "CAM-012 - Distrito Industrial",
                    location: "Rua Principal Industrial",
                    status: "warning",
                    feed: "https://images.unsplash.com/photo-1542744094-3a31f272c490?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    details: "Monitoramento noturno ativo. Zona de alto risco."
                },
                {
                    id: 3,
                    name: "CAM-023 - Ponte de Gotham",
                    location: "Entrada Sul da Ponte",
                    status: "active",
                    feed: "https://images.unsplash.com/photo-1542744094-0d3c2b5b5c9d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    details: "Controle de tráfego e segurança. Scanner de placas."
                },
                {
                    id: 4,
                    name: "CAM-034 - Praça Central",
                    location: "Monumento ao Fundador",
                    status: "inactive",
                    feed: "https://images.unsplash.com/photo-1542744095-291d1f67b221?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    details: "Em manutenção. Retorno previsto em 2 horas."
                },
                {
                    id: 5,
                    name: "CAM-045 - Porto de Gotham",
                    location: "Torre de Controle Portuário",
                    status: "active",
                    feed: "https://images.unsplash.com/photo-1542744094-fb7715c7b5c9?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    details: "Monitoramento de carga e descarga. Scanner de contêineres."
                },
                {
                    id: 6,
                    name: "CAM-056 - Estação de Metrô",
                    location: "Estação Central Subterrânea",
                    status: "active",
                    feed: "https://media1.giphy.com/media/P9iws4imseYNg5KkhQ/giphy.gif",
                    details: "Monitoramento de passageiros. Análise facial ativa."
                }
            ],
            logs: [
                "Sistema de vigilância inicializado. Todas as câmeras verificadas.",
                "Análise facial: 3 correspondências encontradas no banco de dados.",
                "Rastreamento veicular: Veículo suspeito identificado na Zona Industrial.",
                "Câmera CAM-034 entrou em manutenção programada.",
                "Backup automático realizado com sucesso.",
                "Alerta: Movimento suspeito detectado na Praça Central.",
                "Atualização de firmware aplicada em 12 câmeras.",
                "Sistema operando em capacidade máxima (92% de cobertura)."
            ],
            systems: {
                analise_facial: true,
                rastreamento: true,
                termico: false,
                notificacoes: true,
                gravacao: false,
                analise: true
            }
        };

        // ===========================================
        // SISTEMA DE ALERTA
        // ===========================================
        function startAlertSystem() {
            setInterval(() => {
                if (secondsToNextAlert > 0) {
                    secondsToNextAlert--;
                    updateTimerDisplay();
                } else {
                    if (document.getElementById('emergencyAlert').style.display !== 'flex') {
                        triggerEmergency();
                    }
                }
            }, 1000);
            updateTimerVisibility();
        }

        function updateTimerDisplay() {
            const mins = Math.floor(secondsToNextAlert / 60);
            const secs = secondsToNextAlert % 60;
            document.getElementById('nextAlertTime').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimerVisibility() {
            const alertTimer = document.getElementById('alertTimer');
            alertTimer.style.display = isLoggedIn ? 'flex' : 'none';
        }

        function triggerEmergency() {
            const alertDiv = document.getElementById('emergencyAlert');
            alertDiv.style.display = 'flex';
            emergencyCountdown = 180; // 3 minutos

            // Formatar corretamente o tempo inicial
            const initialMins = Math.floor(emergencyCountdown / 60);
            const initialSecs = emergencyCountdown % 60;
            document.getElementById('emergencyCountdown').textContent =
                `${initialMins.toString().padStart(2, '0')}:${initialSecs.toString().padStart(2, '0')}`;

            alertInterval = setInterval(() => {
                emergencyCountdown--;

                // Sempre calcular minutos e segundos
                const mins = Math.floor(emergencyCountdown / 60);
                const secs = emergencyCountdown % 60;
                document.getElementById('emergencyCountdown').textContent =
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                if (emergencyCountdown <= 0) dismissEmergency();
            }, 1000);
            playSound('error');
        }

        function dismissEmergency() {
            clearInterval(alertInterval);
            document.getElementById('emergencyAlert').style.display = 'none';
            secondsToNextAlert = 180; // 3 minutos
            updateTimerDisplay();
            playSound('success');
        }

        function skipAlert() {
            secondsToNextAlert = 0;
            playSound('click');
        }

        // ===========================================
        // SISTEMA DE AUTENTICAÇÃO
        // ===========================================
        const authScreen = document.getElementById('authScreen');
        const hudFrame = document.getElementById('hudFrame');
        const userIndicator = document.getElementById('userIndicator');
        const userName = document.getElementById('userName');
        const authError = document.getElementById('authError');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const switchText = document.getElementById('switchText');
        const switchLink = document.getElementById('switchLink');

        // Verificar se já está logado
        const savedUser = localStorage.getItem('wayne_current_user');
        if (savedUser) {
            currentUser = savedUser;
            isLoggedIn = true;
            showHUD();
        }

        // Iniciar sistemas
        startAlertSystem();
        updateTimerDisplay();

        function toggleForms() {
            if (loginForm.style.display !== 'none') {
                loginForm.style.display = 'none';
                registerForm.style.display = 'flex';
                switchText.textContent = 'Já tem acesso?';
                switchLink.textContent = 'Fazer login';
            } else {
                registerForm.style.display = 'none';
                loginForm.style.display = 'flex';
                switchText.textContent = 'Não tem acesso?';
                switchLink.textContent = 'Solicitar credencial';
            }
            authError.style.display = 'none';
            playSound('click');
        }

        // Login
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('loginUser').value;
            const password = document.getElementById('loginPass').value;

            const user = users.find(u =>
                u.username === username && u.password === password
            );

            if (user) {
                currentUser = username;
                localStorage.setItem('wayne_current_user', username);
                isLoggedIn = true;
                showHUD();
                playSound('success');
            } else {
                showError('Credenciais inválidas');
                playSound('error');
            }
        });

        // Registro
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('regUser').value;
            const password = document.getElementById('regPass').value;
            const confirm = document.getElementById('regConfirm').value;

            if (username.length < 3) {
                showError('Usuário deve ter pelo menos 3 caracteres');
                return;
            }

            if (password.length < 4) {
                showError('Senha deve ter pelo menos 4 caracteres');
                return;
            }

            if (password !== confirm) {
                showError('Senhas não coincidem');
                return;
            }

            if (users.find(u => u.username === username)) {
                showError('Usuário já existe');
                return;
            }

            users.push({ username, password });
            localStorage.setItem('wayne_users', JSON.stringify(users));

            currentUser = username;
            localStorage.setItem('wayne_current_user', username);
            isLoggedIn = true;

            showHUD();
            playSound('success');
        });

        function showHUD() {
            authScreen.style.display = 'none';
            hudFrame.style.display = 'block';
            userIndicator.style.display = 'block';
            userName.textContent = currentUser.toUpperCase();
            updateTimerVisibility();

            // Efeito de entrada
            const pieces = document.querySelectorAll('.piece-container');
            pieces.forEach((piece, index) => {
                piece.style.opacity = '0';
                piece.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    piece.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    piece.style.opacity = '1';
                    piece.style.transform = 'translateY(0)';
                }, index * 100);
            });

            adjustSidePiecesHeight();
            window.addEventListener('resize', adjustSidePiecesHeight);
        }

        function adjustSidePiecesHeight() {
            setTimeout(() => {
                const topLeft = document.querySelector('.top-left');
                const bottomLeft = document.querySelector('.bottom-left');

                if (topLeft && bottomLeft && topLeft.offsetHeight > 0) {
                    const topHeight = topLeft.offsetHeight;
                    const bottomHeight = bottomLeft.offsetHeight;
                    const totalHeight = window.innerHeight;

                    const midLeft = document.querySelector('.mid-left');
                    const midRight = document.querySelector('.mid-right');

                    if (midLeft && midRight) {
                        const newHeight = totalHeight - topHeight - bottomHeight;
                        if (newHeight > 0) {
                            midLeft.style.height = `${newHeight}px`;
                            midRight.style.height = `${newHeight}px`;
                        }
                    }
                }
            }, 100);
        }

        function logout() {
            playSound('logout');
            const pieces = document.querySelectorAll('.piece-container');
            pieces.forEach((piece, index) => {
                setTimeout(() => {
                    piece.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    piece.style.opacity = '0';
                    piece.style.transform = 'translateY(20px)';
                }, index * 50);
            });

            setTimeout(() => {
                currentUser = null;
                isLoggedIn = false;
                localStorage.removeItem('wayne_current_user');
                hudFrame.style.display = 'none';
                userIndicator.style.display = 'none';
                authScreen.style.display = 'flex';
                loginForm.style.display = 'flex';
                registerForm.style.display = 'none';
                switchText.textContent = 'Não tem acesso?';
                switchLink.textContent = 'Solicitar credencial';
                authError.style.display = 'none';
                updateTimerVisibility();

                // Limpar formulários
                document.getElementById('loginUser').value = '';
                document.getElementById('loginPass').value = '';
                document.getElementById('regUser').value = '';
                document.getElementById('regPass').value = '';
                document.getElementById('regConfirm').value = '';

                // Parar atualizações em tempo real
                Object.keys(liveUpdateIntervals).forEach(key => {
                    clearInterval(liveUpdateIntervals[key]);
                });
                liveUpdateIntervals = {};

                window.removeEventListener('resize', adjustSidePiecesHeight);
            }, 300);
        }

        function showError(message) {
            authError.textContent = message;
            authError.style.display = 'block';
            const currentForm = loginForm.style.display !== 'none' ? loginForm : registerForm;
            currentForm.style.animation = 'none';
            setTimeout(() => {
                currentForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    currentForm.style.animation = '';
                }, 500);
            }, 10);
        }

        // ===========================================
        // SISTEMA DE MODAIS
        // ===========================================
        const modalContents = {
            'batcave': {
                title: '🦇 BATCAVE SYSTEMS CONTROL - DASHBOARD',
                content: `
        <div style="width: 100%; max-width: 100%; overflow-x: hidden; font-family: 'Segoe UI', 'Arial', sans-serif; background: linear-gradient(135deg, #0a0a0a 0%, #001122 100%); color: #ffffff; min-height: 100vh; position: relative;">
            <!-- Background Effect -->
            <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 255, 136, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(0, 102, 204, 0.05) 0%, transparent 20%);
                pointer-events: none; z-index: 0;"></div>

            <div style="position: relative; z-index: 1;">
                <!-- Header -->
                <div style="text-align: center; padding: 20px; margin-bottom: 30px; background: linear-gradient(90deg, 
                    rgba(0, 255, 136, 0.1) 0%, 
                    rgba(0, 102, 204, 0.1) 100%);
                    border-radius: 15px; border: 1px solid #333; position: relative; overflow: hidden;">
                    
                    <div style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; 
                        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                        animation: shine 3s infinite;"></div>
                    
                    <div style="font-size: 3rem; color: #00ff88; text-shadow: 0 0 15px rgba(0, 255, 136, 0.5); margin-bottom: 10px; letter-spacing: 2px;">⌬</div>
                    <div style="font-size: 2.2rem; background: linear-gradient(90deg, #00ff88, #0066cc); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px; font-weight: 800;">
                        BATCAVE SYSTEMS CONTROL
                    </div>
                    <div style="color: #cccccc; font-size: 1rem; max-width: 600px; margin: 0 auto; line-height: 1.6;">
                        Sistema principal da Batcaver. Monitoramento e controle de todas as funções operacionais.
                    </div>
                </div>

                <!-- Status Bar -->
                <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 20, 40, 0.7); padding: 12px 20px; border-radius: 10px; margin-bottom: 25px; border: 1px solid #333; flex-wrap: wrap; gap: 12px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="batcave-status-dot" style="width: 10px; height: 10px; border-radius: 50%; background-color: #00ff88; animation: pulse 2s infinite;"></div>
                        <div style="font-size: 0.9rem;">Sistema: <span style="color:#00ff88; font-weight: bold;">OPERACIONAL</span></div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="batcave-status-dot" style="width: 10px; height: 10px; border-radius: 50%; background-color: #00ff88; animation: pulse 2s infinite;"></div>
                        <div style="font-size: 0.9rem;">Segurança: <span style="color:#00ff88; font-weight: bold;">NÍVEL MÁXIMO</span></div>
                    </div>
                    <div id="batcaveCurrentTime" style="background: rgba(0, 255, 136, 0.1); padding: 6px 12px; border-radius: 15px; font-family: monospace; font-size: 0.9rem; border: 1px solid #00ff88;">
                        ${new Date().toLocaleTimeString()}
                    </div>
                </div>

                <!-- Main Grid -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <!-- Card 1: Sistema Principal -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">⚙️</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">SISTEMA PRINCIPAL</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Núcleo de controle da Batcaver. Processa todos os dados e coordena os subsistemas.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Capacidade de Processamento</span>
                                <span id="batcaveCpuLoad">85%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveCpuBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 85%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Memória RAM</span>
                                <span id="batcaveRamUsage">72%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveRamBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 72%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" onclick="batcaveOptimizeSystem()" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Otimizar Sistema</button>
                            <button class="batcave-btn-secondary" onclick="batcaveRunDiagnostic()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Diagnóstico</button>
                        </div>
                    </div>

                    <!-- Card 2: Sistemas de Defesa -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">🛡️</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">SISTEMAS DE DEFESA</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Controle de todas as medidas de segurança da Batcaver.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Escudos Energéticos</span>
                                <span id="batcaveShieldsStatus">100%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveShieldsBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 100%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" id="batcaveSecurityBtn" onclick="batcaveToggleSecurity()" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">DESATIVAR SEGURANÇA</button>
                            <button class="batcave-btn-secondary" onclick="batcaveActivateEmergency()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">EMERGÊNCIA</button>
                        </div>

                        <div style="margin-top: 12px; font-size: 0.8rem; color: #cccccc;">
                            <span>🔒 Último acesso: Wayne, B. | 23:47:12</span>
                        </div>
                    </div>

                    <!-- Card 3: Laboratório -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">🔬</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">LABORATÓRIO</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Análises forenses, desenvolvimento tecnológico e pesquisas em andamento.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Projeto Atual: Nanotecnologia</span>
                                <span id="batcaveProjectProgress">65%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveProjectBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 65%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" onclick="batcaveShowProjectDetails()" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Ver Projetos</button>
                            <button class="batcave-btn-secondary" onclick="batcaveAccessDatabase()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Banco de Dados</button>
                        </div>
                    </div>

                    <!-- Card 4: Veículos -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">🚗</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">GARAGEM / VEÍCULOS</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Frota de veículos disponíveis e status de manutenção.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Batmóvel - Pronto para missão</span>
                                <span id="batcaveBatmobileStatus">100%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveBatmobileBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 100%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" onclick="batcavePrepareVehicle('Batmóvel')" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Preparar Batmóvel</button>
                            <button class="batcave-btn-secondary" onclick="batcaveShowVehicles()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Ver Frota</button>
                        </div>
                    </div>

                    <!-- Card 5: Arsenal -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">⚔️</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">ARSENAL</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Inventário de equipamentos, armas e gadgets disponíveis.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Equipamentos Ativos</span>
                                <span id="batcaveArsenalStatus">94%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveArsenalBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 94%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" onclick="batcaveCheckInventory()" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Ver Inventário</button>
                            <button class="batcave-btn-secondary" onclick="batcaveRequestGear()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Solicitar Equipamento</button>
                        </div>
                    </div>

                    <!-- Card 6: Monitoramento Gotham -->
                    <div class="batcave-card" style="background: linear-gradient(145deg, rgba(26, 26, 26, 0.9) 0%, rgba(13, 13, 13, 0.9) 100%); border-radius: 14px; padding: 20px; border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #00ff88, #0066cc);"></div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                            <div style="width: 45px; height: 45px; background: rgba(0, 255, 136, 0.1); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #00ff88;">🌃</div>
                            <div style="font-size: 1.2rem; color: #00ff88; font-weight: 600;">MONITORAMENTO GOTHAM</div>
                        </div>
                        <div style="color: #cccccc; line-height: 1.5; margin-bottom: 15px; font-size: 0.9rem;">
                            Sistema de vigilância e análise criminal em tempo real.
                        </div>
                        
                        <div style="margin-top: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px; color: #cccccc; font-size: 0.85rem;">
                                <span>Cobertura da Cidade</span>
                                <span id="batcaveCoverageStatus">87%</span>
                            </div>
                            <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                                <div id="batcaveCoverageBar" style="height: 100%; background: linear-gradient(90deg, #00ff88, #0066cc); border-radius: 3px; width: 87%; transition: width 1.5s ease-in-out;"></div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="batcave-btn" onclick="batcaveViewSurveillance()" style="padding: 8px 16px; border-radius: 6px; border: none; background: linear-gradient(90deg, #00ff88, #0066cc); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Acessar Câmeras</button>
                            <button class="batcave-btn-secondary" onclick="batcaveScanCrime()" style="padding: 8px 16px; border-radius: 6px; border: 2px solid #333; background: transparent; color: #cccccc; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem;">Escanear Atividade</button>
                        </div>
                    </div>
                </div>

                <!-- Image Gallery -->
                <div style="margin-top: 30px;">
                    <div style="font-size: 1.3rem; color: #00ff88; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid #333;">VISUALIZAÇÃO DA BATCAVE</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px;">
                        <div class="batcave-image-card" onclick="batcaveOpenModal('https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&w=800')" style="border-radius: 10px; overflow: hidden; position: relative; height: 150px; cursor: pointer; transition: transform 0.3s ease;">
                            <img src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?auto=format&fit=crop&w=400" alt="Entrada da Batcaver" style="width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); padding: 10px; transform: translateY(100%); transition: transform 0.3s ease;">
                                <div style="font-size: 0.9rem; color: #00ff88; margin-bottom: 3px; font-weight: bold;">Entrada Secreta</div>
                                <div style="font-size: 0.7rem; color: #cccccc;">Acesso principal camuflado</div>
                            </div>
                        </div>
                        
                        <div class="batcave-image-card" onclick="batcaveOpenModal('https://images.unsplash.com/photo-1518709268805-4e9042af2176?auto=format&fit=crop&w=800')" style="border-radius: 10px; overflow: hidden; position: relative; height: 150px; cursor: pointer; transition: transform 0.3s ease;">
                            <img src="https://images.unsplash.com/photo-1518709268805-4e9042af2176?auto=format&fit=crop&w=400" alt="Sala de Controle" style="width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); padding: 10px; transform: translateY(100%); transition: transform 0.3s ease;">
                                <div style="font-size: 0.9rem; color: #00ff88; margin-bottom: 3px; font-weight: bold;">Sala de Controle</div>
                                <div style="font-size: 0.7rem; color: #cccccc;">Centro de operações</div>
                            </div>
                        </div>
                        
                        <div class="batcave-image-card" onclick="batcaveOpenModal('https://images.unsplash.com/photo-1578662996442-48f60103fc96?auto=format&fit=crop&w=800')" style="border-radius: 10px; overflow: hidden; position: relative; height: 150px; cursor: pointer; transition: transform 0.3s ease;">
                            <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?auto=format&fit=crop&w=400" alt="Laboratório" style="width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); padding: 10px; transform: translateY(100%); transition: transform 0.3s ease;">
                                <div style="font-size: 0.9rem; color: #00ff88; margin-bottom: 3px; font-weight: bold;">Laboratório</div>
                                <div style="font-size: 0.7rem; color: #cccccc;">Análise e desenvolvimento</div>
                            </div>
                        </div>
                        
                        <div class="batcave-image-card" onclick="batcaveOpenModal('https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=800')" style="border-radius: 10px; overflow: hidden; position: relative; height: 150px; cursor: pointer; transition: transform 0.3s ease;">
                            <img src="https://images.unsplash.com/photo-1511512578047-dfb367046420?auto=format&fit=crop&w=400" alt="Garagem" style="width: 100%; height: 100%; object-fit: cover;">
                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); padding: 10px; transform: translateY(100%); transition: transform 0.3s ease;">
                                <div style="font-size: 0.9rem; color: #00ff88; margin-bottom: 3px; font-weight: bold;">Garagem</div>
                                <div style="font-size: 0.7rem; color: #cccccc;">Frota especializada</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div style="text-align: center; padding: 20px; margin-top: 30px; border-top: 1px solid #333; color: #cccccc; font-size: 0.9rem;">
                    <div>BATCAVE CONTROL SYSTEM v3.2.1 | © Wayne Enterprises</div>
                    <div style="display: inline-flex; align-items: center; gap: 8px; background: rgba(0, 255, 136, 0.1); padding: 8px 16px; border-radius: 20px; margin-top: 10px; border: 1px solid #00ff88;">
                        <span>🔐</span>
                        <span>IDENTIFICADO: Bruce Wayne | ACESSO: #BAT-ALPHA-7</span>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.8rem;">Todos os sistemas operacionais | Última manutenção: 24 horas atrás</div>
                </div>

                <!-- Modal for Images -->
                <div id="batcaveImageModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 10000; justify-content: center; align-items: center;">
                    <button onclick="batcaveCloseModal()" style="position: absolute; top: 20px; right: 20px; background: rgba(0, 0, 0, 0.7); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center;">×</button>
                    <div style="max-width: 90%; max-height: 90%; border-radius: 10px; overflow: hidden;">
                        <img id="batcaveModalImage" src="" alt="" style="width: 100%; height: auto; display: block;">
                    </div>
                </div>
            </div>

            <style>
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.5; }
                }

                @keyframes shine {
                    0% { left: -100%; }
                    100% { left: 100%; }
                }

                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }

                .batcave-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 30px rgba(0, 255, 136, 0.1);
                    border-color: #00ff88;
                }

                .batcave-image-card:hover {
                    transform: scale(1.05);
                }

                .batcave-image-card:hover > div {
                    transform: translateY(0);
                }

                .batcave-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
                }

                .batcave-btn-secondary:hover {
                    border-color: #00ff88;
                    color: #00ff88;
                }

                .fade-in {
                    animation: fadeIn 0.6s ease-out forwards;
                }

                @media (max-width: 768px) {
                    .grid {
                        grid-template-columns: 1fr !important;
                    }
                    
                    .image-gallery {
                        grid-template-columns: 1fr !important;
                    }
                    
                    .status-bar {
                        flex-direction: column;
                        align-items: flex-start;
                    }
                }
            </style>
        </div>
    `
            },
            'command': {
                title: '🦇 CENTRAL DE COMANDO WAYNE ENTERPRISES - DASHBOARD',
                content: `
        <div style="width: 100%; max-width: 100%; overflow-x: hidden; font-family: 'Segoe UI', Arial, sans-serif;">
            <!-- Cabeçalho -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid rgba(0, 150, 255, 0.3); margin-bottom: 20px;">
                <div class="logo" style="display: flex; align-items: center; gap: 15px;">
                    <div class="logo-img" style="width: 50px; height: 50px; background: radial-gradient(circle, #0066cc, #001133); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid #00aaff;">
                        <i class="fas fa-bat" style="font-size: 20px; color: #00ccff;"></i>
                    </div>
                    <div class="logo-text">
                        <div style="font-size: 18px; color: #00aaff; letter-spacing: 1px; font-weight: bold;">WAYNE ENTERPRISES</div>
                        <div style="font-size: 11px; color: #88aadd; letter-spacing: 2px;">SECURITY DIVISION</div>
                    </div>
                </div>
                <div class="user-info" style="display: flex; align-items: center; gap: 15px; background: rgba(0, 30, 60, 0.7); padding: 8px 15px; border-radius: 8px; border: 1px solid rgba(0, 100, 200, 0.5);">
                    <div class="avatar" style="width: 35px; height: 35px; border-radius: 50%; background: linear-gradient(135deg, #0066cc, #0099ff); display: flex; align-items: center; justify-content: center; font-weight: bold; color: white;">BW</div>
                    <div class="user-details">
                        <div style="font-weight: bold; color: #00ccff; font-size: 12px;">BRUCE WAYNE</div>
                        <div style="font-size: 10px; color: #88aadd;">NÍVEL 10 - ACESSO TOTAL</div>
                    </div>
                </div>
            </div>

            <!-- Título Principal -->
            <div class="main-title" style="text-align: center; margin-bottom: 25px; position: relative;">
                <div style="font-size: 24px; color: #00aaff; text-transform: uppercase; letter-spacing: 2px; text-shadow: 0 0 10px rgba(0, 150, 255, 0.7); position: relative; display: inline-block; padding-bottom: 8px;">
                    CENTRAL DE COMANDO BATMAN
                    <div style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 150px; height: 2px; background: linear-gradient(90deg, transparent, #00aaff, transparent);"></div>
                </div>
            </div>

            <!-- Grid de Cards -->
            <div class="command-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 25px;">
                <!-- Card de Status do Sistema -->
                <div class="command-card" style="background: rgba(10, 20, 40, 0.8); border-radius: 10px; padding: 20px; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); position: relative; overflow: hidden; transition: all 0.3s ease;">
                    <div class="command-card::before" style="content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: linear-gradient(to bottom, #0066cc, #0099ff);"></div>
                    <div class="card-header" style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                        <div class="card-icon" style="width: 45px; height: 45px; background: rgba(0, 100, 200, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #00aaff;">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="card-title">
                            <div style="font-size: 16px; color: #00ccff; margin-bottom: 3px; font-weight: bold;">STATUS DO SISTEMA</div>
                            <div style="font-size: 11px; color: #88aadd;">Monitoramento em tempo real</div>
                        </div>
                    </div>
                    <div class="card-content" style="margin-bottom: 15px; line-height: 1.5; color: #c0d0e0; font-size: 13px;">
                        Hub central de controle do sistema Batman. Todas as unidades estão operando dentro dos parâmetros normais.
                    </div>
                    <div class="modal-data-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 20px 0;">
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Conexões</div>
                            <div class="data-value command-connections" style="font-size: 18px; font-weight: bold; color: #00ffaa; animation: pulse 2s infinite;">24</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Status</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ff00;">ONLINE</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Latência</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ffaa;">8ms</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Acesso</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ffaa;">LEVEL 10</div>
                        </div>
                    </div>
                    <div class="modal-status" style="background: rgba(0, 40, 80, 0.7); border-radius: 6px; padding: 15px; border-left: 3px solid #00aaff; margin-top: 15px;">
                        <div class="modal-status-title" style="font-size: 14px; font-weight: bold; color: #00ccff; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">COMUNICAÇÕES</div>
                        <p style="color: #c0d0e0; font-size: 12px; line-height: 1.4;">Todas as frequências estão operacionais e seguras. Sistema criptografado com protocolo Bat-Signal.</p>
                    </div>
                </div>

                <!-- Card de Monitoramento de Gotham -->
                <div class="command-card" style="background: rgba(10, 20, 40, 0.8); border-radius: 10px; padding: 20px; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); position: relative; overflow: hidden; transition: all 0.3s ease;">
                    <div class="command-card::before" style="content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: linear-gradient(to bottom, #0066cc, #0099ff);"></div>
                    <div class="card-header" style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                        <div class="card-icon" style="width: 45px; height: 45px; background: rgba(0, 100, 200, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #00aaff;">
                            <i class="fas fa-city"></i>
                        </div>
                        <div class="card-title">
                            <div style="font-size: 16px; color: #00ccff; margin-bottom: 3px; font-weight: bold;">MONITORAMENTO GOTHAM</div>
                            <div style="font-size: 11px; color: #88aadd;">Cobertura total da cidade</div>
                        </div>
                    </div>
                    <div class="card-content" style="margin-bottom: 15px; line-height: 1.5; color: #c0d0e0; font-size: 13px;">
                        Rede de vigilância com 1,247 câmeras ativas. Sistema de reconhecimento facial e análise de padrões em operação.
                    </div>
                    <div class="card-stats" style="display: flex; justify-content: space-between; background: rgba(0, 30, 60, 0.5); border-radius: 6px; padding: 12px; border: 1px solid rgba(0, 100, 200, 0.2);">
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" style="font-size: 20px; font-weight: bold; color: #00ffaa; margin-bottom: 3px;">1,247</div>
                            <div class="stat-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px;">Câmeras</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" style="font-size: 20px; font-weight: bold; color: #00ffaa; margin-bottom: 3px;">98.7%</div>
                            <div class="stat-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px;">Cobertura</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div class="stat-value" style="font-size: 20px; font-weight: bold; color: #ff4444; margin-bottom: 3px;">12</div>
                            <div class="stat-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px;">Alertas</div>
                        </div>
                    </div>
                    <div class="modal-status" style="background: rgba(0, 40, 80, 0.7); border-radius: 6px; padding: 15px; border-left: 3px solid #00aaff; margin-top: 15px;">
                        <div class="modal-status-title" style="font-size: 14px; font-weight: bold; color: #00ccff; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">ATIVIDADES RECENTES</div>
                        <p style="color: #c0d0e0; font-size: 12px; line-height: 1.4;">4 incidentes registrados nas últimas 24h. Todos monitorados e sob controle.</p>
                    </div>
                </div>

                <!-- Card de Veículos e Equipamentos -->
                <div class="command-card" style="background: rgba(10, 20, 40, 0.8); border-radius: 10px; padding: 20px; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3); position: relative; overflow: hidden; transition: all 0.3s ease;">
                    <div class="command-card::before" style="content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: linear-gradient(to bottom, #0066cc, #0099ff);"></div>
                    <div class="card-header" style="display: flex; align-items: center; margin-bottom: 15px; gap: 12px;">
                        <div class="card-icon" style="width: 45px; height: 45px; background: rgba(0, 100, 200, 0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #00aaff;">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="card-title">
                            <div style="font-size: 16px; color: #00ccff; margin-bottom: 3px; font-weight: bold;">VEÍCULOS & EQUIPAMENTOS</div>
                            <div style="font-size: 11px; color: #88aadd;">Frota e equipamentos táticos</div>
                        </div>
                    </div>
                    <div class="card-content" style="margin-bottom: 15px; line-height: 1.5; color: #c0d0e0; font-size: 13px;">
                        Status completo da frota e equipamentos do Batman. Todos os sistemas estão funcionais e prontos para deploy.
                    </div>
                    <div class="modal-data-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 20px 0;">
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Batmóvel</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ff00;">PRONTO</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Batwing</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #ffff00;">MANUTENÇÃO</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Batsuit</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ffaa;">100%</div>
                        </div>
                        <div class="data-item" style="background: rgba(0, 30, 60, 0.6); border-radius: 6px; padding: 12px; text-align: center; border: 1px solid rgba(0, 100, 200, 0.2);">
                            <div class="data-label" style="font-size: 10px; color: #88aadd; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px;">Batarangs</div>
                            <div class="data-value" style="font-size: 18px; font-weight: bold; color: #00ffaa;">48</div>
                        </div>
                    </div>
                    <div class="modal-status" style="background: rgba(0, 40, 80, 0.7); border-radius: 6px; padding: 15px; border-left: 3px solid #00aaff; margin-top: 15px;">
                        <div class="modal-status-title" style="font-size: 14px; font-weight: bold; color: #00ccff; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">STATUS DA MISSÃO</div>
                        <p style="color: #c0d0e0; font-size: 12px; line-height: 1.4;">Todos os equipamentos primários estão operacionais. Batwing em manutenção programada.</p>
                    </div>
                </div>
            </div>

            <!-- Grid de Recursos -->
            <div style="margin-top: 25px;">
                <div style="font-size: 18px; color: #00aaff; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; text-align: center; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 150, 255, 0.3);">RECURSOS DO SISTEMA</div>
                <div class="images-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                    <!-- Recurso 1 -->
                    <div class="image-card" style="border-radius: 8px; overflow: hidden; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); transition: all 0.3s ease;">
                        <div class="image-placeholder" style="height: 100px; background: linear-gradient(135deg, #001133, #003366); display: flex; align-items: center; justify-content: center; color: #00aaff; font-size: 32px;">
                            <i class="fas fa-satellite-dish"></i>
                        </div>
                        <div class="image-info" style="padding: 12px; background: rgba(10, 20, 40, 0.8);">
                            <div style="color: #00ccff; margin-bottom: 8px; font-size: 14px; font-weight: bold;">SATÉLITE DE VIGILÂNCIA</div>
                            <div style="font-size: 11px; color: #a0b0c0; line-height: 1.4;">Satélite WayneTech com capacidade de imageamento de alta resolução.</div>
                        </div>
                    </div>

                    <!-- Recurso 2 -->
                    <div class="image-card" style="border-radius: 8px; overflow: hidden; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); transition: all 0.3s ease;">
                        <div class="image-placeholder" style="height: 100px; background: linear-gradient(135deg, #001133, #003366); display: flex; align-items: center; justify-content: center; color: #00aaff; font-size: 32px;">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="image-info" style="padding: 12px; background: rgba(10, 20, 40, 0.8);">
                            <div style="color: #00ccff; margin-bottom: 8px; font-size: 14px; font-weight: bold;">INTELIGÊNCIA ARTIFICIAL</div>
                            <div style="font-size: 11px; color: #a0b0c0; line-height: 1.4;">Sistema Oracle de análise preditiva e reconhecimento de padrões.</div>
                        </div>
                    </div>

                    <!-- Recurso 3 -->
                    <div class="image-card" style="border-radius: 8px; overflow: hidden; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); transition: all 0.3s ease;">
                        <div class="image-placeholder" style="height: 100px; background: linear-gradient(135deg, #001133, #003366); display: flex; align-items: center; justify-content: center; color: #00aaff; font-size: 32px;">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="image-info" style="padding: 12px; background: rgba(10, 20, 40, 0.8);">
                            <div style="color: #00ccff; margin-bottom: 8px; font-size: 14px; font-weight: bold;">PROTEÇÃO CIBERNÉTICA</div>
                            <div style="font-size: 11px; color: #a0b0c0; line-height: 1.4;">Firewall com criptografia quântica para proteger dados sensíveis.</div>
                        </div>
                    </div>

                    <!-- Recurso 4 -->
                    <div class="image-card" style="border-radius: 8px; overflow: hidden; border: 1px solid rgba(0, 100, 200, 0.3); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); transition: all 0.3s ease;">
                        <div class="image-placeholder" style="height: 100px; background: linear-gradient(135deg, #001133, #003366); display: flex; align-items: center; justify-content: center; color: #00aaff; font-size: 32px;">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <div class="image-info" style="padding: 12px; background: rgba(10, 20, 40, 0.8);">
                            <div style="color: #00ccff; margin-bottom: 8px; font-size: 14px; font-weight: bold;">MAPEAMENTO 3D</div>
                            <div style="font-size: 11px; color: #a0b0c0; line-height: 1.4;">Modelo tridimensional de Gotham com atualização em tempo real.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Barra de Status -->
            <div class="status-bar" style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 20, 40, 0.8); border-radius: 8px; padding: 12px 20px; margin-top: 20px; border: 1px solid rgba(0, 100, 200, 0.3);">
                <div class="status-item" style="display: flex; align-items: center; gap: 8px;">
                    <div class="status-indicator" style="width: 10px; height: 10px; border-radius: 50%; background: #00ff00; box-shadow: 0 0 8px #00ff00;"></div>
                    <div class="status-text" style="color: #88dd88; font-weight: bold; font-size: 11px;">SISTEMA: ONLINE</div>
                </div>
                <div class="status-item" style="display: flex; align-items: center; gap: 8px;">
                    <div class="status-indicator" style="width: 10px; height: 10px; border-radius: 50%; background: #00ff00; box-shadow: 0 0 8px #00ff00;"></div>
                    <div class="status-text" style="color: #88dd88; font-weight: bold; font-size: 11px;">VIGILÂNCIA: ATIVA</div>
                </div>
                <div class="status-item" style="display: flex; align-items: center; gap: 8px;">
                    <div class="status-indicator" style="width: 10px; height: 10px; border-radius: 50%; background: #00ff00; box-shadow: 0 0 8px #00ff00;"></div>
                    <div class="status-text" style="color: #88dd88; font-weight: bold; font-size: 11px;">COMUNICAÇÕES: SEGURAS</div>
                </div>
                <div class="status-item" style="display: flex; align-items: center; gap: 8px;">
                    <div class="status-indicator offline" style="width: 10px; height: 10px; border-radius: 50%; background: #ff3333; box-shadow: 0 0 8px #ff3333;"></div>
                    <div class="status-text offline" style="color: #ff6666; font-weight: bold; font-size: 11px;">MODO BATMAN: OFFLINE</div>
                </div>
            </div>

            <!-- Rodapé -->
            <div class="footer" style="text-align: center; margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(0, 100, 200, 0.2); color: #6688aa; font-size: 11px;">
                <div>SISTEMA DE COMANDO WAYNE ENTERPRISES © 2023 | CLASSIFICADO: NÍVEL 10 - ACESSO RESTRITO</div>
                <div style="margin-top: 5px;">Protocolo Bat-Signal: Ativo | Última atualização: <span id="commandCurrentTime">${new Date().toLocaleTimeString()}</span></div>
            </div>

            <style>
                @keyframes pulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.7; }
                }
                
                .command-card:hover {
                    transform: translateY(-5px);
                    border-color: #00aaff;
                    box-shadow: 0 12px 24px rgba(0, 100, 255, 0.2);
                }
                
                .image-card:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 8px 16px rgba(0, 100, 255, 0.2);
                }
                
                @media (max-width: 768px) {
                    .command-grid {
                        grid-template-columns: 1fr !important;
                    }
                    
                    .images-grid {
                        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)) !important;
                    }
                    
                    .status-bar {
                        flex-wrap: wrap;
                        gap: 10px;
                    }
                    
                    .status-item {
                        flex: 1;
                        min-width: 45%;
                    }
                }
            </style>
        </div>
    `
            },
            'surveillance': {
                title: '🦇 SISTEMA DE VIGILÂNCIA GOTHAM - DASHBOARD',
                content: `
        <div style="width: 100%; max-width: 100%; overflow-x: hidden;">
            <!-- Cabeçalho -->
            <div style="text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(0, 217, 255, 0.3);">
                <div style="color: #00d9ff; font-size: 1.8rem; letter-spacing: 2px; margin-bottom: 5px; text-shadow: 0 0 15px rgba(0, 217, 255, 0.5); font-family: 'Courier New', monospace;">SISTEMA DE VIGILÂNCIA GOTHAM</div>
                <div style="color: #88ffff; font-size: 0.9rem; opacity: 0.9; font-family: 'Courier New', monospace;">Monitoramento Ativo da Cidade • Controle de Segurança 24/7</div>
            </div>

            <!-- Status Geral -->
            <div style="background: rgba(10, 20, 40, 0.8); border: 1px solid #00d9ff; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);">
                <div style="color: #00d9ff; font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 217, 255, 0.3); text-transform: uppercase; letter-spacing: 1px; font-family: 'Courier New', monospace;">DADOS DE VIGILÂNCIA</div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <div style="background: rgba(0, 30, 60, 0.5); border-radius: 8px; padding: 15px; border-left: 4px solid #00d9ff;">
                        <div style="color: #88ffff; font-size: 0.8rem; margin-bottom: 5px; opacity: 0.8; font-family: 'Courier New', monospace;">SISTEMA</div>
                        <div style="color: #00ff88; font-size: 1.2rem; font-weight: bold; animation: surveillancePulse 2s infinite; font-family: 'Courier New', monospace;">OPERACIONAL</div>
                    </div>
                    <div style="background: rgba(0, 30, 60, 0.5); border-radius: 8px; padding: 15px; border-left: 4px solid #00d9ff;">
                        <div style="color: #88ffff; font-size: 0.8rem; margin-bottom: 5px; opacity: 0.8; font-family: 'Courier New', monospace;">COBERTURA TOTAL</div>
                        <div style="color: #00ff88; font-size: 1.2rem; font-weight: bold; font-family: 'Courier New', monospace;">92%</div>
                    </div>
                    <div style="background: rgba(0, 30, 60, 0.5); border-radius: 8px; padding: 15px; border-left: 4px solid #00d9ff;">
                        <div style="color: #88ffff; font-size: 0.8rem; margin-bottom: 5px; opacity: 0.8; font-family: 'Courier New', monospace;">CÂMERAS ATIVAS</div>
                        <div style="color: #00ff88; font-size: 1.2rem; font-weight: bold; font-family: 'Courier New', monospace;">147</div>
                    </div>
                    <div style="background: rgba(0, 30, 60, 0.5); border-radius: 8px; padding: 15px; border-left: 4px solid #00d9ff;">
                        <div style="color: #88ffff; font-size: 0.8rem; margin-bottom: 5px; opacity: 0.8; font-family: 'Courier New', monospace;">ALERTAS ATIVOS</div>
                        <div style="color: #ff0040; font-size: 1.2rem; font-weight: bold; font-family: 'Courier New', monospace;">3</div>
                    </div>
                </div>
            </div>

            <!-- Layout Principal - Grid de Câmeras -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <!-- Câmeras -->
                <div style="background: rgba(10, 20, 40, 0.8); border: 1px solid #00d9ff; border-radius: 10px; padding: 20px; box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);">
                    <div style="color: #00d9ff; font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 217, 255, 0.3); text-transform: uppercase; letter-spacing: 1px; font-family: 'Courier New', monospace;">CÂMERAS DE SEGURANÇA</div>
                    <div id="surveillanceCamerasGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 10px;">
                        <!-- As câmeras serão carregadas via JavaScript -->
                    </div>
                </div>

                <!-- Cobertura por Setores -->
                <div style="background: rgba(10, 20, 40, 0.8); border: 1px solid #00d9ff; border-radius: 10px; padding: 20px; box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);">
                    <div style="color: #00d9ff; font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 217, 255, 0.3); text-transform: uppercase; letter-spacing: 1px; font-family: 'Courier New', monospace;">COBERTURA POR SETORES</div>
                    <div id="coverageList" style="margin-top: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 30, 60, 0.5); padding: 10px 15px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #00ff88;">
                            <span style="color: #e0e0ff; font-size: 0.9rem; font-family: 'Courier New', monospace;">Setor A (Centro Financeiro)</span>
                            <span style="color: #00ff88; font-weight: bold; font-family: 'Courier New', monospace;">100%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 30, 60, 0.5); padding: 10px 15px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #ffaa00;">
                            <span style="color: #e0e0ff; font-size: 0.9rem; font-family: 'Courier New', monospace;">Setor B (Área Industrial)</span>
                            <span style="color: #ffaa00; font-weight: bold; font-family: 'Courier New', monospace;">85%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 30, 60, 0.5); padding: 10px 15px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #ffaa00;">
                            <span style="color: #e0e0ff; font-size: 0.9rem; font-family: 'Courier New', monospace;">Setor C (Distrito Comercial)</span>
                            <span style="color: #00ff88; font-weight: bold; font-family: 'Courier New', monospace;">92%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0, 30, 60, 0.5); padding: 10px 15px; border-radius: 6px; margin-bottom: 8px; border-left: 3px solid #00ff88;">
                            <span style="color: #e0e0ff; font-size: 0.9rem; font-family: 'Courier New', monospace;">Setor D (Residencial Alto)</span>
                            <span style="color: #00ff88; font-weight: bold; font-family: 'Courier New', monospace;">100%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Painel de Controle -->
            <div style="background: rgba(10, 20, 40, 0.8); border: 1px solid #00d9ff; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);">
                <div style="color: #00d9ff; font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 217, 255, 0.3); text-transform: uppercase; letter-spacing: 1px; font-family: 'Courier New', monospace;">CONTROLES DO SISTEMA</div>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; margin-top: 10px;">
                    <button class="surveillance-control-btn active" onclick="toggleSurveillanceSystem('analise_facial')" id="btnAnaliseFacial">
                        <div style="font-size: 1.5rem;">👁️</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Análise Facial</div>
                    </button>
                    <button class="surveillance-control-btn active" onclick="toggleSurveillanceSystem('rastreamento')" id="btnRastreamento">
                        <div style="font-size: 1.5rem;">🚗</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Rastreamento Veicular</div>
                    </button>
                    <button class="surveillance-control-btn" onclick="toggleSurveillanceSystem('termico')" id="btnTermico">
                        <div style="font-size: 1.5rem;">🔥</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Visão Térmica</div>
                    </button>
                    <button class="surveillance-control-btn active" onclick="toggleSurveillanceSystem('notificacoes')" id="btnNotificacoes">
                        <div style="font-size: 1.5rem;">🔔</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Alertas Automáticos</div>
                    </button>
                    <button class="surveillance-control-btn" onclick="toggleSurveillanceSystem('gravacao')" id="btnGravacao">
                        <div style="font-size: 1.5rem;">🎥</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Gravação Contínua</div>
                    </button>
                    <button class="surveillance-control-btn active" onclick="toggleSurveillanceSystem('analise')" id="btnAnalise">
                        <div style="font-size: 1.5rem;">🧠</div>
                        <div style="font-size: 0.8rem; margin-top: 5px;">Análise de Padrões</div>
                    </button>
                </div>
            </div>

            <!-- Logs -->
            <div style="background: rgba(10, 20, 40, 0.8); border: 1px solid #00d9ff; border-radius: 10px; padding: 20px; box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);">
                <div style="color: #00d9ff; font-size: 1.2rem; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid rgba(0, 217, 255, 0.3); text-transform: uppercase; letter-spacing: 1px; font-family: 'Courier New', monospace;">LOGS DO SISTEMA</div>
                <div id="surveillanceLogs" style="background: rgba(0, 0, 0, 0.4); border-radius: 6px; padding: 15px; margin-top: 10px; max-height: 200px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.8rem;">
                    > ${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}: Sistema de vigilância inicializado<br>
                    > Aguardando conexão com as câmeras...
                </div>
            </div>

            <style>
                @keyframes surveillancePulse {
                    0%, 100% { opacity: 1; }
                    50% { opacity: 0.7; }
                }
                
                .camera-card-surveillance {
                    background: rgba(0, 30, 60, 0.6);
                    border-radius: 8px;
                    overflow: hidden;
                    border: 1px solid rgba(0, 217, 255, 0.3);
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    cursor: pointer;
                }
                
                .camera-card-surveillance:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 20px rgba(0, 217, 255, 0.3);
                    border-color: #00d9ff;
                }
                
                .camera-status-surveillance {
                    display: inline-block;
                    padding: 4px 10px;
                    border-radius: 4px;
                    font-size: 0.7rem;
                    font-weight: bold;
                    margin-top: 8px;
                    font-family: 'Courier New', monospace;
                }
                
                .status-active-surveillance {
                    background: rgba(0, 255, 136, 0.2);
                    color: #00ff88;
                    border: 1px solid #00ff88;
                }
                
                .status-warning-surveillance {
                    background: rgba(255, 170, 0, 0.2);
                    color: #ffaa00;
                    border: 1px solid #ffaa00;
                }
                
                .status-inactive-surveillance {
                    background: rgba(255, 0, 64, 0.2);
                    color: #ff0040;
                    border: 1px solid #ff0040;
                }
                
                .surveillance-control-btn {
                    background: rgba(0, 217, 255, 0.1);
                    border: 1px solid #00d9ff;
                    color: #00d9ff;
                    padding: 15px 10px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                    font-size: 0.8rem;
                    text-align: center;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    min-height: 80px;
                }
                
                .surveillance-control-btn:hover {
                    background: rgba(0, 217, 255, 0.2);
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0, 217, 255, 0.2);
                }
                
                .surveillance-control-btn.active {
                    background: rgba(0, 217, 255, 0.3);
                    box-shadow: 0 0 15px rgba(0, 217, 255, 0.5);
                    border-color: #fff;
                }
                
                @media (max-width: 768px) {
                    .grid-layout {
                        grid-template-columns: 1fr !important;
                    }
                }
            </style>
        </div>
    `
            },
            'weapons': {
                title: '🛡️ ARSENAL BATMAN - SISTEMA v5.0',
                content: `
                    <div class="equipment-tracking-system">
                        <p style="margin-bottom:15px; font-size:12px; color:#888; font-family:'Courier New', monospace;">
                            PROTOCOLO: CAVALEIRO DAS TREVAS | SINCRONIZAÇÃO: ${new Date().toLocaleTimeString('pt-BR')}
                        </p>
                        
                        <input type="text" class="equipment-search" id="equipmentSearch" 
                               placeholder="🔍 Buscar equipamento..." onkeyup="filterEquipment()">
                        
                        <div class="equipment-grid" id="equipmentGrid"></div>
                        
                        <div class="tactical-combos">
                            <div class="modal-section-title">⚡ COMBINAÇÕES TÁTICAS</div>
                            <div class="combo-item">Batarang + Bomba Fumaça = Ataque Furtivo</div>
                            <div class="combo-item">Gancho + Visão Detetive = Reconhecimento Aéreo</div>
                            <div class="combo-item">Gel Explosivo + Disruptor = Desarme Seguro</div>
                        </div>
                        
                        <div class="diagnostic-panel">
                            <div class="modal-status-title">🧠 DIAGNÓSTICO DO SISTEMA</div>
                            <div id="equipmentDiagnostic" class="diagnostic-output">
                                > SISTEMA DE ARSENAL ONLINE<br>
                                > AGUARDANDO SELEÇÃO DE EQUIPAMENTO<br>
                                > STATUS GERAL: OPERACIONAL
                            </div>
                        </div>
                        
                        <div style="display:flex; justify-content:space-between; margin-top:15px; font-size:10px;">
                            <div><span>BATIMENTOS:</span> <span class="status-ok">72 BPM</span></div>
                            <div><span>COMUNICAÇÃO:</span> <span class="status-ok">ONLINE</span></div>
                            <div><span>ADRENALINA:</span> <span class="status-warn">45%</span></div>
                        </div>
                    </div>
                `
            },
            'vehicle': {
                title: '🚗 CONTROLE DE VEÍCULOS TÁTICOS',
                content: `
        <div class="vehicle-control-panel">
            <!-- Status do Batmóvel -->
            <div class="vehicle-status-grid">
                <div class="status-item">
                    <div class="status-label">VELOCIDADE</div>
                    <div class="status-value" id="batmobileSpeed">0 km/h</div>
                </div>
                <div class="status-item">
                    <div class="status-label">COMBUSTÍVEL</div>
                    <div class="status-value" id="batmobileFuel">100%</div>
                </div>
                <div class="status-item">
                    <div class="status-label">SISTEMAS</div>
                    <div class="status-value" id="batmobileSystems">ONLINE</div>
                </div>
                <div class="status-item">
                    <div class="status-label">DESTINO</div>
                    <div class="status-value" id="batmobileDestination">NENHUM</div>
                </div>
            </div>

            <!-- Controles -->
            <div class="vehicle-controls">
                <button class="control-btn" onclick="controlBatmobile('start')">
                    <i class="fas fa-play"></i> LIGAR
                </button>
                <button class="control-btn" onclick="controlBatmobile('stop')">
                    <i class="fas fa-stop"></i> PARAR
                </button>
                <button class="control-btn" onclick="controlBatmobile('turbo')">
                    <i class="fas fa-bolt"></i> TURBO
                </button>
                <button class="control-btn" onclick="controlBatmobile('camouflage')">
                    <i class="fas fa-eye-slash"></i> CAMUFLAGEM
                </button>
            </div>

            <!-- Navegação -->
            <div class="navigation-map">
                <div style="color: #00d9ff; font-size: 14px; margin-bottom: 10px;">NAVEGAÇÃO</div>
                <input type="text" class="route-input" id="routeInput" placeholder="Digite o destino...">
                <button class="route-btn" onclick="setDestination()">DEFINIR ROTA</button>
            </div>

            <!-- Log do Sistema -->
            <div class="system-log">
                <div style="color: #00d9ff; font-size: 14px; margin-bottom: 10px;">LOG DO SISTEMA</div>
                <div class="log-content" id="batmobileLog">
                    > Batmóvel: Sistemas online<br>
                    > Aguardando comandos...
                </div>
            </div>
        </div>
    `
            },
            'database': {
                title: '🚨 MISSÃO ATIVA - DADOS EM TEMPO REAL',
                content: `
        <div class="mission-live-data" style="width: 100%;">
            <!-- Cabeçalho da Missão -->
            <div style="background: rgba(0, 30, 60, 0.8); border-left: 4px solid #00d9ff; padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <div style="width: 40px; height: 40px; background: rgba(0, 217, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #00d9ff;">🦇</div>
                    <div>
                        <div style="font-size: 16px; color: #00d9ff; font-weight: bold;">MISSÃO: OPERAÇÃO SOMBRAS</div>
                        <div style="font-size: 11px; color: #88ffff; font-family: 'Courier New', monospace;">STATUS: EM ANDAMENTO | PRIORIDADE: ALTA</div>
                    </div>
                </div>
                <div style="font-size: 12px; color: #c0d0e0; line-height: 1.4;">
                    Monitoramento de atividade criminosa no distrito industrial. Suspeita de operação de contrabando liderada pelo Pinguim.
                </div>
            </div>

            <!-- Dados em Tempo Real -->
            <div class="modal-data-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 20px;">
                <div class="data-item" style="text-align: center;">
                    <div class="data-label">LOCALIZAÇÃO</div>
                    <div class="data-value" style="color: #00d9ff;">ÁREA INDUSTRIAL</div>
                </div>
                <div class="data-item" style="text-align: center;">
                    <div class="data-label">HORA INÍCIO</div>
                    <div class="data-value" style="color: #00ff88;">22:30</div>
                </div>
                <div class="data-item" style="text-align: center;">
                    <div class="data-label">DURAÇÃO</div>
                    <div class="data-value" id="missionDuration" style="color: #ffaa00;">01:45</div>
                </div>
                <div class="data-item" style="text-align: center;">
                    <div class="data-label">RISCO</div>
                    <div class="data-value" style="color: #ff0040;">ALTO</div>
                </div>
            </div>

            <!-- Status do Batman -->
            <div style="background: rgba(0, 20, 40, 0.7); border-radius: 8px; padding: 15px; margin-bottom: 20px; border: 1px solid rgba(0, 217, 255, 0.3);">
                <div class="modal-section-title" style="margin-top: 0;">👤 STATUS DO CAVALEIRO DAS TREVAS</div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <div>
                        <div style="font-size: 11px; color: #88aadd; margin-bottom: 5px;">SAÚDE</div>
                        <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                            <div id="batmanHealth" style="height: 100%; background: #00ff88; border-radius: 3px; width: 94%;"></div>
                        </div>
                        <div style="text-align: right; font-size: 10px; color: #00ff88; margin-top: 2px;">94%</div>
                    </div>
                    <div>
                        <div style="font-size: 11px; color: #88aadd; margin-bottom: 5px;">ARMADURA</div>
                        <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                            <div id="batmanArmor" style="height: 100%; background: #00d9ff; border-radius: 3px; width: 87%;"></div>
                        </div>
                        <div style="text-align: right; font-size: 10px; color: #00d9ff; margin-top: 2px;">87%</div>
                    </div>
                    <div>
                        <div style="font-size: 11px; color: #88aadd; margin-bottom: 5px;">EQUIPAMENTOS</div>
                        <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                            <div id="batmanEquipment" style="height: 100%; background: #ffaa00; border-radius: 3px; width: 78%;"></div>
                        </div>
                        <div style="text-align: right; font-size: 10px; color: #ffaa00; margin-top: 2px;">78%</div>
                    </div>
                    <div>
                        <div style="font-size: 11px; color: #88aadd; margin-bottom: 5px;">TEMPO RESTANTE</div>
                        <div style="height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 3px; overflow: hidden;">
                            <div id="missionTimeLeft" style="height: 100%; background: #bb86fc; border-radius: 3px; width: 65%;"></div>
                        </div>
                        <div style="text-align: right; font-size: 10px; color: #bb86fc; margin-top: 2px;">65%</div>
                    </div>
                </div>
            </div>

            <!-- Feed de Eventos -->
            <div style="background: rgba(0, 10, 20, 0.8); border-radius: 8px; padding: 15px; border: 1px solid rgba(0, 217, 255, 0.3);">
                <div class="modal-section-title" style="margin-top: 0; display: flex; justify-content: space-between; align-items: center;">
                    <span>📡 FEED DE EVENTOS DA MISSÃO</span>
                    <span style="font-size: 10px; color: #00ff88; font-family: 'Courier New', monospace;">LIVE</span>
                </div>
                <div id="missionEventFeed" style="max-height: 200px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 11px; line-height: 1.4;">
                    <div style="color: #00ff88; padding: 5px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: #00d9ff;">[23:15]</span> Chegada ao local confirmada
                    </div>
                    <div style="color: #ffaa00; padding: 5px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: #00d9ff;">[23:22]</span> Suspeitos identificados: 5 indivíduos armados
                    </div>
                    <div style="color: #ffffff; padding: 5px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: #00d9ff;">[23:30]</span> Infiltração silenciosa em andamento
                    </div>
                    <div style="color: #00ff88; padding: 5px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: #00d9ff;">[23:45]</span> Câmeras desativadas com sucesso
                    </div>
                    <div style="color: #ffaa00; padding: 5px 0;">
                        <span style="color: #00d9ff;">[23:52]</span> Evidências coletadas: Contêineres suspeitos
                    </div>
                </div>
                <div style="margin-top: 10px; display: flex; gap: 10px;">
                    <button class="export-btn" onclick="addMissionEvent()" style="padding: 6px 12px; font-size: 10px;">➕ NOVO EVENTO</button>
                    <button class="export-btn" onclick="clearMissionEvents()" style="padding: 6px 12px; font-size: 10px;">🗑️ LIMPAR</button>
                </div>
            </div>

            <!-- Sistema de Apoio -->
            <div class="modal-status" style="margin-top: 15px;">
                <div class="modal-status-title">🔄 SISTEMA DE APOIO EM TEMPO REAL</div>
                <div style="display: flex; justify-content: space-between; font-size: 11px; margin-top: 10px;">
                    <div><span style="color: #aaa;">COMUNICAÇÃO:</span> <span style="color: #00ff88; font-weight: bold;">ONLINE</span></div>
                    <div><span style="color: #aaa;">SATÉLITE:</span> <span style="color: #00ff88; font-weight: bold;">ATIVO</span></div>
                    <div><span style="color: #aaa;">DRONES:</span> <span style="color: #ffaa00; font-weight: bold;">2/3</span></div>
                    <div><span style="color: #aaa;">ALFRED:</span> <span style="color: #00ff88; font-weight: bold;">CONECTADO</span></div>
                </div>
                <div style="font-size: 10px; color: #888; text-align: center; margin-top: 10px;">
                    ÚLTIMA ATUALIZAÇÃO: <span id="missionUpdateTime">${new Date().toLocaleTimeString()}</span>
                </div>
            </div>
        </div>

        <style>
            .mission-live-data .data-item {
                transition: all 0.3s ease;
            }
            
            .mission-live-data .data-item:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 217, 255, 0.2);
            }
            
            #missionEventFeed::-webkit-scrollbar {
                width: 5px;
            }
            
            #missionEventFeed::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.3);
            }
            
            #missionEventFeed::-webkit-scrollbar-thumb {
                background: #00d9ff;
                border-radius: 3px;
            }
        </style>
    `
            },
            'gotham': {
                title: '🦇 MAPA HOLOGRÁFICO GOTHAM CITY 3D',
                content: `
                    <div style="margin-bottom: 15px; font-size: 12px; color: #888; font-family: 'Courier New', monospace;">
                        SISTEMA: BAT-MAP v3.2 | ATUALIZADO: ${new Date().toLocaleString('pt-BR')}
                    </div>
                    
                    <!-- Mapa Holográfico -->
                    <div class="hologram-container">
                        <div class="hologram-grid" id="hologramGrid"></div>
                        <div class="city-districts" id="gothamMap">
                            <div class="district industrial-zone" onclick="showDistrictDetail('industrial')">
                                <div class="data-point" style="top: 30%; left: 40%; color: #ff0040;"></div>
                                <div class="data-point" style="top: 60%; left: 70%; color: #ff0040;"></div>
                                ÁREA INDUSTRIAL
                            </div>
                            <div class="district city-center" onclick="showDistrictDetail('center')">
                                <div class="data-point" style="top: 50%; left: 50%; color: #ffaa00;"></div>
                                CENTRO
                            </div>
                            <div class="district suburbs" onclick="showDistrictDetail('suburbs')">
                                <div class="data-point" style="top: 20%; left: 30%; color: #00ff88;"></div>
                                SUBÚRBIOS
                            </div>
                            <div class="district port-area" onclick="showDistrictDetail('port')">
                                <div class="data-point" style="top: 40%; left: 60%; color: #ff7700;"></div>
                                PORTO
                            </div>
                            <div class="district arkham" onclick="showDistrictDetail('arkham')">
                                <div class="data-point" style="top: 70%; left: 20%; color: #bb86fc;"></div>
                                ARKHAM
                            </div>
                            <div class="district wayne-tower" onclick="showDistrictDetail('wayne')">
                                <div class="data-point" style="top: 40%; left: 40%; color: #00d9ff;"></div>
                                WAYNE TOWER
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controles do Mapa -->
                    <div class="map-controls">
                        <button class="map-btn" onclick="rotateMap('left')">↻ ROTACIONAR ESQ</button>
                        <button class="map-btn" onclick="rotateMap('right')">↺ ROTACIONAR DIR</button>
                        <button class="map-btn" onclick="toggleGrid()">🌐 GRADE ON/OFF</button>
                        <button class="map-btn" onclick="zoomIn()">🔍 ZOOM IN</button>
                        <button class="map-btn" onclick="zoomOut()">🔎 ZOOM OUT</button>
                        <button class="map-btn" onclick="scanForActivity()">📡 ESCANEAR</button>
                        <button class="map-btn" onclick="resetMap()">🔄 RESETAR</button>
                        <button class="map-btn" onclick="exportMap()">💾 EXPORTAR</button>
                    </div>
                    
                    <!-- Detalhes do Distrito -->
                    <div class="district-detail" id="districtDetail" style="display:none;">
                        <div class="district-header">
                            <h3 style="color: #00d9ff; margin: 0;" id="districtTitle">DISTRITO</h3>
                            <span class="district-alert" id="districtAlert">ALERTA</span>
                        </div>
                        <div id="districtInfo" style="font-size: 11px; line-height: 1.5;">
                            Selecione uma zona no mapa para ver os detalhes.
                        </div>
                        <div class="incident-timeline" id="incidentTimeline" style="display:none; margin-top:10px;">
                            <div class="modal-section-title">📅 TIMELINE DE INCIDENTES</div>
                            <div id="timelineContent"></div>
                        </div>
                    </div>
                    
                    <!-- Status da Cidade -->
                    <div class="modal-status" style="margin-top: 15px;">
                        <div class="modal-status-title">📊 STATUS DA CIDADE EM TEMPO REAL</div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                            <div><span style="color: #aaa;">ZONAS DE RISCO:</span> <span style="color: #ff0040; font-weight: bold;">5</span></div>
                            <div><span style="color: #aaa;">POLÍCIA ATIVA:</span> <span style="color: #00ff88; font-weight: bold;">87%</span></div>
                            <div><span style="color: #aaa;">EMERGÊNCIAS:</span> <span style="color: #ffaa00; font-weight: bold;">12</span></div>
                            <div><span style="color: #aaa;">TRÁFEGO:</span> <span style="color: #00d9ff; font-weight: bold;">MODERADO</span></div>
                            <div><span style="color: #aaa;">TEMPO:</span> <span style="color: #bb86fc; font-weight: bold;">CHUVOSO</span></div>
                            <div><span style="color: #aaa;">VISIBILIDADE:</span> <span style="color: #ff7700; font-weight: bold;">BAIXA</span></div>
                        </div>
                    </div>
                `
            },
            'mission': {
                title: '☠ BANCO DE DADOS CRIMINAL GOTHAM CITY',
                content: `
                    <div class="villain-tracking-system">
                        <!-- Barra de Busca e Filtros -->
                        <div class="villain-search-container">
                            <input type="text" class="villain-search" id="villainSearch" 
                                   placeholder="🔍 Buscar vilão..." onkeyup="filterVillains()">
                            <button class="filter-btn" onclick="filterByStatus('all')">TODOS</button>
                            <button class="filter-btn" onclick="filterByStatus('foragido')">FORAGIDOS</button>
                            <button class="filter-btn" onclick="filterByStatus('ativo')">ATIVOS</button>
                        </div>
                        
                        <!-- Estatísticas -->
                        <div class="villain-stats">
                            <div class="stat-item">
                                <div class="stat-label">TOTAL</div>
                                <div class="stat-value">${villains.length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">ATIVOS</div>
                                <div class="stat-value" style="color:#ffaa00;">${villains.filter(v => v.status.includes('ATIV')).length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">FORAGIDOS</div>
                                <div class="stat-value" style="color:#ff0040;">${villains.filter(v => v.status === 'FORAGIDO').length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">PRESOS</div>
                                <div class="stat-value" style="color:#00ff88;">${villains.filter(v => v.status === 'ENCARCERADO').length}</div>
                            </div>
                        </div>
                        
                        <!-- Grid de Vilões -->
                        <div class="villain-grid" id="villainGrid"></div>
                        
                        <!-- Exportação -->
                        <div class="villain-export">
                            <button class="export-btn" onclick="exportVillainsPDF()">📄 PDF</button>
                            <button class="export-btn" onclick="exportVillainsCSV()">📊 CSV</button>
                            <button class="export-btn" onclick="printVillains()">🖨️ IMPRIMIR</button>
                            <button class="export-btn" onclick="refreshVillains()">🔄 ATUALIZAR</button>
                        </div>
                        
                        <!-- Atualização em Tempo Real -->
                        <div style="font-size:10px; color:#888; text-align:center; margin-top:10px;">
                            ⚡ ATUALIZAÇÃO AUTOMÁTICA: <span id="villainUpdateTime">${new Date().toLocaleTimeString()}</span>
                        </div>
                    </div>
                `
            }
        };

        // ===========================================
        // FUNÇÕES GLOBAIS DO SISTEMA
        // ===========================================

        function openModal(type) {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            if (modalContents[type]) {
                title.textContent = modalContents[type].title;
                body.innerHTML = modalContents[type].content;

                // Carregar conteúdo específico
                switch (type) {
                    case 'mission':
                        setTimeout(() => {
                            loadVillains();
                            startVillainUpdates();
                        }, 10);
                        break;
                    case 'weapons':
                        setTimeout(() => {
                            loadEquipment();
                        }, 10);
                        break;
                    case 'gotham':
                        setTimeout(() => {
                            initGothamMap();
                        }, 10);
                        break;
                    case 'vehicle':
                        setTimeout(() => {
                            updateBatmobileDisplay();
                            startBatmobileUpdates();
                        }, 10);
                        break;
                    case 'surveillance':
                        setTimeout(() => {
                            loadSurveillanceSystem();
                        }, 10);
                        break;
                    case 'command':
                        setTimeout(() => {
                            startCommandUpdates();
                        }, 10);
                        break;
                }

                modal.style.display = 'flex';
                playSound('click');
            }
        }

        function closeModal() {
            const modal = document.getElementById('modalOverlay');
            modal.style.display = 'none';

            // Parar todas as atualizações em tempo real
            Object.keys(liveUpdateIntervals).forEach(key => {
                clearInterval(liveUpdateIntervals[key]);
                delete liveUpdateIntervals[key];
            });
        }

        // ===========================================
        // SISTEMA DE VIGILÂNCIA - FUNÇÕES
        // ===========================================
        function loadSurveillanceSystem() {
            // Carregar câmeras
            const camerasGrid = document.getElementById('surveillanceCamerasGrid');
            if (camerasGrid) {
                camerasGrid.innerHTML = '';
                surveillanceData.cameras.forEach(camera => {
                    const statusClass = `status-${camera.status}-surveillance`;
                    const statusText = camera.status === 'active' ? 'ATIVA' :
                        camera.status === 'warning' ? 'ALERTA' : 'INATIVA';

                    const cameraCard = document.createElement('div');
                    cameraCard.className = 'camera-card-surveillance';
                    cameraCard.onclick = () => {
                        alert(`Câmera: ${camera.name}\nStatus: ${statusText}\nLocal: ${camera.location}\n\n${camera.details}`);
                    };

                    cameraCard.innerHTML = `
                <img src="${camera.feed}" alt="${camera.name}" style="width:100%; height:150px; object-fit:cover; border-bottom:1px solid rgba(0,217,255,0.3);">
                <div style="padding:12px;">
                    <div style="color:#00d9ff; font-size:0.9rem; margin-bottom:5px; font-weight:bold; font-family:'Courier New', monospace;">${camera.name}</div>
                    <div style="color:#b0b0ff; font-size:0.7rem; line-height:1.3; font-family:'Courier New', monospace;">
                        <strong style="color:#88ffff;">Local:</strong> ${camera.location}<br>
                        ${camera.details}
                    </div>
                    <div class="camera-status-surveillance ${statusClass}" style="margin-top:10px;">${statusText}</div>
                </div>
            `;

                    camerasGrid.appendChild(cameraCard);
                });
            }

            // Carregar logs iniciais
            const logsContainer = document.getElementById('surveillanceLogs');
            if (logsContainer) {
                logsContainer.innerHTML = surveillanceData.logs.map((log, index) => {
                    const time = new Date();
                    time.setMinutes(time.getMinutes() - surveillanceData.logs.length + index);
                    return `> ${time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}: ${log}`;
                }).join('<br>');
                logsContainer.scrollTop = logsContainer.scrollHeight;
            }

            // Atualizar botões de controle
            updateSurveillanceControls();

            // Iniciar atualizações em tempo real
            startSurveillanceUpdates();
        }

        function toggleSurveillanceSystem(system) {
            const button = event.target.closest('.surveillance-control-btn');
            if (button) {
                const isActive = !button.classList.contains('active');
                button.classList.toggle('active');
                surveillanceData.systems[system] = isActive;

                // Adicionar log
                const systemName = button.querySelector('div:nth-child(2)').textContent;
                const action = isActive ? 'ativado' : 'desativado';
                addSurveillanceLog(`Sistema ${systemName} ${action}.`);

                playSound('click');
            }
        }

        function updateSurveillanceControls() {
            const systemIds = {
                'analise_facial': 'btnAnaliseFacial',
                'rastreamento': 'btnRastreamento',
                'termico': 'btnTermico',
                'notificacoes': 'btnNotificacoes',
                'gravacao': 'btnGravacao',
                'analise': 'btnAnalise'
            };

            Object.entries(surveillanceData.systems).forEach(([system, isActive]) => {
                const buttonId = systemIds[system];
                if (buttonId) {
                    const button = document.getElementById(buttonId);
                    if (button) {
                        if (isActive) {
                            button.classList.add('active');
                        } else {
                            button.classList.remove('active');
                        }
                    }
                }
            });
        }

        function addSurveillanceLog(message) {
            const logsContainer = document.getElementById('surveillanceLogs');
            if (logsContainer) {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const logEntry = `> ${time}: ${message}<br>`;
                logsContainer.innerHTML = logEntry + logsContainer.innerHTML;

                // Manter apenas os últimos 15 logs
                const logs = logsContainer.innerHTML.split('<br>');
                if (logs.length > 15) {
                    logsContainer.innerHTML = logs.slice(0, 15).join('<br>');
                }

                logsContainer.scrollTop = 0;
            }
        }

        function startSurveillanceUpdates() {
            if (liveUpdateIntervals['surveillance']) {
                clearInterval(liveUpdateIntervals['surveillance']);
            }

            liveUpdateIntervals['surveillance'] = setInterval(() => {
                // Simular atualizações em tempo real
                if (Math.random() < 0.3) { // 30% de chance de atualização
                    // Alterar status de câmeras aleatoriamente
                    const randomIndex = Math.floor(Math.random() * surveillanceData.cameras.length);
                    const camera = surveillanceData.cameras[randomIndex];

                    if (camera.status !== 'inactive') {
                        const oldStatus = camera.status;
                        const statuses = ['active', 'warning'];
                        camera.status = statuses[Math.floor(Math.random() * statuses.length)];

                        if (oldStatus !== camera.status) {
                            // Recarregar câmeras se mudou o status
                            loadSurveillanceSystem();

                            // Adicionar log
                            const statusText = camera.status === 'active' ? 'normalizada' : 'em alerta';
                            addSurveillanceLog(`Câmera ${camera.name} ${statusText}.`);
                        }
                    }
                }

                // Adicionar log periódico
                if (Math.random() < 0.1) { // 10% de chance
                    const periodicLogs = [
                        "Sistema operando normalmente. Todas as funções OK.",
                        "Verificação de integridade concluída.",
                        "Sincronização com banco de dados criminal.",
                        "Monitoramento ativo de zonas de risco.",
                        "Cobertura mantida em 92%."
                    ];
                    const randomLog = periodicLogs[Math.floor(Math.random() * periodicLogs.length)];
                    addSurveillanceLog(randomLog);
                }
            }, 15000); // Atualizar a cada 15 segundos
        }

        // ===========================================
        // SISTEMA DE COMANDO - FUNÇÕES
        // ===========================================
        function startCommandUpdates() {
            if (liveUpdateIntervals['command']) {
                clearInterval(liveUpdateIntervals['command']);
            }

            liveUpdateIntervals['command'] = setInterval(() => {
                const currentTime = document.getElementById('commandCurrentTime');
                if (currentTime) {
                    currentTime.textContent = new Date().toLocaleTimeString();
                }

                // Animar conexões
                const connections = document.querySelector('.command-connections');
                if (connections) {
                    const current = parseInt(connections.textContent);
                    const change = Math.random() < 0.5 ? 1 : -1;
                    const newValue = Math.max(20, Math.min(30, current + change));
                    connections.textContent = newValue;
                }
            }, 2000);
        }

        // ===========================================
        // SISTEMA DE VILÕES - FUNÇÕES
        // ===========================================
        let filteredVillains = [...villains];

        function loadVillains() {
            const grid = document.getElementById('villainGrid');
            if (!grid) return;

            grid.innerHTML = '';
            filteredVillains.forEach((v, index) => {
                const card = document.createElement('div');
                card.className = 'villain-card';
                card.onclick = () => openVillainDetail(index);

                let statusClass = 'status-';
                if (v.status === 'ENCARCERADO') statusClass += 'encarcerado';
                else if (v.status === 'FORAGIDO') statusClass += 'foragido';
                else if (v.status === 'ATIVA' || v.status === 'ATIVO') statusClass += 'ativo';
                else if (v.status === 'PLANEJANDO') statusClass += 'planejando';
                else if (v.status === 'NEGÓCIOS') statusClass += 'negocios';

                let threatColor = '#ff0040';
                if (v.threat === 'MÉDIO') threatColor = '#ffaa00';
                else if (v.threat === 'ALTO') threatColor = '#ff7700';

                card.innerHTML = `
                    <div class="villain-threat" style="background: ${threatColor}20; color: ${threatColor};">${v.threat}</div>
                    <img src="${v.img}" alt="${v.name}" onerror="this.onerror=null; this.src='https://via.placeholder.com/80/000000/00d9ff?text=${v.name.charAt(0)}'">
                    <div class="villain-name">${v.name}</div>
                    <div class="villain-status ${statusClass}">${v.status}</div>
                    <div class="villain-location">${v.location}</div>
                    <div style="font-size:9px; color:#888; margin-top:5px;">Visto: ${v.lastSeen.split(' ')[1]}</div>
                `;
                grid.appendChild(card);
            });
        }

        function filterVillains() {
            const search = document.getElementById('villainSearch').value.toLowerCase();
            filteredVillains = villains.filter(v =>
                v.name.toLowerCase().includes(search) ||
                v.alias.toLowerCase().includes(search) ||
                v.location.toLowerCase().includes(search)
            );
            loadVillains();
        }

        function filterByStatus(status) {
            if (status === 'all') {
                filteredVillains = [...villains];
            } else if (status === 'foragido') {
                filteredVillains = villains.filter(v => v.status === 'FORAGIDO');
            } else if (status === 'ativo') {
                filteredVillains = villains.filter(v => v.status.includes('ATIV'));
            }
            loadVillains();
        }

        function startVillainUpdates() {
            if (liveUpdateIntervals['villains']) clearInterval(liveUpdateIntervals['villains']);

            liveUpdateIntervals['villains'] = setInterval(() => {
                // Atualizar tempo da última atualização
                const updateTime = document.getElementById('villainUpdateTime');
                if (updateTime) {
                    updateTime.textContent = new Date().toLocaleTimeString();
                }

                // Simular mudança aleatória de status (10% de chance)
                if (Math.random() < 0.1) {
                    const randomIndex = Math.floor(Math.random() * villains.length);
                    if (villains[randomIndex].status !== 'ENCARCERADO') {
                        const statuses = ['ATIVO', 'FORAGIDO', 'PLANEJANDO'];
                        villains[randomIndex].status = statuses[Math.floor(Math.random() * statuses.length)];
                        loadVillains();
                    }
                }
            }, 30000); // Atualizar a cada 30 segundos
        }

        function openVillainDetail(index) {
            const v = villains[index];
            const modal = document.getElementById('villainDetailModal');
            const left = document.getElementById('villainDetailLeft');
            const right = document.getElementById('villainDetailRight');

            if (!modal || !left || !right) return;

            let statusClass = 'status-';
            if (v.status === 'ENCARCERADO') statusClass += 'encarcerado';
            else if (v.status === 'FORAGIDO') statusClass += 'foragido';
            else if (v.status === 'ATIVA' || v.status === 'ATIVO') statusClass += 'ativo';
            else if (v.status === 'PLANEJANDO') statusClass += 'planejando';
            else if (v.status === 'NEGÓCIOS') statusClass += 'negocios';

            left.innerHTML = `
                <img src="${v.img}" class="villain-detail-img" 
                     onerror="this.onerror=null; this.src='https://via.placeholder.com/300/000000/00d9ff?text=${v.name}'">
                <div style="text-align:center; margin-top:15px;">
                    <div class="villain-status ${statusClass}" style="display:inline-block;">${v.status}</div>
                </div>
            `;

            right.innerHTML = `
                <h3>${v.name}</h3>
                
                <div class="detail-label">IDENTIDADE SECRETA</div>
                <div class="detail-value">${v.alias}</div>
                
                <div class="detail-label">NÍVEL DE AMEAÇA</div>
                <div class="detail-value">
                    <span class="detail-threat">${v.threat}</span>
                </div>
                
                <div class="detail-label">ÚLTIMA LOCALIZAÇÃO</div>
                <div class="detail-value">${v.location}</div>
                
                <div class="detail-label">ÚLTIMA ATIVIDADE</div>
                <div class="detail-value">${v.lastSeen}</div>
                
                <div class="detail-label">CRIMES CONHECIDOS</div>
                <div class="detail-value">
                    ${v.crimes.map(crime => `<div style="margin:2px 0;">• ${crime}</div>`).join('')}
                </div>
                
                <div class="detail-label">ANÁLISE DO BATCOMPUTADOR</div>
                <div class="detail-desc">${v.desc}</div>
                
                <div class="detail-label">PROTOCOLO DE APREENSÃO</div>
                <div class="detail-value">
                    ${v.status === 'ENCARCERADO' ?
                    '<span style="color:#00ff88;">✔ CONTIDO EM ARKHAM</span>' :
                    '<span style="color:#ff0040;">⚠ PRIORIDADE DE CAPTURA ATIVA</span>'}
                </div>
                
                <div style="margin-top:15px; display:flex; gap:10px;">
                    <button class="export-btn" onclick="trackVillain(${index})">🎯 RASTREAR</button>
                    <button class="export-btn" onclick="alert('Relatório gerado para ' + '${v.name}')">📋 RELATÓRIO</button>
                    <button class="export-btn" onclick="notifyGCPD(${index})">🚨 NOTIFICAR GCPD</button>
                </div>
            `;

            modal.style.display = 'block';
            playSound('click');
        }

        function closeVillainDetail() {
            const modal = document.getElementById('villainDetailModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function trackVillain(index) {
            const villain = villains[index];
            alert(`🎯 Iniciando rastreamento de ${villain.name}\nSistema de rastreamento ativado.`);
            playSound('success');
        }

        function notifyGCPD(index) {
            const villain = villains[index];
            alert(`🚨 Notificação enviada ao GCPD para ${villain.name}\nUnidades despachadas.`);
            playSound('click');
        }

        function exportVillainsPDF() {
            alert('📄 Exportando lista de vilões em PDF...');
            playSound('click');
        }

        function exportVillainsCSV() {
            alert('📊 Exportando dados em CSV...');
            playSound('click');
        }

        function printVillains() {
            alert('🖨️ Preparando impressão...');
            playSound('click');
        }

        function refreshVillains() {
            loadVillains();
            document.getElementById('villainUpdateTime').textContent = new Date().toLocaleTimeString();
            playSound('click');
        }

        // ===========================================
        // SISTEMA DE ARSENAL - FUNÇÕES
        // ===========================================
        function loadEquipment() {
            const grid = document.getElementById('equipmentGrid');
            if (!grid) return;

            grid.innerHTML = '';
            arsenalData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'equipment-card';
                card.onclick = () => openEquipmentDetail(index);

                card.innerHTML = `
                    <div class="equipment-icon">${item.icon}</div>
                    <div class="equipment-name">${item.name}</div>
                    <div class="equipment-value">${item.value}</div>
                    <div class="equipment-status ${item.class}">${item.status}</div>
                    <div class="progress-bar">
                        <div class="progress-fill ${item.class.replace('status-', 'progress-')}" style="width: ${item.progress}%"></div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterEquipment() {
            const search = document.getElementById('equipmentSearch').value.toLowerCase();
            const grid = document.getElementById('equipmentGrid');
            if (!grid) return;

            const cards = grid.querySelectorAll('.equipment-card');
            cards.forEach((card, index) => {
                const name = arsenalData[index].name.toLowerCase();
                if (name.includes(search)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function openEquipmentDetail(index) {
            const item = arsenalData[index];
            const diagnostic = document.getElementById('equipmentDiagnostic');
            if (diagnostic) {
                diagnostic.innerHTML = `> ANALISANDO: ${item.name}<br>`;
                diagnostic.innerHTML += `> STATUS: ${item.status}<br>`;
                diagnostic.innerHTML += `> DESCRIÇÃO: ${item.desc}<br>`;
                diagnostic.innerHTML += `> VITAIS:<br>`;
                item.vitals.forEach(vital => {
                    diagnostic.innerHTML += `>   ${vital}<br>`;
                });
                diagnostic.innerHTML += `> COMBOS DISPONÍVEIS:<br>`;
                item.combos.forEach(combo => {
                    diagnostic.innerHTML += `>   ${combo}<br>`;
                });
            }
            playSound('click');
        }

        // ===========================================
        // SISTEMA DO BATMÓVEL - FUNÇÕES
        // ===========================================
        function updateBatmobileDisplay() {
            document.getElementById('batmobileSpeed').textContent = `${batmobileStatus.speed} km/h`;
            document.getElementById('batmobileFuel').textContent = `${batmobileStatus.fuel}%`;
            document.getElementById('batmobileSystems').textContent = batmobileStatus.systems;
            document.getElementById('batmobileDestination').textContent = batmobileStatus.destination || 'NENHUM';
        }

        function controlBatmobile(action) {
            const log = document.getElementById('batmobileLog');

            switch (action) {
                case 'start':
                    batmobileStatus.systems = 'ONLINE';
                    batmobileStatus.speed = 60;
                    log.innerHTML = '> Batmóvel: LIGADO<br>' + log.innerHTML;
                    break;
                case 'stop':
                    batmobileStatus.speed = 0;
                    log.innerHTML = '> Batmóvel: PARADO<br>' + log.innerHTML;
                    break;
                case 'turbo':
                    batmobileStatus.turbo = !batmobileStatus.turbo;
                    batmobileStatus.speed = batmobileStatus.turbo ? 180 : 60;
                    log.innerHTML = `> Turbo: ${batmobileStatus.turbo ? 'ATIVADO' : 'DESATIVADO'}<br>` + log.innerHTML;
                    break;
                case 'camouflage':
                    batmobileStatus.camouflage = !batmobileStatus.camouflage;
                    log.innerHTML = `> Camuflagem: ${batmobileStatus.camouflage ? 'ATIVADA' : 'DESATIVADA'}<br>` + log.innerHTML;
                    break;
            }

            updateBatmobileDisplay();
            playSound('click');

            // Manter apenas os últimos 5 logs
            const logs = log.innerHTML.split('<br>');
            if (logs.length > 5) {
                log.innerHTML = logs.slice(0, 5).join('<br>');
            }
        }

        function setDestination() {
            const input = document.getElementById('routeInput');
            if (input.value) {
                batmobileStatus.destination = input.value;
                updateBatmobileDisplay();

                const log = document.getElementById('batmobileLog');
                log.innerHTML = `> Destino definido: ${input.value}<br>` + log.innerHTML;
                input.value = '';
                playSound('success');
            }
        }

        function startBatmobileUpdates() {
            if (liveUpdateIntervals['batmobile']) clearInterval(liveUpdateIntervals['batmobile']);

            liveUpdateIntervals['batmobile'] = setInterval(() => {
                // Simular consumo de combustível
                if (batmobileStatus.speed > 0 && batmobileStatus.fuel > 0) {
                    batmobileStatus.fuel = Math.max(0, batmobileStatus.fuel - 0.1);
                    updateBatmobileDisplay();
                }

                // Simular atualização aleatória de velocidade
                if (Math.random() < 0.2 && batmobileStatus.speed > 0) {
                    const change = Math.random() < 0.5 ? 5 : -5;
                    batmobileStatus.speed = Math.max(0, Math.min(300, batmobileStatus.speed + change));
                    updateBatmobileDisplay();
                }
            }, 3000);
        }

        // ===========================================
        // SISTEMA DO MAPA DE GOTHAM - FUNÇÕES
        // ===========================================
        function initGothamMap() {
            // Inicializar mapa
            console.log('Mapa de Gotham inicializado');
        }

        function showDistrictDetail(district) {
            const data = gothamDistricts[district];
            if (!data) return;

            document.getElementById('districtTitle').textContent = data.name;
            document.getElementById('districtAlert').textContent = data.alert;
            document.getElementById('districtAlert').className = `district-alert ${data.alertClass}`;
            document.getElementById('districtInfo').innerHTML = data.info;

            // Timeline de incidentes
            const timelineContent = document.getElementById('timelineContent');
            if (timelineContent) {
                timelineContent.innerHTML = '';
                data.incidents.forEach(incident => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    item.innerHTML = `
                        <span class="timeline-time">${incident.time}</span>
                        <span class="timeline-event">${incident.event}</span>
                        <span class="timeline-alert">${incident.alert}</span>
                    `;
                    timelineContent.appendChild(item);
                });
                document.getElementById('incidentTimeline').style.display = 'block';
            }

            document.getElementById('districtDetail').style.display = 'block';
            playSound('click');
        }

        function rotateMap(direction) {
            const map = document.getElementById('gothamMap');
            if (map) {
                const currentRotation = parseInt(map.style.transform?.replace(/[^\d]/g, '') || 0);
                const newRotation = direction === 'left' ? currentRotation - 15 : currentRotation + 15;
                map.style.transform = `rotate(${newRotation}deg)`;
                playSound('click');
            }
        }

        function toggleGrid() {
            const grid = document.getElementById('hologramGrid');
            if (grid) {
                grid.style.opacity = grid.style.opacity === '0' ? '0.5' : '0';
                playSound('click');
            }
        }

        function zoomIn() {
            const map = document.getElementById('gothamMap');
            if (map) {
                const currentScale = parseFloat(map.style.transform?.match(/scale\(([\d.]+)\)/)?.[1] || 1);
                map.style.transform = `scale(${currentScale * 1.2})`;
                playSound('click');
            }
        }

        function zoomOut() {
            const map = document.getElementById('gothamMap');
            if (map) {
                const currentScale = parseFloat(map.style.transform?.match(/scale\(([\d.]+)\)/)?.[1] || 1);
                map.style.transform = `scale(${Math.max(0.5, currentScale * 0.8)})`;
                playSound('click');
            }
        }

        function scanForActivity() {
            const alerts = ['ATIVIDADE SUSPEITA DETECTADA', 'MOVIMENTAÇÃO ANÔMALA', 'PADRÃO CRIMINOSO IDENTIFICADO'];
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            alert(`📡 ESCANEAMENTO COMPLETO\n\n${randomAlert}\n\nRecomendação: Enviar drone para investigação.`);
            playSound('click');
        }

        function resetMap() {
            const map = document.getElementById('gothamMap');
            if (map) {
                map.style.transform = '';
                document.getElementById('districtDetail').style.display = 'none';
                playSound('click');
            }
        }

        function exportMap() {
            alert('💾 Exportando mapa de Gotham...\nFormato: GeoJSON\nResolução: 4K');
            playSound('click');
        }

        // ===========================================
        // SISTEMA DE MISSÃO - FUNÇÕES
        // ===========================================
        function addMissionEvent() {
            const events = [
                "Movimento suspeito detectado",
                "Comunicação interceptada",
                "Reforços solicitados",
                "Evidência coletada",
                "Suspeito em fuga",
                "Área isolada"
            ];
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            const feed = document.getElementById('missionEventFeed');
            if (feed) {
                const eventDiv = document.createElement('div');
                eventDiv.style.color = '#ffaa00';
                eventDiv.style.padding = '5px 0';
                eventDiv.style.borderBottom = '1px solid rgba(255, 255, 255, 0.1)';
                eventDiv.innerHTML = `<span style="color: #00d9ff;">[${time}]</span> ${randomEvent}`;
                feed.appendChild(eventDiv);
                feed.scrollTop = feed.scrollHeight;

                // Atualizar tempo
                document.getElementById('missionUpdateTime').textContent = new Date().toLocaleTimeString();
                playSound('click');
            }
        }

        function clearMissionEvents() {
            const feed = document.getElementById('missionEventFeed');
            if (feed) {
                feed.innerHTML = '<div style="color: #00ff88; padding: 5px 0;">Feed de eventos limpo</div>';
                playSound('click');
            }
        }

        // ===========================================
        // SISTEMA DE SOM
        // ===========================================
        function playSound(type) {
            try {
                // Usar áudio do sistema ou sons simples
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();

                switch (type) {
                    case 'click':
                        // Som de clique simples
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);

                        oscillator.frequency.value = 800;
                        oscillator.type = 'sine';
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);

                        oscillator.start();
                        oscillator.stop(audioContext.currentTime + 0.1);
                        break;

                    case 'success':
                        // Som de sucesso
                        console.log('✓');
                        break;

                    case 'error':
                        // Som de erro
                        console.log('✗');
                        break;

                    case 'logout':
                        // Som de logout
                        console.log('🦇');
                        break;
                }
            } catch (error) {
                console.log(`Som: ${type}`);
            }
        }

        // ===========================================
        // FUNÇÕES DA BATCAVE (PLACEHOLDERS)
        // ===========================================
        function batcaveOptimizeSystem() {
            alert('🔄 Otimizando sistema...\nTodos os processos sendo ajustados para máxima eficiência.');
            playSound('success');
        }

        function batcaveRunDiagnostic() {
            alert('🔍 Executando diagnóstico completo...\nTodos os sistemas serão verificados.');
            playSound('click');
        }

        function batcaveToggleSecurity() {
            alert('🛡️ Alternando segurança...\nProtocolos de defesa sendo ajustados.');
            playSound('click');
        }

        function batcaveActivateEmergency() {
            alert('🚨 ATIVAÇÃO DE EMERGÊNCIA!\nTodos os sistemas em modo de alerta máximo.');
            playSound('error');
        }

        function batcaveShowProjectDetails() {
            alert('📋 Mostrando detalhes do projeto...\nAbrindo relatório técnico completo.');
            playSound('click');
        }

        function batcaveAccessDatabase() {
            alert('💾 Acessando banco de dados...\nConectando ao servidor principal da WayneTech.');
            playSound('click');
        }

        function batcavePrepareVehicle(vehicle) {
            alert(`🚗 Preparando ${vehicle}...\nSistemas sendo inicializados para missão.`);
            playSound('success');
        }

        function batcaveShowVehicles() {
            alert('🛻 Mostrando frota completa...\nExibindo todos os veículos disponíveis.');
            playSound('click');
        }

        function batcaveCheckInventory() {
            alert('📦 Verificando inventário...\nContando todos os equipamentos disponíveis.');
            playSound('click');
        }

        function batcaveRequestGear() {
            alert('🛠️ Solicitando equipamento...\nEnviando requisição para o arsenal.');
            playSound('click');
        }

        function batcaveViewSurveillance() {
            alert('👁️ Acessando câmeras...\nConectando ao sistema de vigilância de Gotham.');
            playSound('click');
        }

        function batcaveScanCrime() {
            alert('🔎 Escaneando atividade criminal...\nAnalisando padrões de criminalidade em Gotham.');
            playSound('click');
        }

        function batcaveOpenModal(imageUrl) {
            const modal = document.getElementById('batcaveImageModal');
            const img = document.getElementById('batcaveModalImage');
            if (modal && img) {
                img.src = imageUrl;
                modal.style.display = 'flex';
                playSound('click');
            }
        }

        function batcaveCloseModal() {
            const modal = document.getElementById('batcaveImageModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // ===========================================
        // SISTEMA DE RADAR TÁTICO - FUNÇÕES CORRIGIDAS
        // ===========================================
        let radarActive = true;
        let radarMode = 'tactical'; // tactical, thermal, sonar
        let radarGridVisible = true;
        let radarDetectionInterval;

        function toggleRadar() {
            const radar = document.getElementById('radarWidget');
            if (!radar) return;

            radarActive = !radarActive;

            if (radarActive) {
                // Ativar radar
                radar.style.opacity = '1';
                radar.style.pointerEvents = 'auto';
                startRadarAnimation();
                startRadarDetection();
                console.log('📡 Radar ATIVADO');
            } else {
                // Desativar radar
                radar.style.opacity = '0.3';
                radar.style.pointerEvents = 'none';
                stopRadarAnimation();
                stopRadarDetection();
                console.log('📡 Radar DESATIVADO');
            }

            // Atualizar botão visualmente
            const radarBtn = document.querySelector('.radar-btn:nth-child(1)');
            if (radarBtn) {
                radarBtn.textContent = radarActive ? '📡' : '🔇';
                radarBtn.title = radarActive ? 'Desligar Radar' : 'Ligar Radar';
            }
        }

        function changeRadarMode() {
            const modes = ['tactical', 'thermal', 'sonar'];
            const radar = document.getElementById('radarWidget');
            if (!radar) return;

            const sweep = radar.querySelector('.radar-sweep');
            const line = radar.querySelector('.radar-line');

            // Encontrar próximo modo
            const currentIndex = modes.indexOf(radarMode);
            radarMode = modes[(currentIndex + 1) % modes.length];

            // Mudar cores baseado no modo
            let sweepGradient, lineColor, shadowColor;

            switch (radarMode) {
                case 'thermal':
                    // Utilizando tons de laranja/vermelho baseados nas variáveis do sistema :root
                    sweepGradient = 'conic-gradient(from 0deg, rgba(255, 100, 0, 0.4) 0%, rgba(255, 64, 0, 0.1) 10%, transparent 40%)';
                    lineColor = 'var(--warning-color)'; // Cor laranja de atenção do HUD
                    shadowColor = '0 0 15px var(--danger-color)'; // Brilho avermelhado de perigo

                    console.log('🔥 MODO TÉRMICO: Rastreamento de calor ativado');

                    // Opcional: Aplicar efeito de "calor" nos alvos existentes
                    radar.querySelectorAll('.radar-target').forEach(t => {
                        t.style.filter = 'blur(1px) brightness(1.5)';
                        t.style.boxShadow = '0 0 10px var(--warning-color)';
                    });
                    break;
                case 'sonar':
                    sweepGradient = 'conic-gradient(from 0deg, rgba(0, 255, 136, 0.3) 0%, rgba(0, 255, 136, 0.1) 10%, transparent 30%)';
                    lineColor = '#00ff88';
                    shadowColor = '0 0 10px #00ff88';
                    console.log('🎯 Modo SONAR ativado');
                    break;
                default: // tactical
                    sweepGradient = 'conic-gradient(from 0deg, rgba(0, 217, 255, 0.3) 0%, rgba(0, 217, 255, 0.1) 10%, transparent 30%)';
                    lineColor = '#00d9ff';
                    shadowColor = '0 0 10px #00d9ff';
                    console.log('🦇 Modo TÁTICO ativado');
            }

            if (sweep) sweep.style.background = sweepGradient;
            if (line) {
                line.style.background = lineColor;
                line.style.boxShadow = shadowColor;
            }

            // Atualizar botão visualmente
            const modeBtn = document.querySelector('.radar-btn:nth-child(2)');
            if (modeBtn) {
                const modeIcons = { tactical: '🎯', thermal: '🔥', sonar: '🌊' };
                modeBtn.textContent = modeIcons[radarMode];
                modeBtn.title = `Modo: ${radarMode.toUpperCase()}`;
            }
        }

        function toggleRadarGrid() {
            const radar = document.getElementById('radarWidget');
            if (!radar) return;

            const grid = radar.querySelector('.radar-grid');
            if (!grid) return;

            radarGridVisible = !radarGridVisible;
            grid.style.opacity = radarGridVisible ? '0.5' : '0';

            // Atualizar botão visualmente
            const gridBtn = document.querySelector('.radar-btn:nth-child(3)');
            if (gridBtn) {
                gridBtn.textContent = radarGridVisible ? '🌐' : '⬜';
                gridBtn.title = radarGridVisible ? 'Ocultar Grade' : 'Mostrar Grade';
            }

            console.log(`🌐 Grade ${radarGridVisible ? 'VISÍVEL' : 'OCULTA'}`);
        }

        function startRadarAnimation() {
            const sweep = document.querySelector('.radar-sweep');
            const line = document.querySelector('.radar-line');
            const targets = document.querySelectorAll('.radar-target');

            if (sweep) sweep.style.animationPlayState = 'running';
            if (line) line.style.animationPlayState = 'running';
            targets.forEach(target => {
                target.style.animationPlayState = 'running';
            });
        }

        function stopRadarAnimation() {
            const sweep = document.querySelector('.radar-sweep');
            const line = document.querySelector('.radar-line');
            const targets = document.querySelectorAll('.radar-target');

            if (sweep) sweep.style.animationPlayState = 'paused';
            if (line) line.style.animationPlayState = 'paused';
            targets.forEach(target => {
                target.style.animationPlayState = 'paused';
            });
        }

        // Sistema de detecção automática (simulação)
        function startRadarDetection() {
            if (radarDetectionInterval) clearInterval(radarDetectionInterval);

            radarDetectionInterval = setInterval(() => {
                if (radarActive && isLoggedIn && Math.random() < 0.15) { // 15% de chance
                    const types = ['friendly', 'hostile', 'neutral'];
                    const randomType = types[Math.floor(Math.random() * types.length)];
                    const x = 10 + Math.random() * 80; // Entre 10% e 90%
                    const y = 10 + Math.random() * 80; // Entre 10% e 90%

                    addRadarTarget(randomType, x, y);

                    // Remover alvo após 5-10 segundos
                    setTimeout(() => {
                        removeLastRadarTarget();
                    }, 5000 + Math.random() * 5000);
                }
            }, 8000); // Verificar a cada 8 segundos
        }

        function stopRadarDetection() {
            if (radarDetectionInterval) {
                clearInterval(radarDetectionInterval);
                radarDetectionInterval = null;
            }
        }

        // Função para adicionar alvo dinamicamente
        function addRadarTarget(type, xPercent, yPercent) {
            const radar = document.getElementById('radarWidget');
            if (!radar || !radarActive) return;

            const target = document.createElement('div');
            target.className = `radar-target ${type}`;
            target.style.top = `${yPercent}%`;
            target.style.left = `${xPercent}%`;
            target.style.animation = 'targetPulse 2s infinite';
            target.setAttribute('data-temp', 'true'); // Marcar como temporário

            radar.appendChild(target);

            const typeNames = { friendly: 'AMIGO', hostile: 'HOSTIL', neutral: 'NEUTRO' };
            console.log(`🎯 Alvo ${typeNames[type]} detectado (X:${xPercent}%, Y:${yPercent}%)`);

            return target;
        }

        // Função para remover o último alvo temporário
        function removeLastRadarTarget() {
            const tempTargets = document.querySelectorAll('.radar-target[data-temp="true"]');
            if (tempTargets.length > 0) {
                tempTargets[tempTargets.length - 1].remove();
            }
        }

        // Função para arrastar o radar (simplificada)
        function initRadarDrag() {
            const radar = document.getElementById('radarWidget');
            if (!radar) return;

            let isDragging = false;
            let startX, startY, initialX, initialY;

            radar.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            radar.addEventListener('touchstart', (e) => {
                e.preventDefault();
                startDrag(e.touches[0]);
            });
            document.addEventListener('touchmove', (e) => {
                e.preventDefault();
                drag(e.touches[0]);
            });
            document.addEventListener('touchend', stopDrag);

            function startDrag(e) {
                // Não arrastar se clicar nos botões
                if (e.target.classList.contains('radar-btn')) return;

                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                initialX = radar.offsetLeft;
                initialY = radar.offsetTop;
                radar.style.cursor = 'grabbing';
                radar.style.transition = 'none';
            }

            function drag(e) {
                if (!isDragging) return;

                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;

                radar.style.left = `${initialX + deltaX}px`;
                radar.style.top = `${initialY + deltaY}px`;
            }

            function stopDrag() {
                if (!isDragging) return;

                isDragging = false;
                radar.style.cursor = 'default';
                radar.style.transition = 'all 0.3s ease';

                // Salvar posição
                localStorage.setItem('radarPosition', JSON.stringify({
                    left: radar.style.left,
                    top: radar.style.top
                }));
            }
        }

        // Inicializar radar quando o HUD é carregado
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(() => {
                const radarWidget = document.getElementById('radarWidget');
                if (radarWidget && isLoggedIn) {
                    // Carregar posição salva
                    const savedPosition = localStorage.getItem('radarPosition');
                    if (savedPosition) {
                        try {
                            const position = JSON.parse(savedPosition);
                            if (position.left) radarWidget.style.left = position.left;
                            if (position.top) radarWidget.style.top = position.top;
                        } catch (e) {
                            console.log('Erro ao carregar posição do radar:', e);
                        }
                    }

                    // Iniciar animações
                    startRadarAnimation();

                    // Iniciar detecção automática
                    startRadarDetection();

                    // Tornar arrastável
                    initRadarDrag();

                    console.log('🦇 Sistema de radar inicializado com sucesso!');

                    // Teste rápido dos botões (opcional)
                    console.log('ℹ️ Botões do radar prontos:');
                    console.log('   📡 - Liga/Desliga radar');
                    console.log('   🎯 - Muda modo (tático/térmico/sonar)');
                    console.log('   🌐 - Mostra/esconde grade');
                }
            }, 1000);
        });

        // Função de teste rápida
        function testRadarButtons() {
            console.log('🧪 Testando botões do radar...');

            // Simular cliques nos botões
            setTimeout(() => toggleRadar(), 500);
            setTimeout(() => toggleRadar(), 1500);
            setTimeout(() => changeRadarMode(), 2500);
            setTimeout(() => changeRadarMode(), 3500);
            setTimeout(() => toggleRadarGrid(), 4500);
            setTimeout(() => toggleRadarGrid(), 5500);

            console.log('✅ Teste dos botões iniciado');
        }

        // Descomente para testar automaticamente:
        // setTimeout(testRadarButtons, 3000);

        // ===========================================
        // SISTEMA DE WIDGETS REFATORADO
        // ===========================================

        class WidgetSystem {
            constructor() {
                this.widgets = {
                    voice: {
                        id: 'voiceAnalyzerWidget',
                        visualizerId: 'voiceVisualizer',
                        statusId: 'voiceStatusText',
                        interval: null
                    },
                    biometric: {
                        id: 'biometricScannerWidget',
                        progressFillId: 'scannerProgressFill',
                        confidenceId: 'confidenceValue',
                        progressId: 'progressPercentage',
                        identityId: 'identityValue',
                        interval: null
                    },
                    encryption: {
                        id: 'encryptionWidget',
                        terminalId: 'terminalContent',
                        statusId: 'encryptionStatus',
                        keyId: 'encryptionKey',
                        interval: null
                    },
                    radar: {
                        id: 'radarWidget',
                        labelId: 'radarLabel',
                        gridId: 'radarGrid',
                        interval: null
                    }
                };

                this.codeLines = [
                    "> Criptografia AES-256 ativada",
                    "> Chave quântica gerada: 0xF7A2C9E1",
                    "> Protocolo Bat-Secure v3.2 online",
                    "> Canais de comunicação seguros",
                    "> Verificação de integridade: OK",
                    "> Firewall WayneTech ativo",
                    "> Criptografia ponta-a-ponta estabelecida",
                    "> Nenhuma intrusão detectada",
                    "> Sistema 100% operacional",
                    "> Sincronização com Batcave completa"
                ];

                this.radarModes = [
                    '⬢ TÁTICO OVERLAY',
                    '⬢ MODO PERSECUÇÃO',
                    '⬢ ESCANEAMENTO ATIVO',
                    '⬢ VISÃO NOTURNA'
                ];

                this.identities = ['BRUCE WAYNE', 'BATMAN', 'UNKNOWN', 'MATCH: DENT, H'];
            }

            // ===========================================
            // INICIALIZAÇÃO PRINCIPAL
            // ===========================================

            initialize() {
                if (!this.isHUDVisible()) {
                    console.warn('HUD não está visível. Widgets não inicializados.');
                    return;
                }

                this.initializeVoiceAnalyzer();
                this.initializeBiometricScanner();
                this.initializeEncryptionMonitor();
                this.initializeRadarWidget();

                console.log('Sistema de widgets inicializado com sucesso.');
            }

            isHUDVisible() {
                const hudFrame = document.getElementById('hudFrame');
                return hudFrame && hudFrame.style.display === 'block';
            }

            // ===========================================
            // WIDGET 1: ANÁLISE DE FREQUÊNCIA DE VOZ
            // ===========================================

            initializeVoiceAnalyzer() {
                const visualizer = document.getElementById(this.widgets.voice.visualizerId);
                if (!visualizer) return;

                this.createFrequencyBars(visualizer);
                this.startVoiceVisualizer();
                this.startVoiceStatusToggle();
            }

            createFrequencyBars(container) {
                container.innerHTML = '';
                const barCount = 16;

                for (let i = 0; i < barCount; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'frequency-bar';
                    bar.style.height = `${this.getRandomHeight(20, 100)}%`;
                    bar.style.animationDelay = `${i * 0.1}s`;
                    container.appendChild(bar);
                }
            }

            getRandomHeight(min, max) {
                return Math.random() * (max - min) + min;
            }

            startVoiceVisualizer() {
                this.widgets.voice.interval = setInterval(() => {
                    const bars = document.querySelectorAll('.frequency-bar');
                    bars.forEach((bar, index) => {
                        bar.style.height = `${this.getRandomHeight(20, 100)}%`;
                        bar.style.animationDelay = `${index * 0.1}s`;
                    });
                }, 300);
            }

            startVoiceStatusToggle() {
                setInterval(() => {
                    this.toggleVoiceStatus();
                }, 3000);
            }

            toggleVoiceStatus() {
                const statusText = document.getElementById(this.widgets.voice.statusId);
                const recordingDot = document.querySelector('.status-dot.recording');

                if (!statusText || !recordingDot) return;

                if (statusText.textContent === 'GRAVANDO') {
                    this.setVoiceStatus('ANALISANDO', '#00d9ff', recordingDot);
                } else {
                    this.setVoiceStatus('GRAVANDO', '#ff0040', recordingDot);
                }
            }

            setVoiceStatus(text, color, dot) {
                const statusText = document.getElementById(this.widgets.voice.statusId);
                if (statusText) {
                    statusText.textContent = text;
                    statusText.style.color = color;
                }

                if (dot) {
                    dot.style.backgroundColor = color;
                    dot.style.boxShadow = `0 0 6px ${color}`;
                }
            }

            // ===========================================
            // WIDGET 2: SCANNER BIOMÉTRICO
            // ===========================================

            initializeBiometricScanner() {
                const elements = this.getBiometricElements();
                if (!this.validateBiometricElements(elements)) return;

                this.startBiometricScan(elements);
            }

            getBiometricElements() {
                return {
                    progressFill: document.getElementById(this.widgets.biometric.progressFillId),
                    confidence: document.getElementById(this.widgets.biometric.confidenceId),
                    progress: document.getElementById(this.widgets.biometric.progressId),
                    identity: document.getElementById(this.widgets.biometric.identityId)
                };
            }

            validateBiometricElements(elements) {
                return Object.values(elements).every(element => element !== null);
            }

            startBiometricScan(elements) {
                let progress = 0;
                const maxProgress = 100;

                this.widgets.biometric.interval = setInterval(() => {
                    if (progress < maxProgress) {
                        progress = Math.min(progress + Math.random() * 2, maxProgress);
                        this.updateBiometricProgress(progress, elements);

                        if (progress >= maxProgress) {
                            this.handleBiometricComplete(elements);
                        }
                    }
                }, 100);
            }

            updateBiometricProgress(progress, elements) {
                elements.progressFill.style.width = `${progress}%`;
                elements.confidence.textContent = `${progress.toFixed(1)}%`;
                elements.progress.textContent = `${Math.round(progress)}%`;
            }

            handleBiometricComplete(elements) {
                this.setRandomIdentity(elements.identity);

                setTimeout(() => {
                    this.resetBiometricScanner(elements);
                }, 3000);
            }

            setRandomIdentity(identityElement) {
                if (!identityElement) return;

                const randomIdentity = this.identities[
                    Math.floor(Math.random() * this.identities.length)
                ];

                identityElement.textContent = randomIdentity;
                identityElement.style.color = '#00ff88';
            }

            resetBiometricScanner(elements) {
                elements.progressFill.style.width = '0%';
                elements.confidence.textContent = '0.0%';
                elements.progress.textContent = '0%';

                if (elements.identity) {
                    elements.identity.textContent = 'VERIFICANDO...';
                    elements.identity.style.color = '#00ff88';
                }
            }

            // ===========================================
            // WIDGET 3: MONITOR DE CRIPTOGRAFIA
            // ===========================================

            initializeEncryptionMonitor() {
                const terminal = document.getElementById(this.widgets.encryption.terminalId);
                if (!terminal) return;

                this.renderCodeLines(terminal);
                this.startKeyRotation();
                this.startStatusRotation();
            }

            renderCodeLines(terminal) {
                terminal.innerHTML = '';

                this.codeLines.forEach((line, index) => {
                    const codeLine = document.createElement('div');
                    codeLine.className = 'code-line';
                    codeLine.textContent = line;
                    codeLine.style.animationDelay = `${index * 2}s`;
                    terminal.appendChild(codeLine);
                });
            }

            startKeyRotation() {
                this.widgets.encryption.interval = setInterval(() => {
                    this.rotateEncryptionKey();
                }, 5000);
            }

            rotateEncryptionKey() {
                const keyElement = document.getElementById(this.widgets.encryption.keyId);
                if (!keyElement) return;

                keyElement.textContent = this.generateRandomKey(8);
            }

            generateRandomKey(length) {
                const chars = '0123456789ABCDEF';
                return Array.from({ length }, () =>
                    chars[Math.floor(Math.random() * chars.length)]
                ).join('');
            }

            startStatusRotation() {
                let statusIndex = 0;

                setInterval(() => {
                    statusIndex = (statusIndex + 1) % 4;
                    this.updateEncryptionStatus(statusIndex);
                }, 4000);
            }

            updateEncryptionStatus(index) {
                const statusElement = document.getElementById(this.widgets.encryption.statusId);
                if (!statusElement) return;

                const statusConfig = {
                    0: { text: 'ATIVO', color: '#00ff88' },
                    1: { text: 'PROTEGENDO', color: '#00d9ff' },
                    2: { text: 'SINCRONIZANDO', color: '#ffaa00' },
                    3: { text: 'SEGURO', color: '#bb86fc' }
                };

                const config = statusConfig[index];
                if (!config) return;

                statusElement.textContent = config.text;
                statusElement.style.color = config.color;
                statusElement.style.borderColor = config.color;
            }

            // ===========================================
            // WIDGET DE RADAR
            // ===========================================

            initializeRadarWidget() {
                const radarWidget = document.getElementById(this.widgets.radar.id);
                if (!radarWidget) return;

                radarWidget.style.display = 'block';
                this.addRadarTargets();
            }

            addRadarTargets() {
                setTimeout(() => {
                    const radarContainer = document.querySelector('.radar-circles');
                    if (!radarContainer) return;

                    this.createRadarTarget('friendly', radarContainer);
                    this.createRadarTarget('hostile', radarContainer);
                }, 1000);
            }

            createRadarTarget(type, container) {
                const target = document.createElement('div');
                target.className = `radar-target ${type}`;
                target.style.top = `${this.getRandomHeight(15, 85)}%`;
                target.style.left = `${this.getRandomHeight(15, 85)}%`;
                container.appendChild(target);
            }

            // ===========================================
            // CONTROLES DO RADAR
            // ===========================================

            toggleRadar() {
                const radarWidget = document.getElementById(this.widgets.radar.id);
                if (!radarWidget) return;

                const isVisible = radarWidget.style.opacity !== '0';
                radarWidget.style.opacity = isVisible ? '0' : '1';
                this.playSound('click');
            }

            changeRadarMode() {
                const label = document.querySelector('.radar-label');
                if (!label) return;

                const currentText = label.textContent;
                const currentIndex = this.radarModes.indexOf(currentText);
                const nextIndex = (currentIndex + 1) % this.radarModes.length;

                label.textContent = this.radarModes[nextIndex];
                this.animateElement(label);
                this.playSound('click');
            }

            animateElement(element) {
                element.style.animation = 'none';
                setTimeout(() => {
                    element.style.animation = 'pulse 0.5s';
                }, 10);
            }

            toggleRadarGrid() {
                const grid = document.querySelector('.radar-grid');
                if (!grid) return;

                grid.style.opacity = grid.style.opacity === '0' ? '0.5' : '0';
                this.playSound('click');
            }

            // ===========================================
            // UTILITÁRIOS
            // ===========================================

            playSound(type) {
                // Implementação real de áudio aqui
                console.log(`[SOUND] ${type}`);
                // try { new Audio(`sounds/${type}.mp3`).play(); } catch(e) {}
            }

            destroy() {
                // Limpar todos os intervalos
                Object.values(this.widgets).forEach(widget => {
                    if (widget.interval) {
                        clearInterval(widget.interval);
                    }
                });

                console.log('Sistema de widgets destruído.');
            }
        }

        // ===========================================
        // SISTEMA DE ARRASTAR WIDGETS - SIMPLES E FUNCIONAL
        // ===========================================
        function makeWidgetsDraggable() {
            const widgets = [
                'radarWidget',
                'voiceAnalyzerWidget',
                'biometricScannerWidget',
                'encryptionWidget'
            ];

            widgets.forEach(widgetId => {
                const widget = document.getElementById(widgetId);
                if (!widget) return;

                // Carrega posição salva
                loadWidgetPosition(widgetId);

                // Configura arrasto
                setupDragAndDrop(widget, widgetId);
            });
        }

        function setupDragAndDrop(widget, widgetId) {
            let isDragging = false;
            let startX, startY, initialX, initialY;

            // Configura cursor
            widget.style.cursor = 'move';
            widget.style.userSelect = 'none';
            widget.style.webkitUserSelect = 'none';

            // Eventos de mouse
            widget.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            // Eventos de touch
            widget.addEventListener('touchstart', startDragTouch);
            document.addEventListener('touchmove', dragTouch);
            document.addEventListener('touchend', stopDrag);

            function startDrag(e) {
                if (e.button !== 0) return; // Apenas botão esquerdo

                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;

                // Obtém posição atual do widget
                const transform = widget.style.transform;
                const match = transform.match(/translate3d\(([-\d.]+)px,\s*([-\d.]+)px/);

                if (match) {
                    initialX = parseFloat(match[1]);
                    initialY = parseFloat(match[2]);
                } else {
                    initialX = 0;
                    initialY = 0;
                }

                // Efeito visual durante arrasto
                widget.style.opacity = '0.9';
                widget.style.boxShadow = '0 0 30px rgba(0, 217, 255, 0.8)';
                widget.style.borderColor = '#fff';
                widget.style.zIndex = '9999';

                e.preventDefault();
            }

            function startDragTouch(e) {
                if (e.touches.length !== 1) return;

                isDragging = true;
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;

                const transform = widget.style.transform;
                const match = transform.match(/translate3d\(([-\d.]+)px,\s*([-\d.]+)px/);

                if (match) {
                    initialX = parseFloat(match[1]);
                    initialY = parseFloat(match[2]);
                } else {
                    initialX = 0;
                    initialY = 0;
                }

                widget.style.opacity = '0.9';
                widget.style.boxShadow = '0 0 30px rgba(0, 217, 255, 0.8)';
                widget.style.borderColor = '#fff';
                widget.style.zIndex = '9999';

                e.preventDefault();
            }

            function drag(e) {
                if (!isDragging) return;

                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;

                const newX = initialX + deltaX;
                const newY = initialY + deltaY;

                widget.style.transform = `translate3d(${newX}px, ${newY}px, 0)`;
                widget.style.transition = 'none';
            }

            function dragTouch(e) {
                if (!isDragging || e.touches.length !== 1) return;

                const deltaX = e.touches[0].clientX - startX;
                const deltaY = e.touches[0].clientY - startY;

                const newX = initialX + deltaX;
                const newY = initialY + deltaY;

                widget.style.transform = `translate3d(${newX}px, ${newY}px, 0)`;
                widget.style.transition = 'none';

                e.preventDefault();
            }

            function stopDrag() {
                if (!isDragging) return;

                isDragging = false;

                // Restaura efeitos visuais
                widget.style.opacity = '1';
                widget.style.boxShadow = '';
                widget.style.borderColor = '';
                widget.style.zIndex = '90';
                widget.style.transition = 'all 0.3s ease';

                // Salva posição
                const transform = widget.style.transform;
                const match = transform.match(/translate3d\(([-\d.]+)px,\s*([-\d.]+)px/);

                if (match) {
                    saveWidgetPosition(widgetId, parseFloat(match[1]), parseFloat(match[2]));
                }
            }
        }

        function saveWidgetPosition(widgetId, x, y) {
            const positions = JSON.parse(localStorage.getItem('widgetPositions') || '{}');
            positions[widgetId] = { x, y };
            localStorage.setItem('widgetPositions', JSON.stringify(positions));
        }

        function loadWidgetPosition(widgetId) {
            const widget = document.getElementById(widgetId);
            if (!widget) return;

            const positions = JSON.parse(localStorage.getItem('widgetPositions') || '{}');
            const savedPos = positions[widgetId];

            if (savedPos && savedPos.x !== undefined && savedPos.y !== undefined) {
                widget.style.transform = `translate3d(${savedPos.x}px, ${savedPos.y}px, 0)`;
                widget.style.position = 'fixed';
            }
        }

        function resetWidgetPositions() {
            const widgets = ['radarWidget', 'voiceAnalyzerWidget', 'biometricScannerWidget', 'encryptionWidget'];

            widgets.forEach(widgetId => {
                const widget = document.getElementById(widgetId);
                if (widget) {
                    widget.style.transform = 'translate3d(0, 0, 0)';
                    widget.style.transition = 'transform 0.5s ease';
                }
            });

            localStorage.removeItem('widgetPositions');
            alert('Posições dos widgets resetadas!');
        }

        // ===========================================
        // INICIALIZAÇÃO
        // ===========================================
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(() => {
                makeWidgetsDraggable();
            }, 1000);
        });

        // Atualiza a função showHUD para inicializar arrasto
        const originalShowHUD = showHUD;
        showHUD = function () {
            originalShowHUD();

            setTimeout(() => {
                makeWidgetsDraggable();
            }, 500);
        };

        // ===========================================
        // INICIALIZAÇÃO GLOBAL
        // ===========================================

        let widgetSystem = null;

        function initializeWidgetSystem() {
            const checkHUD = setInterval(() => {
                const hudFrame = document.getElementById('hudFrame');

                if (hudFrame && hudFrame.style.display === 'block') {
                    if (!widgetSystem) {
                        widgetSystem = new WidgetSystem();
                        widgetSystem.initialize();
                    }
                    clearInterval(checkHUD);
                }
            }, 500);
        }

        // Inicializar quando o DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeWidgetSystem);
        } else {
            initializeWidgetSystem();
        }

        // Exportar para uso global (se necessário)
        window.WidgetSystem = WidgetSystem;
        window.widgetSystem = widgetSystem;

        // Para destruir o sistema (em caso de logout, etc.)
        window.destroyWidgetSystem = function () {
            if (widgetSystem) {
                widgetSystem.destroy();
                widgetSystem = null;
            }
        };


        // ===========================================
        // EVENT LISTENERS GLOBAIS
        // ===========================================
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const villainModal = document.getElementById('villainDetailModal');
                const equipModal = document.getElementById('equipmentDetailModal');

                if (villainModal && villainModal.style.display === 'block') {
                    closeVillainDetail();
                } else if (equipModal && equipModal.style.display === 'block') {
                    // Função para fechar modal de equipamento (se existir)
                    equipModal.style.display = 'none';
                } else {
                    closeModal();
                }
            }
        });

        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target === document.getElementById('modalOverlay')) {
                closeModal();
            }
        });

        // Inicializar sistema quando a página carrega
        document.addEventListener('DOMContentLoaded', () => {
            console.log('BAT-HUD v2.0 - Sistema inicializado');
        });
    </script>
</body>

</html>