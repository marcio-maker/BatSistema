<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAYNE ENTERPRISES - BAT-HUD SYSTEM v2.0</title>
    <style>
        /* =========================================== */
        /* CONFIGURA√á√ïES GERAIS */
        /* =========================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }

        /* =========================================== */
        /* EFEITO DE CHUVA GOTHAM */
        /* =========================================== */
        .rain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(transparent 90%, rgba(0, 0, 0, 0.3) 100%);
            animation: rain 0.5s linear infinite;
            opacity: 0.3;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes rain {
            0% { background-position: 0 0; }
            100% { background-position: 0 20px; }
        }

        /* =========================================== */
        /* SISTEMA DE ALERTA DE EMERG√äNCIA */
        /* =========================================== */
        .emergency-alert {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.95);
            z-index: 9999;
            animation: emergencyPulse 0.5s infinite alternate;
            cursor: pointer;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .emergency-content {
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 15px;
            border: 5px solid #fff;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.8);
            max-width: 600px;
            animation: shake 0.5s infinite;
        }

        .emergency-title {
            font-size: 42px;
            color: #fff;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 20px #ff0000;
            font-weight: bold;
        }

        .emergency-subtitle {
            font-size: 24px;
            color: #ff4444;
            margin-bottom: 30px;
            text-transform: uppercase;
        }

        .emergency-message {
            font-size: 18px;
            color: #fff;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .emergency-countdown {
            font-size: 36px;
            color: #ff0000;
            margin: 20px 0;
            font-weight: bold;
            text-shadow: 0 0 10px #ff0000;
        }

        /* =========================================== */
        /* WIDGET DO TIMER */
        /* =========================================== */
        .alert-timer {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 0, 0, 0.3);
            border: 2px solid #ff0000;
            border-radius: 10px;
            padding: 10px 15px;
            color: #fff;
            z-index: 100;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
            font-family: 'Courier New', monospace;
        }

        .alert-label {
            font-size: 12px;
            color: #ff8888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-value {
            font-size: 16px;
            color: #ff0000;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .timer-skip {
            background: rgba(255, 0, 0, 0.5);
            border: 1px solid #ff0000;
            color: #fff;
            padding: 3px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 10px;
            font-family: 'Arial', sans-serif;
        }

        .timer-skip:hover {
            background: rgba(255, 0, 0, 0.8);
        }

        @keyframes emergencyPulse {
            0% {
                background: rgba(255, 0, 0, 0.95);
                box-shadow: 0 0 100px rgba(255, 0, 0, 0.8) inset;
            }
            100% {
                background: rgba(255, 50, 50, 0.95);
                box-shadow: 0 0 150px rgba(255, 0, 0, 1) inset;
            }
        }

        /* =========================================== */
        /* SISTEMA DE AUTENTICA√á√ÉO */
        /* =========================================== */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            backdrop-filter: blur(5px);
            padding: 20px;
        }

        .auth-frame {
            background: rgba(10, 20, 40, 0.95);
            border: 2px solid rgba(0, 217, 255, 0.2);
            width: 100%;
            max-width: 400px;
            padding: 30px 20px;
            position: relative;
            box-shadow: 0 0 50px rgba(0, 217, 255, 0.2);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-frame::before,
        .auth-frame::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #00d9ff;
        }

        .auth-frame::before {
            top: -2px;
            left: -2px;
            border-right: none;
            border-bottom: none;
        }

        .auth-frame::after {
            bottom: -2px;
            right: -2px;
            border-left: none;
            border-top: none;
        }

        .bat-logo {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .bat-logo h1 {
            color: #ccc;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: normal;
            margin-bottom: 15px;
        }

        .bat-symbol {
            width: 60px;
            height: 30px;
            margin: 0 auto;
            position: relative;
            filter: drop-shadow(0 0 10px rgba(0, 217, 255, 0.3));
        }

        .bat-symbol::before {
            content: '‚ñº';
            font-size: 30px;
            color: #00d9ff;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            animation: batPulse 2s infinite;
        }

        @keyframes batPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 12px 0;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
            color: #00d9ff;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            border-bottom-color: #00d9ff;
            box-shadow: 0 1px 0 rgba(0, 217, 255, 0.2);
        }

        .form-label {
            position: absolute;
            top: 12px;
            left: 0;
            color: rgba(0, 217, 255, 0.5);
            font-size: 14px;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .form-input:focus+.form-label,
        .form-input:valid+.form-label {
            top: -10px;
            font-size: 12px;
            color: #00d9ff;
        }

        .auth-button {
            background: transparent;
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 12px;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            background: rgba(0, 217, 255, 0.1);
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.2);
        }

        .auth-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 217, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .auth-button:hover::before {
            left: 100%;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .auth-switch a {
            color: #00d9ff;
            text-decoration: none;
            margin-left: 5px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .auth-switch a:hover {
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
        }

        .auth-error {
            background: rgba(255, 50, 50, 0.1);
            border-left: 3px solid #ff5555;
            padding: 10px;
            margin-top: 15px;
            font-size: 12px;
            color: #ff5555;
            display: none;
            animation: shake 0.5s;
        }

        /* =========================================== */
        /* INDICADOR DE USU√ÅRIO */
        /* =========================================== */
        .user-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(10, 20, 40, 0.9);
            border: 2px solid rgba(0, 217, 255, 0.2);
            padding: 8px 15px;
            font-size: 11px;
            color: #00d9ff;
            z-index: 100;
            backdrop-filter: blur(5px);
            display: none;
            border-radius: 4px;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.1);
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .user-indicator .logout-btn {
            margin-left: 8px;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            font-size: 9px;
            transition: color 0.3s ease;
            white-space: nowrap;
        }

        .user-indicator .logout-btn:hover {
            color: #ff5555;
        }

        /* =========================================== */
        /* INTERFACE HUD PRINCIPAL */
        /* =========================================== */
        .hud-frame {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: none;
            z-index: 5;
            overflow: hidden;
        }

        .piece-container {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .piece-container:hover {
            transform: scale(1.02);
            z-index: 10;
        }

        .piece-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 10px rgba(0, 217, 255, 0.3));
            transition: all 0.3s ease;
        }

        .piece-container:hover .piece-svg {
            filter: drop-shadow(0 0 25px rgba(0, 217, 255, 0.6));
        }

        .piece-container:hover .piece-svg path {
            stroke: #fff;
            stroke-width: 3;
        }

        .piece-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 150, 255, 0.1);
            clip-path: inherit;
            transition: all 0.3s ease;
        }

        .piece-container:hover .piece-bg {
            background: rgba(0, 217, 255, 0.3);
        }

        .piece-text {
            position: absolute;
            color: rgba(0, 217, 255, 0.9);
            font-size: 11px;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(0, 217, 255, 0.7);
            pointer-events: none;
            text-transform: uppercase;
            transition: all 0.3s ease;
            text-align: center;
            z-index: 2;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .piece-container:hover .piece-text {
            color: #fff;
            text-shadow: 0 0 15px #00d9ff;
        }

        /* POSICIONAMENTO DAS PE√áAS */
        .top-left {
            top: 0;
            left: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 100% 0, 70% 100%, 0 100%);
        }

        .top-center {
            top: 0;
            left: 30%;
            width: 40%;
            height: 40px;
            clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
        }

        .top-right {
            top: 0;
            right: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 30% 100%);
        }

        .mid-left {
            top: 80px;
            left: 0;
            width: 35px;
            height: calc(100% - 160px);
            clip-path: polygon(0 0, 100% 10%, 100% 90%, 0 100%);
        }

        .mid-right {
            top: 80px;
            right: 0;
            width: 35px;
            height: calc(100% - 160px);
            clip-path: polygon(0 10%, 100% 0, 100% 100%, 0 90%);
        }

        .bottom-left {
            bottom: 0;
            left: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(0 0, 70% 0, 100% 100%, 0 100%);
        }

        .bottom-center {
            bottom: 0;
            left: 30%;
            width: 40%;
            height: 50px;
            clip-path: polygon(10% 0, 90% 0, 100% 100%, 0 100%);
        }

        .bottom-right {
            bottom: 0;
            right: 0;
            width: 30%;
            height: 80px;
            clip-path: polygon(30% 0, 100% 0, 100% 100%, 0 100%);
        }

        /* POSICIONAMENTO DOS TEXTOS */
        .top-left .piece-text {
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .top-center .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            font-size: 10px;
            line-height: 1.1;
        }

        .top-right .piece-text {
            top: 12px;
            right: 50%;
            transform: translateX(50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .mid-left .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-90deg);
            white-space: nowrap;
            font-size: 9px;
            max-width: 200px;
        }

        .mid-right .piece-text {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(90deg);
            white-space: nowrap;
            font-size: 9px;
            max-width: 200px;
        }

        .bottom-left .piece-text {
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        .bottom-center .piece-text {
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            font-size: 10px;
            line-height: 1.1;
        }

        .bottom-right .piece-text {
            bottom: 12px;
            right: 50%;
            transform: translateX(50%);
            width: 85%;
            font-size: 9px;
            line-height: 1.1;
        }

        /* MENSAGEM CENTRAL */
        .hint {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #0af;
            text-align: center;
            z-index: 1;
            pointer-events: none;
            letter-spacing: 1px;
            font-size: 16px;
            width: 90%;
            max-width: 400px;
        }

        .hint span {
            font-size: 11px;
            opacity: 0.7;
            display: block;
            margin-top: 5px;
        }

        /* =========================================== */
        /* SISTEMA DE MODAIS */
        /* =========================================== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            padding: 15px;
        }

        .modal-content {
            background: linear-gradient(145deg, rgba(10, 20, 40, 0.95), rgba(5, 10, 20, 0.98));
            border: 2px solid #00d9ff;
            border-radius: 6px;
            width: 100%;
            max-width: 700px;
            padding: 25px 20px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.4);
            animation: modalAppear 0.3s ease-out;
            color: #fff;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(-30px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
            padding-bottom: 12px;
        }

        .modal-title {
            color: #00d9ff;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            letter-spacing: 1px;
            line-height: 1.3;
            width: calc(100% - 40px);
        }

        .modal-close {
            background: none;
            border: none;
            color: #00d9ff;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .modal-close:hover {
            color: #fff;
            background: rgba(0, 217, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            line-height: 1.5;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }

        .modal-section-title {
            color: #00d9ff;
            font-size: 14px;
            border-left: 3px solid #00d9ff;
            padding-left: 10px;
            margin: 20px 0 10px 0;
            text-transform: uppercase;
        }

        .modal-status {
            margin-top: 15px;
            padding: 12px;
            background: rgba(0, 217, 255, 0.1);
            border-left: 3px solid #00d9ff;
            border-radius: 4px;
        }

        .modal-status-title {
            color: #00d9ff;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .modal-list {
            list-style: none;
            padding: 0;
            margin: 12px 0;
        }

        .modal-list li {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            font-size: 13px;
        }

        .modal-list li:before {
            content: "‚ñ∫";
            color: #00d9ff;
            margin-right: 8px;
            font-size: 10px;
        }

        .modal-data-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .data-item {
            background: rgba(0, 217, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
            border: 1px solid rgba(0, 217, 255, 0.2);
        }

        .data-label {
            color: #00d9ff;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-value {
            font-size: 16px;
            font-weight: bold;
            margin-top: 5px;
        }

        /* =========================================== */
        /* SISTEMA DE VIL√ïES - COMPLETO */
        /* =========================================== */
        .villain-tracking-system {
            padding: 10px;
        }

        .villain-search-container {
            margin-bottom: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .villain-search {
            flex: 1;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00d9ff;
            color: #fff;
            border-radius: 4px;
            font-size: 12px;
        }

        .filter-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .filter-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        .villain-stats {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #888;
            margin-bottom: 15px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 14px;
            font-weight: bold;
            color: #00d9ff;
        }

        .villain-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .villain-card {
            background: rgba(0, 40, 60, 0.3);
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .villain-card:hover {
            border-color: #00d9ff;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
            transform: translateY(-3px);
        }

        .villain-card img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 2px solid #00d9ff;
            object-fit: cover;
            margin-bottom: 10px;
            background: #000;
            filter: drop-shadow(0 0 8px rgba(0, 217, 255, 0.5));
        }

        .villain-name {
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .villain-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            margin: 5px 0;
            display: inline-block;
        }

        .status-encarcerado {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .status-foragido {
            background: rgba(255, 0, 64, 0.2);
            color: #ff0040;
            border: 1px solid #ff0040;
        }

        .status-ativo {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
            border: 1px solid #ffaa00;
        }

        .status-planejando {
            background: rgba(187, 134, 252, 0.2);
            color: #bb86fc;
            border: 1px solid #bb86fc;
        }

        .status-negocios {
            background: rgba(3, 218, 197, 0.2);
            color: #03dac5;
            border: 1px solid #03dac5;
        }

        .villain-location {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .villain-threat {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            background: rgba(255, 0, 0, 0.3);
            color: #ff0000;
        }

        .villain-export {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: flex-end;
        }

        .export-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .export-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        /* MODAL DETALHADO DO VIL√ÉO */
        .villain-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 5, 10, 0.95);
            z-index: 10000;
            padding: 20px;
        }

        .villain-detail-content {
            background: rgba(10, 20, 40, 0.95);
            border: 2px solid #00d9ff;
            border-radius: 8px;
            max-width: 800px;
            margin: 50px auto;
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.3);
        }

        .villain-detail-img {
            width: 100%;
            border-radius: 8px;
            border: 2px solid #00d9ff;
            box-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }

        .villain-detail-info h3 {
            margin-top: 0;
            color: #00d9ff;
            border-bottom: 1px solid rgba(0, 217, 255, 0.3);
            padding-bottom: 10px;
        }

        .detail-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            margin-top: 10px;
        }

        .detail-value {
            font-size: 14px;
            color: #fff;
            margin-bottom: 15px;
        }

        .detail-threat {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(255, 0, 64, 0.2);
            color: #ff0040;
            border-radius: 4px;
            font-weight: bold;
        }

        .detail-desc {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            border-left: 3px solid #00d9ff;
            margin-top: 15px;
            font-size: 13px;
            line-height: 1.5;
        }

        .close-detail-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #00d9ff;
            font-size: 24px;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-detail-btn:hover {
            color: #fff;
            transform: rotate(90deg);
        }

        /* =========================================== */
        /* SISTEMA DE ARSENAL - COMPLETO */
        /* =========================================== */
        .equipment-tracking-system {
            padding: 10px;
        }

        .equipment-search {
            width: 100%;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00d9ff;
            color: #fff;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .equipment-card {
            background: rgba(0, 40, 60, 0.3);
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 120px;
            position: relative;
        }

        .equipment-card:hover {
            border-color: #00d9ff;
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
            transform: translateY(-3px);
        }

        .equipment-icon {
            font-size: 32px;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 8px rgba(0, 217, 255, 0.5));
        }

        .equipment-name {
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .equipment-value {
            font-size: 16px;
            color: #00d9ff;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 5px rgba(0, 217, 255, 0.5);
        }

        .equipment-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
        }

        .status-ok {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .status-warn {
            background: rgba(255, 170, 0, 0.2);
            color: #ffaa00;
            border: 1px solid #ffaa00;
        }

        .status-alert {
            background: rgba(255, 0, 64, 0.2);
            color: #ff0040;
            border: 1px solid #ff0040;
        }

        .progress-bar {
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .progress-ok { background: #00ff88; }
        .progress-warn { background: #ffaa00; }
        .progress-alert { background: #ff0040; }

        .equipment-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 5, 10, 0.95);
            z-index: 10000;
            padding: 20px;
        }

        .equipment-detail-content {
            background: rgba(10, 20, 40, 0.95);
            border: 2px solid #00d9ff;
            border-radius: 8px;
            max-width: 800px;
            margin: 50px auto;
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 217, 255, 0.3);
        }

        .equipment-detail-icon {
            font-size: 100px;
            text-align: center;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(0, 217, 255, 0.5));
        }

        .tactical-combos {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 20, 40, 0.5);
            border-radius: 4px;
            border: 1px solid rgba(0, 217, 255, 0.3);
        }

        .combo-item {
            margin: 8px 0;
            padding: 5px;
            border-left: 2px solid #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .diagnostic-panel {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid rgba(0, 217, 255, 0.3);
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }

        .diagnostic-output {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            color: #00ff88;
            white-space: pre-line;
            line-height: 1.5;
        }

        /* =========================================== */
        /* MAPA DE GOTHAM - COMPLETO */
        /* =========================================== */
        .hologram-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, rgba(0, 10, 20, 0.9), rgba(0, 20, 40, 0.9));
            border: 1px solid #00d9ff;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .hologram-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 217, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 217, 255, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
            pointer-events: none;
        }

        .city-districts {
            position: absolute;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 5px;
            padding: 10px;
        }

        .district {
            position: relative;
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            padding: 5px;
            overflow: hidden;
        }

        .district:hover {
            border-color: #00d9ff;
            box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            transform: scale(1.05);
            z-index: 2;
        }

        .data-point {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
            box-shadow: 0 0 10px currentColor;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .industrial-zone {
            grid-column: 1 / 2;
            grid-row: 2 / 4;
            background: rgba(255, 0, 64, 0.1);
        }

        .city-center {
            grid-column: 2 / 3;
            grid-row: 1 / 3;
            background: rgba(255, 170, 0, 0.1);
        }

        .suburbs {
            grid-column: 1 / 2;
            grid-row: 1 / 2;
            background: rgba(0, 255, 136, 0.1);
        }

        .port-area {
            grid-column: 2 / 3;
            grid-row: 3 / 4;
            background: rgba(255, 119, 0, 0.1);
        }

        .arkham {
            grid-column: 3 / 4;
            grid-row: 1 / 2;
            background: rgba(187, 134, 252, 0.1);
        }

        .wayne-tower {
            grid-column: 3 / 4;
            grid-row: 2 / 4;
            background: rgba(0, 217, 255, 0.1);
        }

        .district-detail {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid #00d9ff;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            display: none;
        }

        .district-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .district-alert {
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }

        .alert-red { background: rgba(255, 0, 64, 0.2); color: #ff0040; border: 1px solid #ff0040; }
        .alert-yellow { background: rgba(255, 170, 0, 0.2); color: #ffaa00; border: 1px solid #ffaa00; }
        .alert-green { background: rgba(0, 255, 136, 0.2); color: #00ff88; border: 1px solid #00ff88; }
        .alert-orange { background: rgba(255, 119, 0, 0.2); color: #ff7700; border: 1px solid #ff7700; }
        .alert-purple { background: rgba(187, 134, 252, 0.2); color: #bb86fc; border: 1px solid #bb86fc; }

        .map-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .map-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
            flex: 1;
            min-width: 120px;
        }

        .map-btn:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        .incident-timeline {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }

        .timeline-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 11px;
        }

        .timeline-time {
            color: #00d9ff;
            font-weight: bold;
        }

        .timeline-event {
            color: #fff;
        }

        .timeline-alert {
            color: #ff0040;
            font-weight: bold;
        }

        /* =========================================== */
        /* SISTEMA DO BATM√ìVEL - COMPLETO */
        /* =========================================== */
        .vehicle-control-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .vehicle-status-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .status-item {
            background: rgba(0, 217, 255, 0.05);
            padding: 15px;
            border-radius: 4px;
            border: 1px solid rgba(0, 217, 255, 0.2);
            text-align: center;
        }

        .status-label {
            color: #00d9ff;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
        }

        .vehicle-controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .control-btn {
            background: rgba(0, 217, 255, 0.1);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .control-btn:hover {
            background: rgba(0, 217, 255, 0.2);
            transform: translateY(-2px);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .navigation-map {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d9ff;
            border-radius: 4px;
            padding: 15px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .route-input {
            width: 100%;
            padding: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00d9ff;
            color: #fff;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .route-btn {
            background: rgba(0, 217, 255, 0.2);
            border: 1px solid #00d9ff;
            color: #00d9ff;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: 0.3s;
        }

        .route-btn:hover {
            background: rgba(0, 217, 255, 0.3);
        }

        .system-log {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d9ff;
            border-radius: 4px;
            padding: 15px;
        }

        .log-content {
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: #00ff88;
            background: #000;
            padding: 10px;
            border-radius: 4px;
            max-height: 100px;
            overflow-y: auto;
            line-height: 1.5;
        }

        /* =========================================== */
        /* ANIMA√á√ïES */
        /* =========================================== */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* =========================================== */
        /* RESPONSIVIDADE */
        /* =========================================== */
        @media (max-width: 768px) {
            .top-left, .top-right, .bottom-left, .bottom-right { width: 35%; }
            .top-center, .bottom-center { width: 30%; left: 35%; }
            .mid-left, .mid-right { width: 30px; }
            .piece-text { font-size: 8px !important; }
            .top-center .piece-text, .bottom-center .piece-text { font-size: 9px !important; }
            .hint { font-size: 14px; }
            .hint span { font-size: 10px; }
            .user-indicator { font-size: 10px; padding: 6px 12px; max-width: 150px; }
            .logout-btn { font-size: 8px; }
            .emergency-content { padding: 30px; max-width: 90%; }
            .emergency-title { font-size: 32px; }
            .emergency-subtitle { font-size: 18px; }
            .emergency-message { font-size: 16px; }
            .villain-grid { grid-template-columns: repeat(2, 1fr); }
            .equipment-grid { grid-template-columns: repeat(3, 1fr); }
            .vehicle-controls { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .auth-frame { padding: 25px 15px; }
            .bat-logo h1 { font-size: 10px; letter-spacing: 1px; }
            .bat-symbol { width: 50px; height: 25px; }
            .bat-symbol::before { font-size: 25px; }
            .form-input { font-size: 14px; padding: 10px 0; }
            .form-label { font-size: 12px; top: 10px; }
            .auth-button { padding: 10px; font-size: 12px; }
            .auth-switch { font-size: 11px; }
            .top-left, .top-right, .bottom-left, .bottom-right { width: 40%; height: 60px; }
            .top-center, .bottom-center { width: 20%; left: 40%; height: 35px; }
            .mid-left, .mid-right { width: 25px; top: 60px; height: calc(100% - 120px); }
            .piece-text { font-size: 7px !important; line-height: 1 !important; }
            .mid-left .piece-text, .mid-right .piece-text { font-size: 6px !important; }
            .hint { font-size: 12px; }
            .hint span { font-size: 9px; }
            .modal-content { padding: 20px 15px; }
            .modal-title { font-size: 16px; }
            .modal-body { font-size: 13px; }
            .modal-data-grid { grid-template-columns: 1fr; }
            .user-indicator { font-size: 9px; padding: 5px 10px; max-width: 120px; }
            .logout-btn { font-size: 7px; }
            .emergency-content { padding: 20px; border-width: 3px; }
            .emergency-title { font-size: 24px; letter-spacing: 2px; }
            .emergency-subtitle { font-size: 14px; }
            .emergency-message { font-size: 14px; }
            .emergency-countdown { font-size: 28px; }
            .alert-timer { bottom: 10px; right: 10px; padding: 8px 12px; font-size: 10px; }
            .villain-grid { grid-template-columns: 1fr; }
            .equipment-grid { grid-template-columns: repeat(2, 1fr); }
            .city-districts { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 320px) {
            .top-left, .top-right, .bottom-left, .bottom-right { height: 50px; }
            .top-center, .bottom-center { height: 30px; }
            .mid-left, .mid-right { top: 50px; height: calc(100% - 100px); width: 20px; }
            .piece-text { font-size: 6px !important; }
            .auth-frame { padding: 20px 12px; }
            .bat-logo h1 { font-size: 9px; }
            .bat-symbol { width: 40px; height: 20px; }
            .bat-symbol::before { font-size: 20px; }
            .form-input { font-size: 13px; }
            .form-label { font-size: 11px; }
            .hint { font-size: 11px; }
            .hint span { font-size: 8px; }
            .equipment-grid { grid-template-columns: 1fr; }
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .auth-screen { align-items: flex-start; padding-top: 20px; overflow-y: auto; }
            .auth-frame { margin-top: 20px; margin-bottom: 20px; max-width: 350px; }
            .bat-logo { margin-bottom: 20px; }
            .bat-logo h1 { margin-bottom: 10px; }
            .auth-form { gap: 15px; }
            .top-left, .top-right, .bottom-left, .bottom-right { height: 60px; }
            .top-center, .bottom-center { height: 30px; }
            .mid-left, .mid-right { top: 60px; height: calc(100% - 120px); }
            .piece-text { font-size: 8px !important; }
        }

        @media (min-height: 1000px) {
            .top-left, .top-right, .bottom-left, .bottom-right { height: 120px; }
            .mid-left, .mid-right { top: 120px; height: calc(100% - 240px); }
            .piece-text { font-size: 12px !important; }
            .hint { font-size: 20px; }
            .hint span { font-size: 14px; }
        }

        @supports (-webkit-touch-callout: none) {
            input, textarea { font-size: 16px !important; }
        }

        @media (prefers-color-scheme: dark) {
            .auth-frame { background: rgba(5, 10, 20, 0.97); }
            .modal-content { background: linear-gradient(145deg, rgba(5, 10, 20, 0.97), rgba(2, 5, 10, 0.99)); }
        }
    </style>
</head>

<body>
    <!-- Efeito de chuva Gotham -->
    <div class="rain-overlay"></div>

    <!-- Alerta de Emerg√™ncia Batman -->
    <div class="emergency-alert" id="emergencyAlert" onclick="dismissEmergency()">
        <div class="emergency-content">
            <h1 class="emergency-title">ALERTA BATMAN</h1>
            <div class="emergency-subtitle">N√çVEL DE AMEA√áA: M√ÅXIMO</div>
            <div class="emergency-message">
                ‚ö†Ô∏è ATEN√á√ÉO: ATIVIDADE CRIMINOSA DETECTADA<br>
                üî¥ REQUER INTERVEN√á√ÉO DO CAVALEIRO DAS TREVAS
            </div>
            <div class="emergency-countdown" id="emergencyCountdown">00:30</div>
            <div style="color: #ff8888; font-size: 14px;">CLIQUE PARA CONFIRMAR</div>
        </div>
    </div>

    <!-- Widget do Timer de Alerta -->
    <div class="alert-timer" id="alertTimer">
        <span class="alert-label">GOTHAM ALERT</span>
        <div class="timer-value" id="nextAlertTime">01:00</div>
        <button class="timer-skip" onclick="skipAlert()">X</button>
    </div>

    <!-- Tela de Login -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-frame">
            <div class="bat-logo">
                <h1>WAYNE ENTERPRISES</h1>
                <div class="bat-symbol"></div>
            </div>

            <div class="auth-error" id="authError">
                Acesso negado. Verifique suas credenciais.
            </div>

            <!-- Formul√°rio de Login -->
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <input type="text" class="form-input" id="loginUser" required>
                    <label class="form-label">USU√ÅRIO</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="loginPass" required>
                    <label class="form-label">SENHA</label>
                </div>

                <button type="submit" class="auth-button">ACESSAR SISTEMA</button>
            </form>

            <!-- Formul√°rio de Registro -->
            <form class="auth-form" id="registerForm" style="display: none;">
                <div class="form-group">
                    <input type="text" class="form-input" id="regUser" required>
                    <label class="form-label">NOVO USU√ÅRIO</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="regPass" required>
                    <label class="form-label">SENHA</label>
                </div>

                <div class="form-group">
                    <input type="password" class="form-input" id="regConfirm" required>
                    <label class="form-label">CONFIRMAR SENHA</label>
                </div>

                <button type="submit" class="auth-button">CRIAR CONTA</button>
            </form>

            <div class="auth-switch">
                <span id="switchText">N√£o tem acesso?</span>
                <a id="switchLink" onclick="toggleForms()">Solicitar credencial</a>
            </div>
        </div>
    </div>

    <!-- Indicador de Usu√°rio -->
    <div class="user-indicator" id="userIndicator" style="display: none;">
        <span id="userName">Operador</span>
        <button class="logout-btn" onclick="logout()">LOGOUT</button>
    </div>

    <!-- Interface HUD -->
    <div class="hud-frame" id="hudFrame">
        <!-- Pe√ßa superior esquerda -->
        <div class="piece-container top-left" onclick="openModal('batcave')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L70,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">BATCAVE SYSTEMS<br>CONTROL PANEL</div>
        </div>

        <!-- Pe√ßa superior central -->
        <div class="piece-container top-center" onclick="openModal('command')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L90,100 L10,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">CENTRAL DE COMANDO<br>WAYNE ENTERPRISES</div>
        </div>

        <!-- Pe√ßa superior direita -->
        <div class="piece-container top-right" onclick="openModal('surveillance')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,0 L100,100 L30,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">VIGIL√ÇNCIA GOTHAM<br>SURVEILLANCE GRID</div>
        </div>

        <!-- Pe√ßa lateral esquerda -->
        <div class="piece-container mid-left" onclick="openModal('weapons')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L100,10 L100,90 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">ARMAMENTOS<br>E EQUIPAMENTOS</div>
        </div>

        <!-- Pe√ßa lateral direita -->
        <div class="piece-container mid-right" onclick="openModal('vehicle')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,10 L100,0 L100,100 L0,90 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">CONTROLE DE<br>VE√çCULOS T√ÅTICOS</div>
        </div>

        <!-- Pe√ßa inferior esquerda -->
        <div class="piece-container bottom-left" onclick="openModal('database')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M0,0 L70,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">BANCO DE DADOS<br>CRIMINAL GOTHAM</div>
        </div>

        <!-- Pe√ßa inferior central -->
        <div class="piece-container bottom-center" onclick="openModal('gotham')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M10,0 L90,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">MAPA GOTHAM<br>INTERATIVE CITY MAP</div>
        </div>

        <!-- Pe√ßa inferior direita -->
        <div class="piece-container bottom-right" onclick="openModal('mission')">
            <svg class="piece-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path d="M30,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="#00d9ff" stroke-width="2" />
            </svg>
            <div class="piece-bg"></div>
            <div class="piece-text">MISS√ÉO ATIVA<br>LIVE OPERATION DATA</div>
        </div>

        <div class="hint">
            <img src="baixados.png" alt="Bat Logo"
                style="width: 180px; height: auto; display: block; margin: 0 auto 20px; filter: drop-shadow(0 0 15px rgba(0, 217, 255, 0.6)); max-width: 100%;">
            <strong style="display: block; font-size: 20px;">BAT SISTEMA ONLINE</strong>
            <span>Aguardando decis√£o do Cavaleiro das Trevas</span>
        </div>

        <!-- Modal Principal -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">Modal Title</h2>
                    <button class="modal-close" onclick="closeModal()">√ó</button>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Conte√∫do ser√° inserido via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Modal Detalhado do Vil√£o -->
        <div class="villain-detail-modal" id="villainDetailModal">
            <div class="villain-detail-content">
                <button class="close-detail-btn" onclick="closeVillainDetail()">√ó</button>
                <div id="villainDetailLeft"></div>
                <div id="villainDetailRight"></div>
            </div>
        </div>

        <!-- Modal Detalhado do Equipamento -->
        <div class="equipment-detail-modal" id="equipmentDetailModal" style="display: none;">
            <!-- Ser√° criado dinamicamente -->
        </div>
    </div>

    <script>
        // ===========================================
        // SISTEMA COMPLETO BAT-HUD v2.0
        // ===========================================

        // ===========================================
        // VARI√ÅVEIS GLOBAIS
        // ===========================================
        let secondsToNextAlert = 60;
        let emergencyCountdown = 30;
        let alertInterval;
        let isLoggedIn = false;
        let currentUser = null;
        let liveUpdateIntervals = {};
        let batmobileStatus = {
            speed: 0,
            fuel: 100,
            systems: 'ONLINE',
            destination: '',
            turbo: false,
            camouflage: false
        };

        // ===========================================
        // DADOS DO SISTEMA
        // ===========================================
        const users = JSON.parse(localStorage.getItem('wayne_users')) || [
            { username: 'batman', password: 'darkknight' },
            { username: 'robin', password: 'sidekick' },
            { username: 'alfred', password: 'pennyworth' },
            { username: 'gordon', password: 'commissioner' }
        ];

        const villains = [
            {
                name: "CORINGA",
                status: "ENCARCERADO",
                location: "MANIC√îMIO ARKHAM",
                img: "https://xsgames.co/randomusers/assets/avatars/male/40.jpg",
                alias: "Jack Napier",
                threat: "EXTREMO",
                desc: "Instabilidade mental total. Requer conten√ß√£o n√≠vel 5. Habilidades: Qu√≠mica, manipula√ß√£o, estrat√©gia ca√≥tica. √öltima atividade: 72h atr√°s.",
                lastSeen: "2024-01-15 22:30",
                crimes: ["Assalto a banco", "Sequestro", "Terrorismo qu√≠mico"]
            },
            {
                name: "BANE",
                status: "FORAGIDO",
                location: "SUBTERR√ÇNEO",
                img: "https://xsgames.co/randomusers/assets/avatars/male/22.jpg",
                alias: "Desconhecido",
                threat: "ALTO",
                desc: "Depend√™ncia de Veneno. For√ßa f√≠sica extrema e intelecto t√°tico. Habilidades: Combate corpo a corpo, estrat√©gia militar. Monitorar entrada de drogas em Gotham.",
                lastSeen: "2024-01-20 03:15",
                crimes: ["Tr√°fico de Veneno", "Extors√£o", "Destrui√ß√£o de propriedade"]
            },
            {
                name: "MULHER-GATO",
                status: "ATIVA",
                location: "ZONA LESTE ALTA",
                img: "https://xsgames.co/randomusers/assets/avatars/female/1.jpg",
                alias: "Selina Kyle",
                threat: "M√âDIO",
                desc: "Especialista em invas√£o e furto. Rastrear movimentos noturnos. Habilidades: Acrobacia, lockpicking, infiltra√ß√£o. Alvo: Joalherias de alto valor.",
                lastSeen: "2024-01-19 23:45",
                crimes: ["Furto qualificado", "Invas√£o de domic√≠lio", "Recepta√ß√£o"]
            },
            {
                name: "PING√úIM",
                status: "NEG√ìCIOS",
                location: "ICEBERG LOUNGE",
                img: "https://xsgames.co/randomusers/assets/avatars/male/65.jpg",
                alias: "Oswald Cobblepot",
                threat: "M√âDIO",
                desc: "Opera atrav√©s de frentes legais. Monitorar transa√ß√µes financeiras. Habilidades: Lavagem de dinheiro, tr√°fico de armas. Conex√µes: M√°fia russa.",
                lastSeen: "2024-01-20 20:00",
                crimes: ["Lavagem de dinheiro", "Tr√°fico de armas", "Extors√£o"]
            },
            {
                name: "CHARADA",
                status: "PLANEJANDO",
                location: "DESCONHECIDO",
                img: "https://xsgames.co/randomusers/assets/avatars/male/50.jpg",
                alias: "Edward Nigma",
                threat: "ALTO",
                desc: "Obsess√£o por enigmas. Poss√≠vel ataque cibern√©tico em andamento. Habilidades: Hacking, dispositivos complexos. Padr√£o: Deixa pistas deliberadamente.",
                lastSeen: "2024-01-18 14:20",
                crimes: ["Ataque cibern√©tico", "Sequestro", "Extors√£o"]
            },
            {
                name: "DUAS-CARAS",
                status: "ATIVO",
                location: "TRIBUNAL",
                img: "https://xsgames.co/randomusers/assets/avatars/male/12.jpg",
                alias: "Harvey Dent",
                threat: "ALTO",
                desc: "Dualidade psic√≥tica. Decis√µes baseadas em probabilidade de 50%. Habilidades: Estrat√©gia legal pervertida. Alvos: Figuras da justi√ßa.",
                lastSeen: "2024-01-19 19:30",
                crimes: ["Assalto", "Extors√£o", "Obstru√ß√£o da justi√ßa"]
            },
            {
                name: "ESPANTALHO",
                status: "ENCARCERADO",
                location: "ARKHAM",
                img: "https://xsgames.co/randomusers/assets/avatars/male/8.jpg",
                alias: "Jonathan Crane",
                threat: "ALTO",
                desc: "Uso de toxinas do medo. N√£o remover m√°scara de oxig√™nio. Habilidades: Psicologia, qu√≠mica avan√ßada. Experi√™ncias: Testes em civis.",
                lastSeen: "2024-01-10 11:00",
                crimes: ["Experimentos ilegais", "Terrorismo", "Sequestro"]
            },
            {
                name: "HARLEY QUINN",
                status: "ATIVA",
                location: "AMUSEMENT MILE",
                img: "https://xsgames.co/randomusers/assets/avatars/female/25.jpg",
                alias: "Harleen Quinzel",
                threat: "M√âDIO",
                desc: "Comportamento err√°tico. Alta agilidade e combate corpo a corpo. Habilidades: Gin√°stica, armas improvisadas. Estado mental: Impulsivo/imprevis√≠vel.",
                lastSeen: "2024-01-19 21:15",
                crimes: ["Assalto", "Vandalismo", "Obstru√ß√£o da justi√ßa"]
            }
        ];

        const arsenalData = [
            {
                id: 'batmobile',
                name: "BATM√ìVEL",
                status: "ONLINE",
                value: "100%",
                icon: "üöó",
                class: "status-ok",
                progress: 100,
                desc: "Tanque t√°tico urbano com propuls√£o a jato e modo de combate. Capacidade m√°xima: 300 km/h. Sistema de armas: Canh√£o de pulso, lan√ßa-ganchos, modo blindagem ativa.",
                vitals: [
                    "Combust√≠vel: 100%",
                    "Sistemas: ONLINE",
                    "Armamento: PRONTO",
                    "Defesa: ATIVA"
                ],
                combos: ["Bomba Fuma√ßa ‚Üí Distra√ß√£o", "Turbo ‚Üí Persegui√ß√£o r√°pida"]
            },
            {
                id: 'batarang',
                name: "BATARANGUES",
                status: "24/24",
                value: "24",
                icon: "ü¶á",
                class: "status-ok",
                progress: 100,
                desc: "Armas de arremesso equilibradas. Inclui vers√µes explosivas e el√©tricas. Material: Titanium-A√ßo. Precis√£o: 99.8% a 50m. Recarga autom√°tica no cinto.",
                vitals: [
                    "Quantidade: 24",
                    "Tipo: Padr√£o/Elt/Exp",
                    "Precis√£o: 99.8%",
                    "Recarga: PRONTA"
                ],
                combos: ["Bomba Fuma√ßa ‚Üí Ataque furtivo", "Gancho ‚Üí Ataque a√©reo"]
            },
            {
                id: 'grapnel',
                name: "ARMAS DE GANCHO",
                status: "PRONTO",
                value: "6",
                icon: "‚öì",
                class: "status-ok",
                progress: 100,
                desc: "Pistola de compress√£o para ascens√£o r√°pida e locomo√ß√£o urbana. Alcance: 80m. Velocidade: 15m/s. Sistema de retra√ß√£o magn√©tico.",
                vitals: [
                    "Ganchos: 6",
                    "Alcance: 80m",
                    "Press√£o: 300 PSI",
                    "Sistema: OPERACIONAL"
                ],
                combos: ["Vis√£o Detetive ‚Üí Reconhecimento", "Batarang ‚Üí Ataque combinado"]
            },
            {
                id: 'armor',
                name: "ARMADURA",
                status: "94%",
                value: "94%",
                icon: "üõ°Ô∏è",
                class: "status-ok",
                progress: 94,
                desc: "Pol√≠mero refor√ßado com Kevlar e placas de tit√¢nio. N√≠vel de prote√ß√£o: Balas .50 cal. Sistema de amortecimento de impacto. Camada externa: Absor√ß√£o radar.",
                vitals: [
                    "Integridade: 94%",
                    "Prote√ß√£o: N√çVEL 10",
                    "Mobilidade: 85%",
                    "Furtividade: ATIVA"
                ],
                combos: ["Todos os sistemas ‚Üí Defesa m√°xima"]
            },
            {
                id: 'explosive_gel',
                name: "GEL EXPLOSIVO",
                status: "3 CARGAS",
                value: "3",
                icon: "üß®",
                class: "status-warn",
                progress: 60,
                desc: "Aerosol explosivo para destrui√ß√£o estrutural ou incapacita√ß√£o. Detona√ß√£o remota ou por impacto. For√ßa: 5x TNT. Conten√ß√£o: Nanotecnologia est√°vel.",
                vitals: [
                    "Cargas: 3",
                    "For√ßa: 5x TNT",
                    "Estabilidade: 96%",
                    "Recarga: NECESS√ÅRIA"
                ],
                combos: ["Disruptor ‚Üí Desarme seguro", "Gancho ‚Üí Posicionamento t√°tico"]
            },
            {
                id: 'smoke_pellet',
                name: "BOMBA FUMA√áA",
                status: "5/5",
                value: "5",
                icon: "üí®",
                class: "status-ok",
                progress: 100,
                desc: "C√°psulas de oculta√ß√£o r√°pida para evas√£o e furtividade. Tempo de dispers√£o: 2s. Dura√ß√£o: 45s. √Årea de cobertura: 20m raio. Invis√≠vel a infravermelho.",
                vitals: [
                    "Unidades: 5",
                    "Dura√ß√£o: 45s",
                    "Cobertura: 20m",
                    "IR Camouflage: SIM"
                ],
                combos: ["Batarang ‚Üí Ataque furtivo", "Gancho ‚Üí Retirada r√°pida"]
            },
            {
                id: 'disruptor',
                name: "DISRUPTOR",
                status: "RECARR.",
                value: "60%",
                icon: "üî´",
                class: "status-alert",
                progress: 60,
                desc: "Dispositivo eletr√¥nico para desativar armas de fogo e minas remotamente. Alcance: 100m. Frequ√™ncia: 2.4-5.8 GHz. Sistema anti-interfer√™ncia.",
                vitals: [
                    "Bateria: 60%",
                    "Alcance: 100m",
                    "Frequ√™ncia: 5.8 GHz",
                    "Status: RECARGA NEC."
                ],
                combos: ["Gel Explosivo ‚Üí Desarme e destrui√ß√£o", "Armadura ‚Üí Prote√ß√£o durante uso"]
            },
            {
                id: 'vision',
                name: "VIS√ÉO DETETIVE",
                status: "ATIVO",
                value: "100%",
                icon: "üëÅÔ∏è",
                class: "status-ok",
                progress: 100,
                desc: "Scanner de radia√ß√£o infravermelha, t√©rmica e an√°lise qu√≠mica. Identifica√ß√£o biom√©trica. Rastreamento em 360¬∞. Banco de dados criminal integrado.",
                vitals: [
                    "Scanner: ATIVO",
                    "IR/T√©rmico: ONLINE",
                    "Biometria: 100%",
                    "Banco de Dados: SINC"
                ],
                combos: ["Todos os sistemas ‚Üí An√°lise completa", "Gancho ‚Üí Reconhecimento a√©reo"]
            }
        ];

        const gothamDistricts = {
            'industrial': {
                name: '√ÅREA INDUSTRIAL',
                alert: 'ALERTA VERMELHO',
                alertClass: 'alert-red',
                info: `
                    ‚Ä¢ Atividade criminal: ALTA<br>
                    ‚Ä¢ √öltimo incidente: Assalto √† carga 2h atr√°s<br>
                    ‚Ä¢ Presen√ßa policial: 65%<br>
                    ‚Ä¢ Vil√µes ativos: PING√úIM, DOIS-CARAS<br>
                    ‚Ä¢ Recomenda√ß√£o: PATRULHA INTENSIVA
                `,
                crimeRate: '87%',
                policePresence: '65%',
                incidents: [
                    { time: '02:30', event: 'Assalto √† carga', alert: 'ALTO' },
                    { time: '18:45', event: 'Vandalismo', alert: 'M√âDIO' },
                    { time: '22:10', event: 'Tr√°fico', alert: 'ALTO' }
                ]
            },
            'center': {
                name: 'CENTRO DA CIDADE',
                alert: 'ALERTA AMARELO',
                alertClass: 'alert-yellow',
                info: `
                    ‚Ä¢ Atividade criminal: MODERADA<br>
                    ‚Ä¢ √öltimo incidente: Furto em joalheria 4h atr√°s<br>
                    ‚Ä¢ Presen√ßa policial: 92%<br>
                    ‚Ä¢ Vil√µes ativos: MULHER-GATO<br>
                    ‚Ä¢ Recomenda√ß√£o: VIGIL√ÇNCIA NOTURNA
                `,
                crimeRate: '62%',
                policePresence: '92%',
                incidents: [
                    { time: '04:15', event: 'Furto em joalheria', alert: 'M√âDIO' },
                    { time: '14:30', event: 'Dist√∫rbio civil', alert: 'BAIXO' },
                    { time: '20:45', event: 'Tentativa de assalto', alert: 'M√âDIO' }
                ]
            },
            'suburbs': {
                name: 'SUB√öRBIOS',
                alert: 'ALERTA VERDE',
                alertClass: 'alert-green',
                info: `
                    ‚Ä¢ Atividade criminal: BAIXA<br>
                    ‚Ä¢ √öltimo incidente: Perturba√ß√£o da paz 8h atr√°s<br>
                    ‚Ä¢ Presen√ßa policial: 78%<br>
                    ‚Ä¢ Vil√µes ativos: NENHUM<br>
                    ‚Ä¢ Recomenda√ß√£o: PATRULHA ROTINEIRA
                `,
                crimeRate: '23%',
                policePresence: '78%',
                incidents: [
                    { time: '21:30', event: 'Perturba√ß√£o da paz', alert: 'BAIXO' },
                    { time: '15:45', event: 'Vandalismo menor', alert: 'BAIXO' }
                ]
            },
            'port': {
                name: 'PORTO DE GOTHAM',
                alert: 'ALERTA LARANJA',
                alertClass: 'alert-orange',
                info: `
                    ‚Ä¢ Atividade criminal: ELEVADA<br>
                    ‚Ä¢ √öltimo incidente: Contrabando detectado 1h atr√°s<br>
                    ‚Ä¢ Presen√ßa policial: 71%<br>
                    ‚Ä¢ Vil√µes ativos: BANE (SUSPEITA)<br>
                    ‚Ä¢ Recomenda√ß√£o: INVESTIGA√á√ÉO SUBMARINA
                `,
                crimeRate: '76%',
                policePresence: '71%',
                incidents: [
                    { time: '01:45', event: 'Contrabando detectado', alert: 'ALTO' },
                    { time: '12:20', event: 'Atividade suspeita', alert: 'M√âDIO' },
                    { time: '19:55', event: 'Tr√°fico de armas', alert: 'ALTO' }
                ]
            },
            'arkham': {
                name: 'MANIC√îMIO ARKHAM',
                alert: 'ALERTA ROXO',
                alertClass: 'alert-purple',
                info: `
                    ‚Ä¢ Status: M√ÅXIMA SEGURAN√áA<br>
                    ‚Ä¢ Prisioneiros: 42 (incluindo CORINGA, ESPANTALHO)<br>
                    ‚Ä¢ Guardas: 100% DISPON√çVEL<br>
                    ‚Ä¢ √öltima inspe√ß√£o: ${new Date().toLocaleDateString('pt-BR')}<br>
                    ‚Ä¢ Recomenda√ß√£o: MONITORAMENTO 24/7
                `,
                crimeRate: '99%',
                policePresence: '100%',
                incidents: [
                    { time: '10:00', event: 'Inspe√ß√£o de seguran√ßa', alert: 'ROTINA' },
                    { time: '16:30', event: 'Transfer√™ncia de prisioneiro', alert: 'ALTO' }
                ]
            },
            'wayne': {
                name: 'WAYNE TOWER',
                alert: 'SEGURO',
                alertClass: 'alert-green',
                info: `
                    ‚Ä¢ Status: FORTIFICADO<br>
                    ‚Ä¢ Sistemas de seguran√ßa: ATIVOS<br>
                    ‚Ä¢ Acesso: RESTRITO N√çVEL 10<br>
                    ‚Ä¢ √öltima varredura: AGORA<br>
                    ‚Ä¢ Bat-Sinal: OPERACIONAL
                `,
                crimeRate: '1%',
                policePresence: '100%',
                incidents: [
                    { time: '00:00', event: 'Varredura de seguran√ßa', alert: 'ROTINA' },
                    { time: '12:00', event: 'Teste do Bat-Sinal', alert: 'TESTE' }
                ]
            }
        };

        // ===========================================
        // SISTEMA DE ALERTA
        // ===========================================
        function startAlertSystem() {
            setInterval(() => {
                if (secondsToNextAlert > 0) {
                    secondsToNextAlert--;
                    updateTimerDisplay();
                } else {
                    if (document.getElementById('emergencyAlert').style.display !== 'flex') {
                        triggerEmergency();
                    }
                }
            }, 1000);
            updateTimerVisibility();
        }

        function updateTimerDisplay() {
            const mins = Math.floor(secondsToNextAlert / 60);
            const secs = secondsToNextAlert % 60;
            document.getElementById('nextAlertTime').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimerVisibility() {
            const alertTimer = document.getElementById('alertTimer');
            alertTimer.style.display = isLoggedIn ? 'flex' : 'none';
        }

        function triggerEmergency() {
            const alertDiv = document.getElementById('emergencyAlert');
            alertDiv.style.display = 'flex';
            emergencyCountdown = 30;
            document.getElementById('emergencyCountdown').textContent = "00:30";

            alertInterval = setInterval(() => {
                emergencyCountdown--;
                document.getElementById('emergencyCountdown').textContent =
                    `00:${emergencyCountdown.toString().padStart(2, '0')}`;
                if (emergencyCountdown <= 0) dismissEmergency();
            }, 1000);
            playSound('error');
        }

        function dismissEmergency() {
            clearInterval(alertInterval);
            document.getElementById('emergencyAlert').style.display = 'none';
            secondsToNextAlert = 60;
            updateTimerDisplay();
            playSound('success');
        }

        function skipAlert() {
            secondsToNextAlert = 0;
            playSound('click');
        }

        // ===========================================
        // SISTEMA DE AUTENTICA√á√ÉO
        // ===========================================
        const authScreen = document.getElementById('authScreen');
        const hudFrame = document.getElementById('hudFrame');
        const userIndicator = document.getElementById('userIndicator');
        const userName = document.getElementById('userName');
        const authError = document.getElementById('authError');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const switchText = document.getElementById('switchText');
        const switchLink = document.getElementById('switchLink');

        // Verificar se j√° est√° logado
        const savedUser = localStorage.getItem('wayne_current_user');
        if (savedUser) {
            currentUser = savedUser;
            isLoggedIn = true;
            showHUD();
        }

        // Iniciar sistemas
        startAlertSystem();
        updateTimerDisplay();

        function toggleForms() {
            if (loginForm.style.display !== 'none') {
                loginForm.style.display = 'none';
                registerForm.style.display = 'flex';
                switchText.textContent = 'J√° tem acesso?';
                switchLink.textContent = 'Fazer login';
            } else {
                registerForm.style.display = 'none';
                loginForm.style.display = 'flex';
                switchText.textContent = 'N√£o tem acesso?';
                switchLink.textContent = 'Solicitar credencial';
            }
            authError.style.display = 'none';
            playSound('click');
        }

        // Login
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('loginUser').value;
            const password = document.getElementById('loginPass').value;

            const user = users.find(u =>
                u.username === username && u.password === password
            );

            if (user) {
                currentUser = username;
                localStorage.setItem('wayne_current_user', username);
                isLoggedIn = true;
                showHUD();
                playSound('success');
            } else {
                showError('Credenciais inv√°lidas');
                playSound('error');
            }
        });

        // Registro
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('regUser').value;
            const password = document.getElementById('regPass').value;
            const confirm = document.getElementById('regConfirm').value;

            if (username.length < 3) {
                showError('Usu√°rio deve ter pelo menos 3 caracteres');
                return;
            }

            if (password.length < 4) {
                showError('Senha deve ter pelo menos 4 caracteres');
                return;
            }

            if (password !== confirm) {
                showError('Senhas n√£o coincidem');
                return;
            }

            if (users.find(u => u.username === username)) {
                showError('Usu√°rio j√° existe');
                return;
            }

            users.push({ username, password });
            localStorage.setItem('wayne_users', JSON.stringify(users));

            currentUser = username;
            localStorage.setItem('wayne_current_user', username);
            isLoggedIn = true;

            showHUD();
            playSound('success');
        });

        function showHUD() {
            authScreen.style.display = 'none';
            hudFrame.style.display = 'block';
            userIndicator.style.display = 'block';
            userName.textContent = currentUser.toUpperCase();
            updateTimerVisibility();

            // Efeito de entrada
            const pieces = document.querySelectorAll('.piece-container');
            pieces.forEach((piece, index) => {
                piece.style.opacity = '0';
                piece.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    piece.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    piece.style.opacity = '1';
                    piece.style.transform = 'translateY(0)';
                }, index * 100);
            });

            adjustSidePiecesHeight();
            window.addEventListener('resize', adjustSidePiecesHeight);
        }

        function adjustSidePiecesHeight() {
            setTimeout(() => {
                const topLeft = document.querySelector('.top-left');
                const bottomLeft = document.querySelector('.bottom-left');

                if (topLeft && bottomLeft && topLeft.offsetHeight > 0) {
                    const topHeight = topLeft.offsetHeight;
                    const bottomHeight = bottomLeft.offsetHeight;
                    const totalHeight = window.innerHeight;

                    const midLeft = document.querySelector('.mid-left');
                    const midRight = document.querySelector('.mid-right');

                    if (midLeft && midRight) {
                        const newHeight = totalHeight - topHeight - bottomHeight;
                        if (newHeight > 0) {
                            midLeft.style.height = `${newHeight}px`;
                            midRight.style.height = `${newHeight}px`;
                        }
                    }
                }
            }, 100);
        }

        function logout() {
            playSound('logout');
            const pieces = document.querySelectorAll('.piece-container');
            pieces.forEach((piece, index) => {
                setTimeout(() => {
                    piece.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    piece.style.opacity = '0';
                    piece.style.transform = 'translateY(20px)';
                }, index * 50);
            });

            setTimeout(() => {
                currentUser = null;
                isLoggedIn = false;
                localStorage.removeItem('wayne_current_user');
                hudFrame.style.display = 'none';
                userIndicator.style.display = 'none';
                authScreen.style.display = 'flex';
                loginForm.style.display = 'flex';
                registerForm.style.display = 'none';
                switchText.textContent = 'N√£o tem acesso?';
                switchLink.textContent = 'Solicitar credencial';
                authError.style.display = 'none';
                updateTimerVisibility();

                // Limpar formul√°rios
                document.getElementById('loginUser').value = '';
                document.getElementById('loginPass').value = '';
                document.getElementById('regUser').value = '';
                document.getElementById('regPass').value = '';
                document.getElementById('regConfirm').value = '';

                // Parar atualiza√ß√µes em tempo real
                Object.keys(liveUpdateIntervals).forEach(key => {
                    clearInterval(liveUpdateIntervals[key]);
                });
                liveUpdateIntervals = {};

                window.removeEventListener('resize', adjustSidePiecesHeight);
            }, 300);
        }

        function showError(message) {
            authError.textContent = message;
            authError.style.display = 'block';
            const currentForm = loginForm.style.display !== 'none' ? loginForm : registerForm;
            currentForm.style.animation = 'none';
            setTimeout(() => {
                currentForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    currentForm.style.animation = '';
                }, 500);
            }, 10);
        }

        // ===========================================
        // SISTEMA DE MODAIS
        // ===========================================
        const modalContents = {
            'batcave': {
                title: 'BATCAVE SYSTEMS CONTROL',
                content: `
                    <p>Sistema principal da Batcaver. Todas as fun√ß√µes operacionais.</p>
                    <div class="modal-status">
                        <div class="modal-status-title">STATUS DA BATCAVE</div>
                        <p>Sistema: <span style="color:#00ff88;">OPERACIONAL</span></p>
                        <p>√öltima atualiza√ß√£o: ${new Date().toLocaleString('pt-BR')}</p>
                    </div>
                    <ul class="modal-list">
                        <li>Controle ambiental: 100%</li>
                        <li>Sistemas de defesa: ATIVOS</li>
                        <li>Laborat√≥rio: OPERACIONAL</li>
                        <li>Garagem: PRONTA</li>
                        <li>Arsenal: 100%</li>
                        <li>Computador principal: ONLINE</li>
                    </ul>
                `
            },
            'command': {
                title: 'CENTRAL DE COMANDO WAYNE ENTERPRISES',
                content: `
                    <p>Hub central de controle do sistema Batman.</p>
                    <div class="modal-data-grid">
                        <div class="data-item">
                            <div class="data-label">Conex√µes</div>
                            <div class="data-value">24</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Status</div>
                            <div class="data-value">ONLINE</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Lat√™ncia</div>
                            <div class="data-value">8ms</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Acesso</div>
                            <div class="data-value">LEVEL 10</div>
                        </div>
                    </div>
                    <div class="modal-status">
                        <div class="modal-status-title">COMUNICA√á√ïES</div>
                        <p>Todas as frequ√™ncias est√£o operacionais e seguras. Sistema criptografado.</p>
                    </div>
                `
            },
            'surveillance': {
                title: 'VIGIL√ÇNCIA GOTHAM - SURVEILLANCE GRID',
                content: `
                    <p>Monitoramento ativo da cidade de Gotham.</p>
                    <div class="modal-status">
                        <div class="modal-status-title">DADOS DE VIGIL√ÇNCIA</div>
                        <p>Sistema: <span style="color:#00ff88;">OPERACIONAL</span></p>
                        <p>Cobertura total: 92%</p>
                    </div>
                    <ul class="modal-list">
                        <li>C√¢meras ativas: 147</li>
                        <li>An√°lise facial: OPERACIONAL</li>
                        <li>Rastreamento veicular: ATIVO</li>
                        <li>Alertas ativos: 3</li>
                        <li>Setor A: 100% COBERTURA</li>
                        <li>Setor B: 85% COBERTURA</li>
                        <li>Setor C: 92% COBERTURA</li>
                        <li>Centro: 100% COBERTURA</li>
                    </ul>
                `
            },
            'weapons': {
                title: 'üõ°Ô∏è ARSENAL BATMAN - SISTEMA v5.0',
                content: `
                    <div class="equipment-tracking-system">
                        <p style="margin-bottom:15px; font-size:12px; color:#888; font-family:'Courier New', monospace;">
                            PROTOCOLO: CAVALEIRO DAS TREVAS | SINCRONIZA√á√ÉO: ${new Date().toLocaleTimeString('pt-BR')}
                        </p>
                        
                        <input type="text" class="equipment-search" id="equipmentSearch" 
                               placeholder="üîç Buscar equipamento..." onkeyup="filterEquipment()">
                        
                        <div class="equipment-grid" id="equipmentGrid"></div>
                        
                        <div class="tactical-combos">
                            <div class="modal-section-title">‚ö° COMBINA√á√ïES T√ÅTICAS</div>
                            <div class="combo-item">Batarang + Bomba Fuma√ßa = Ataque Furtivo</div>
                            <div class="combo-item">Gancho + Vis√£o Detetive = Reconhecimento A√©reo</div>
                            <div class="combo-item">Gel Explosivo + Disruptor = Desarme Seguro</div>
                        </div>
                        
                        <div class="diagnostic-panel">
                            <div class="modal-status-title">üß† DIAGN√ìSTICO DO SISTEMA</div>
                            <div id="equipmentDiagnostic" class="diagnostic-output">
                                > SISTEMA DE ARSENAL ONLINE<br>
                                > AGUARDANDO SELE√á√ÉO DE EQUIPAMENTO<br>
                                > STATUS GERAL: OPERACIONAL
                            </div>
                        </div>
                        
                        <div style="display:flex; justify-content:space-between; margin-top:15px; font-size:10px;">
                            <div><span>BATIMENTOS:</span> <span class="status-ok">72 BPM</span></div>
                            <div><span>COMUNICA√á√ÉO:</span> <span class="status-ok">ONLINE</span></div>
                            <div><span>ADRENALINA:</span> <span class="status-warn">45%</span></div>
                        </div>
                    </div>
                `
            },
            'vehicle': {
                title: 'üöó CONTROLE DO BATM√ìVEL',
                content: `
                    <div class="vehicle-control-panel">
                        <!-- Status Principal -->
                        <div class="vehicle-status-grid">
                            <div class="status-item">
                                <div class="status-label">VELOCIDADE</div>
                                <div class="status-value" id="batSpeed">0 km/h</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">COMBUST√çVEL</div>
                                <div class="status-value" style="color:#00ff88;" id="batFuel">100%</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">SISTEMAS</div>
                                <div class="status-value" style="color:#00ff88;" id="batSystems">ONLINE</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">DESTINO</div>
                                <div class="status-value" id="batDestination">--</div>
                            </div>
                        </div>
                        
                        <!-- Controles -->
                        <div class="vehicle-controls">
                            <button class="control-btn" onclick="startBatmobile()">‚ñ∂ INICIAR</button>
                            <button class="control-btn" onclick="stopBatmobile()">‚èπ PARAR</button>
                            <button class="control-btn" onclick="activateTurbo()">üí® TURBO</button>
                            <button class="control-btn" onclick="toggleCamouflage()">üëª CAMUFLAGEM</button>
                            <button class="control-btn" onclick="activateWeapons()">üî´ ARMAS</button>
                            <button class="control-btn" onclick="activateDefense()">üõ°Ô∏è DEFESA</button>
                        </div>
                        
                        <!-- Navega√ß√£o -->
                        <div class="navigation-map">
                            <input type="text" class="route-input" id="routeInput" placeholder="Digite o destino...">
                            <button class="route-btn" onclick="setDestination()">üó∫Ô∏è DEFINIR ROTA</button>
                            <button class="route-btn" onclick="calculateFastestRoute()">üöÄ ROTA MAIS R√ÅPIDA</button>
                            <div style="margin-top:10px; font-size:10px; color:#888;">
                                Dist√¢ncia estimada: <span id="routeDistance">--</span> | Tempo: <span id="routeTime">--</span>
                            </div>
                        </div>
                        
                        <!-- Log do Sistema -->
                        <div class="system-log">
                            <div class="modal-status-title">üìù LOG DO SISTEMA</div>
                            <div id="batLog" class="log-content">
                                > ${new Date().toLocaleTimeString()}: Sistema iniciado<br>
                                > Todos os sistemas operacionais<br>
                                > Aguardando destino...
                            </div>
                        </div>
                    </div>
                `
            },
            'database': {
                title: 'BANCO DE DADOS CRIMINAL GOTHAM',
                content: `
                    <p>Registros criminais de Gotham City.</p>
                    <div class="modal-data-grid">
                        <div class="data-item">
                            <div class="data-label">Registros</div>
                            <div class="data-value">2,847</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Pr√≥curados</div>
                            <div class="data-value">23</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Casos</div>
                            <div class="data-value">7</div>
                        </div>
                        <div class="data-item">
                            <div class="data-label">Sincroniza√ß√£o</div>
                            <div class="data-value">AGORA</div>
                        </div>
                    </div>
                    <div class="modal-status">
                        <div class="modal-status-title">√öLTIMA ATUALIZA√á√ÉO</div>
                        <p>Dados atualizados em tempo real via rede GCPD.</p>
                        <p>Conex√£o: <span style="color:#00ff88;">EST√ÅVEL</span></p>
                    </div>
                `
            },
            'gotham': {
                title: 'ü¶á MAPA HOLOGR√ÅFICO GOTHAM CITY 3D',
                content: `
                    <div style="margin-bottom: 15px; font-size: 12px; color: #888; font-family: 'Courier New', monospace;">
                        SISTEMA: BAT-MAP v3.2 | ATUALIZADO: ${new Date().toLocaleString('pt-BR')}
                    </div>
                    
                    <!-- Mapa Hologr√°fico -->
                    <div class="hologram-container">
                        <div class="hologram-grid" id="hologramGrid"></div>
                        <div class="city-districts" id="gothamMap">
                            <div class="district industrial-zone" onclick="showDistrictDetail('industrial')">
                                <div class="data-point" style="top: 30%; left: 40%; color: #ff0040;"></div>
                                <div class="data-point" style="top: 60%; left: 70%; color: #ff0040;"></div>
                                √ÅREA INDUSTRIAL
                            </div>
                            <div class="district city-center" onclick="showDistrictDetail('center')">
                                <div class="data-point" style="top: 50%; left: 50%; color: #ffaa00;"></div>
                                CENTRO
                            </div>
                            <div class="district suburbs" onclick="showDistrictDetail('suburbs')">
                                <div class="data-point" style="top: 20%; left: 30%; color: #00ff88;"></div>
                                SUB√öRBIOS
                            </div>
                            <div class="district port-area" onclick="showDistrictDetail('port')">
                                <div class="data-point" style="top: 40%; left: 60%; color: #ff7700;"></div>
                                PORTO
                            </div>
                            <div class="district arkham" onclick="showDistrictDetail('arkham')">
                                <div class="data-point" style="top: 70%; left: 20%; color: #bb86fc;"></div>
                                ARKHAM
                            </div>
                            <div class="district wayne-tower" onclick="showDistrictDetail('wayne')">
                                <div class="data-point" style="top: 40%; left: 40%; color: #00d9ff;"></div>
                                WAYNE TOWER
                            </div>
                        </div>
                    </div>
                    
                    <!-- Controles do Mapa -->
                    <div class="map-controls">
                        <button class="map-btn" onclick="rotateMap('left')">‚Üª ROTACIONAR ESQ</button>
                        <button class="map-btn" onclick="rotateMap('right')">‚Ü∫ ROTACIONAR DIR</button>
                        <button class="map-btn" onclick="toggleGrid()">üåê GRADE ON/OFF</button>
                        <button class="map-btn" onclick="zoomIn()">üîç ZOOM IN</button>
                        <button class="map-btn" onclick="zoomOut()">üîé ZOOM OUT</button>
                        <button class="map-btn" onclick="scanForActivity()">üì° ESCANEAR</button>
                        <button class="map-btn" onclick="resetMap()">üîÑ RESETAR</button>
                        <button class="map-btn" onclick="exportMap()">üíæ EXPORTAR</button>
                    </div>
                    
                    <!-- Detalhes do Distrito -->
                    <div class="district-detail" id="districtDetail" style="display:none;">
                        <div class="district-header">
                            <h3 style="color: #00d9ff; margin: 0;" id="districtTitle">DISTRITO</h3>
                            <span class="district-alert" id="districtAlert">ALERTA</span>
                        </div>
                        <div id="districtInfo" style="font-size: 11px; line-height: 1.5;">
                            Selecione uma zona no mapa para ver os detalhes.
                        </div>
                        <div class="incident-timeline" id="incidentTimeline" style="display:none; margin-top:10px;">
                            <div class="modal-section-title">üìÖ TIMELINE DE INCIDENTES</div>
                            <div id="timelineContent"></div>
                        </div>
                    </div>
                    
                    <!-- Status da Cidade -->
                    <div class="modal-status" style="margin-top: 15px;">
                        <div class="modal-status-title">üìä STATUS DA CIDADE EM TEMPO REAL</div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px;">
                            <div><span style="color: #aaa;">ZONAS DE RISCO:</span> <span style="color: #ff0040; font-weight: bold;">5</span></div>
                            <div><span style="color: #aaa;">POL√çCIA ATIVA:</span> <span style="color: #00ff88; font-weight: bold;">87%</span></div>
                            <div><span style="color: #aaa;">EMERG√äNCIAS:</span> <span style="color: #ffaa00; font-weight: bold;">12</span></div>
                            <div><span style="color: #aaa;">TR√ÅFEGO:</span> <span style="color: #00d9ff; font-weight: bold;">MODERADO</span></div>
                            <div><span style="color: #aaa;">TEMPO:</span> <span style="color: #bb86fc; font-weight: bold;">CHUVOSO</span></div>
                            <div><span style="color: #aaa;">VISIBILIDADE:</span> <span style="color: #ff7700; font-weight: bold;">BAIXA</span></div>
                        </div>
                    </div>
                `
            },
            'mission': {
                title: '‚ò† RASTREAMENTO DE VIL√ïES ATIVOS',
                content: `
                    <div class="villain-tracking-system">
                        <!-- Barra de Busca e Filtros -->
                        <div class="villain-search-container">
                            <input type="text" class="villain-search" id="villainSearch" 
                                   placeholder="üîç Buscar vil√£o..." onkeyup="filterVillains()">
                            <button class="filter-btn" onclick="filterByStatus('all')">TODOS</button>
                            <button class="filter-btn" onclick="filterByStatus('foragido')">FORAGIDOS</button>
                            <button class="filter-btn" onclick="filterByStatus('ativo')">ATIVOS</button>
                        </div>
                        
                        <!-- Estat√≠sticas -->
                        <div class="villain-stats">
                            <div class="stat-item">
                                <div class="stat-label">TOTAL</div>
                                <div class="stat-value">${villains.length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">ATIVOS</div>
                                <div class="stat-value" style="color:#ffaa00;">${villains.filter(v => v.status.includes('ATIV')).length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">FORAGIDOS</div>
                                <div class="stat-value" style="color:#ff0040;">${villains.filter(v => v.status === 'FORAGIDO').length}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">PRESOS</div>
                                <div class="stat-value" style="color:#00ff88;">${villains.filter(v => v.status === 'ENCARCERADO').length}</div>
                            </div>
                        </div>
                        
                        <!-- Grid de Vil√µes -->
                        <div class="villain-grid" id="villainGrid"></div>
                        
                        <!-- Exporta√ß√£o -->
                        <div class="villain-export">
                            <button class="export-btn" onclick="exportVillainsPDF()">üìÑ PDF</button>
                            <button class="export-btn" onclick="exportVillainsCSV()">üìä CSV</button>
                            <button class="export-btn" onclick="printVillains()">üñ®Ô∏è IMPRIMIR</button>
                            <button class="export-btn" onclick="refreshVillains()">üîÑ ATUALIZAR</button>
                        </div>
                        
                        <!-- Atualiza√ß√£o em Tempo Real -->
                        <div style="font-size:10px; color:#888; text-align:center; margin-top:10px;">
                            ‚ö° ATUALIZA√á√ÉO AUTOM√ÅTICA: <span id="villainUpdateTime">${new Date().toLocaleTimeString()}</span>
                        </div>
                    </div>
                `
            }
        };

        function openModal(type) {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            if (modalContents[type]) {
                title.textContent = modalContents[type].title;
                body.innerHTML = modalContents[type].content;

                // Carregar conte√∫do espec√≠fico
                switch(type) {
                    case 'mission':
                        setTimeout(() => {
                            loadVillains();
                            startVillainUpdates();
                        }, 10);
                        break;
                    case 'weapons':
                        setTimeout(() => {
                            loadEquipment();
                        }, 10);
                        break;
                    case 'gotham':
                        setTimeout(() => {
                            initGothamMap();
                        }, 10);
                        break;
                    case 'vehicle':
                        setTimeout(() => {
                            updateBatmobileDisplay();
                            startBatmobileUpdates();
                        }, 10);
                        break;
                }

                modal.style.display = 'flex';
                playSound('click');
            }
        }

        function closeModal() {
            const modal = document.getElementById('modalOverlay');
            modal.style.display = 'none';
            
            // Parar atualiza√ß√µes em tempo real quando o modal fecha
            if (liveUpdateIntervals['villains']) {
                clearInterval(liveUpdateIntervals['villains']);
                delete liveUpdateIntervals['villains'];
            }
            if (liveUpdateIntervals['batmobile']) {
                clearInterval(liveUpdateIntervals['batmobile']);
                delete liveUpdateIntervals['batmobile'];
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const villainModal = document.getElementById('villainDetailModal');
                const equipModal = document.getElementById('equipmentDetailModal');
                
                if (villainModal.style.display === 'block') {
                    closeVillainDetail();
                } else if (equipModal.style.display === 'block') {
                    closeEquipmentDetail();
                } else {
                    closeModal();
                }
            }
        });

        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target === document.getElementById('modalOverlay')) {
                closeModal();
            }
        });

        // ===========================================
        // SISTEMA DE VIL√ïES - FUN√á√ïES
        // ===========================================
        let filteredVillains = [...villains];

        function loadVillains() {
            const grid = document.getElementById('villainGrid');
            if (!grid) return;

            grid.innerHTML = '';
            filteredVillains.forEach((v, index) => {
                const card = document.createElement('div');
                card.className = 'villain-card';
                card.onclick = () => openVillainDetail(index);

                let statusClass = 'status-';
                if (v.status === 'ENCARCERADO') statusClass += 'encarcerado';
                else if (v.status === 'FORAGIDO') statusClass += 'foragido';
                else if (v.status === 'ATIVA' || v.status === 'ATIVO') statusClass += 'ativo';
                else if (v.status === 'PLANEJANDO') statusClass += 'planejando';
                else if (v.status === 'NEG√ìCIOS') statusClass += 'negocios';

                let threatColor = '#ff0040';
                if (v.threat === 'M√âDIO') threatColor = '#ffaa00';
                else if (v.threat === 'ALTO') threatColor = '#ff7700';

                card.innerHTML = `
                    <div class="villain-threat" style="background: ${threatColor}20; color: ${threatColor};">${v.threat}</div>
                    <img src="${v.img}" alt="${v.name}" onerror="this.onerror=null; this.src='https://via.placeholder.com/80/000000/00d9ff?text=${v.name.charAt(0)}'">
                    <div class="villain-name">${v.name}</div>
                    <div class="villain-status ${statusClass}">${v.status}</div>
                    <div class="villain-location">${v.location}</div>
                    <div style="font-size:9px; color:#888; margin-top:5px;">Visto: ${v.lastSeen.split(' ')[1]}</div>
                `;
                grid.appendChild(card);
            });
        }

        function filterVillains() {
            const search = document.getElementById('villainSearch').value.toLowerCase();
            filteredVillains = villains.filter(v => 
                v.name.toLowerCase().includes(search) ||
                v.alias.toLowerCase().includes(search) ||
                v.location.toLowerCase().includes(search)
            );
            loadVillains();
        }

        function filterByStatus(status) {
            if (status === 'all') {
                filteredVillains = [...villains];
            } else if (status === 'foragido') {
                filteredVillains = villains.filter(v => v.status === 'FORAGIDO');
            } else if (status === 'ativo') {
                filteredVillains = villains.filter(v => v.status.includes('ATIV'));
            }
            loadVillains();
        }

        function startVillainUpdates() {
            if (liveUpdateIntervals['villains']) clearInterval(liveUpdateIntervals['villains']);
            
            liveUpdateIntervals['villains'] = setInterval(() => {
                // Atualizar tempo da √∫ltima atualiza√ß√£o
                const updateTime = document.getElementById('villainUpdateTime');
                if (updateTime) {
                    updateTime.textContent = new Date().toLocaleTimeString();
                }
                
                // Simular mudan√ßa aleat√≥ria de status (10% de chance)
                if (Math.random() < 0.1) {
                    const randomIndex = Math.floor(Math.random() * villains.length);
                    if (villains[randomIndex].status !== 'ENCARCERADO') {
                        const statuses = ['ATIVO', 'FORAGIDO', 'PLANEJANDO'];
                        villains[randomIndex].status = statuses[Math.floor(Math.random() * statuses.length)];
                        loadVillains();
                    }
                }
            }, 30000); // Atualizar a cada 30 segundos
        }

        function openVillainDetail(index) {
            const v = villains[index];
            const modal = document.getElementById('villainDetailModal');
            const left = document.getElementById('villainDetailLeft');
            const right = document.getElementById('villainDetailRight');

            if (!modal || !left || !right) return;

            let statusClass = 'status-';
            if (v.status === 'ENCARCERADO') statusClass += 'encarcerado';
            else if (v.status === 'FORAGIDO') statusClass += 'foragido';
            else if (v.status === 'ATIVA' || v.status === 'ATIVO') statusClass += 'ativo';
            else if (v.status === 'PLANEJANDO') statusClass += 'planejando';
            else if (v.status === 'NEG√ìCIOS') statusClass += 'negocios';

            left.innerHTML = `
                <img src="${v.img}" class="villain-detail-img" 
                     onerror="this.onerror=null; this.src='https://via.placeholder.com/300/000000/00d9ff?text=${v.name}'">
                <div style="text-align:center; margin-top:15px;">
                    <div class="villain-status ${statusClass}" style="display:inline-block;">${v.status}</div>
                </div>
            `;

            right.innerHTML = `
                <h3>${v.name}</h3>
                
                <div class="detail-label">IDENTIDADE SECRETA</div>
                <div class="detail-value">${v.alias}</div>
                
                <div class="detail-label">N√çVEL DE AMEA√áA</div>
                <div class="detail-value">
                    <span class="detail-threat">${v.threat}</span>
                </div>
                
                <div class="detail-label">√öLTIMA LOCALIZA√á√ÉO</div>
                <div class="detail-value">${v.location}</div>
                
                <div class="detail-label">√öLTIMA ATIVIDADE</div>
                <div class="detail-value">${v.lastSeen}</div>
                
                <div class="detail-label">CRIMES CONHECIDOS</div>
                <div class="detail-value">
                    ${v.crimes.map(crime => `<div style="margin:2px 0;">‚Ä¢ ${crime}</div>`).join('')}
                </div>
                
                <div class="detail-label">AN√ÅLISE DO BATCOMPUTADOR</div>
                <div class="detail-desc">${v.desc}</div>
                
                <div class="detail-label">PROTOCOLO DE APREENS√ÉO</div>
                <div class="detail-value">
                    ${v.status === 'ENCARCERADO' ?
                        '<span style="color:#00ff88;">‚úî CONTIDO EM ARKHAM</span>' :
                        '<span style="color:#ff0040;">‚ö† PRIORIDADE DE CAPTURA ATIVA</span>'}
                </div>
                
                <div style="margin-top:15px; display:flex; gap:10px;">
                    <button class="export-btn" onclick="trackVillain(${index})">üéØ RASTREAR</button>
                    <button class="export-btn" onclick="alert('Relat√≥rio gerado para ' + '${v.name}')">üìã RELAT√ìRIO</button>
                    <button class="export-btn" onclick="notifyGCPD(${index})">üö® NOTIFICAR GCPD</button>
                </div>
            `;

            modal.style.display = 'block';
            playSound('click');
        }

        function closeVillainDetail() {
            const modal = document.getElementById('villainDetailModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        function trackVillain(index) {
            const villain = villains[index];
            alert(`üéØ Iniciando rastreamento de ${villain.name}\nSistema de rastreamento ativado.`);
            playSound('success');
        }

        function notifyGCPD(index) {
            const villain = villains[index];
            alert(`üö® Notifica√ß√£o enviada ao GCPD para ${villain.name}\nUnidades despachadas.`);
            playSound('click');
        }

        function exportVillainsPDF() {
            alert('üìÑ Exportando lista de vil√µes em PDF...');
            playSound('click');
        }

        function exportVillainsCSV() {
            alert('üìä Exportando dados em CSV...');
            playSound('click');
        }

        function printVillains() {
            alert('üñ®Ô∏è Preparando impress√£o...');
            playSound('click');
        }

        function refreshVillains() {
            loadVillains();
            document.getElementById('villainUpdateTime').textContent = new Date().toLocaleTimeString();
            playSound('success');
        }

        // ===========================================
        // SISTEMA DE ARSENAL - FUN√á√ïES
        // ===========================================
        function loadEquipment() {
            const grid = document.getElementById('equipmentGrid');
            if (!grid) return;

            grid.innerHTML = '';
            arsenalData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'equipment-card';
                card.onclick = () => openEquipmentDetail(index);

                let progressClass = 'progress-ok';
                if (item.class === 'status-warn') progressClass = 'progress-warn';
                else if (item.class === 'status-alert') progressClass = 'progress-alert';

                card.innerHTML = `
                    <div class="equipment-icon">${item.icon}</div>
                    <div class="equipment-name">${item.name}</div>
                    <div class="equipment-value">${item.value}</div>
                    <div class="equipment-status ${item.class}">${item.status}</div>
                    <div class="progress-bar">
                        <div class="progress-fill ${progressClass}" style="width: ${item.progress}%"></div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterEquipment() {
            const search = document.getElementById('equipmentSearch').value.toLowerCase();
            const grid = document.getElementById('equipmentGrid');
            const cards = grid.querySelectorAll('.equipment-card');
            
            cards.forEach((card, index) => {
                const name = arsenalData[index].name.toLowerCase();
                card.style.display = name.includes(search) ? 'flex' : 'none';
            });
        }

        function openEquipmentDetail(index) {
            const item = arsenalData[index];
            const modal = document.createElement('div');
            modal.className = 'equipment-detail-modal';
            modal.id = 'equipmentDetailModal';
            
            let progressClass = 'progress-ok';
            if (item.class === 'status-warn') progressClass = 'progress-warn';
            else if (item.class === 'status-alert') progressClass = 'progress-alert';

            modal.innerHTML = `
                <div class="equipment-detail-content">
                    <button class="close-detail-btn" onclick="closeEquipmentDetail()">√ó</button>
                    <div style="text-align: center;">
                        <div class="equipment-detail-icon">${item.icon}</div>
                        <div class="equipment-name" style="font-size:16px;">${item.name}</div>
                        <div class="equipment-status ${item.class}" style="display:inline-block; margin-top:10px;">${item.status}</div>
                        <div class="progress-bar" style="width:80%; margin:10px auto;">
                            <div class="progress-fill ${progressClass}" style="width: ${item.progress}%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="detail-label">ESPECIFICA√á√ïES</div>
                        <div class="detail-desc" style="margin-bottom:15px;">${item.desc}</div>
                        
                        <div class="detail-label">DADOS VITAIS</div>
                        <div class="modal-data-grid" style="margin-top:10px;">
                            ${item.vitals.map(vital => `
                                <div class="data-item">
                                    <div class="data-label">${vital.split(':')[0]}</div>
                                    <div class="data-value">${vital.split(':')[1]}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        ${item.combos ? `
                            <div class="tactical-combos">
                                <div class="modal-section-title">‚ö° COMBINA√á√ïES RECOMENDADAS</div>
                                ${item.combos.map(combo => `
                                    <div class="combo-item">${combo}</div>
                                `).join('')}
                            </div>
                        ` : ''}
                        
                        <div class="modal-status" style="margin-top:20px;">
                            <div class="modal-status-title">DIAGN√ìSTICO BATCOMPUTADOR</div>
                            <p style="font-size:12px; color:#00ff88;">
                                > SISTEMA: ${item.class === 'status-ok' ? 'OPERACIONAL' : item.class === 'status-warn' ? 'ATEN√á√ÉO' : 'CR√çTICO'}<br>
                                > USO RECOMENDADO: T√ÅTICA PRINCIPAL<br>
                                > MANUTEN√á√ÉO: ${item.class === 'status-alert' ? 'URGENTE' : 'AGENDADA'}
                            </p>
                        </div>
                        
                        <div style="display:flex; gap:10px; margin-top:20px;">
                            <button class="export-btn" onclick="useEquipment(${index})">üõ†Ô∏è USAR AGORA</button>
                            <button class="export-btn" onclick="repairEquipment(${index})">üîß MANUTEN√á√ÉO</button>
                            <button class="export-btn" onclick="rechargeEquipment(${index})">‚ö° RECARREGAR</button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            modal.style.display = 'block';

            // Atualizar diagn√≥stico
            const diagnostic = document.getElementById('equipmentDiagnostic');
            if (diagnostic) {
                diagnostic.innerHTML = `> ANALISANDO: ${item.name}<br>> STATUS: ${item.status}<br>> PROTOCOLO DE USO ATIVO<br>> ${item.class === 'status-alert' ? '‚ö† MANUTEN√á√ÉO URGENTE REQUERIDA' : '‚úÖ SISTEMA PRONTO PARA DEPLOY'}`;
            }

            playSound('click');
        }

        function closeEquipmentDetail() {
            const modal = document.getElementById('equipmentDetailModal');
            if (modal) {
                modal.remove();
            }
        }

        function useEquipment(index) {
            const item = arsenalData[index];
            alert(`üõ†Ô∏è ${item.name} em uso\nProtocolo de opera√ß√£o ativado.`);
            playSound('success');
        }

        function repairEquipment(index) {
            const item = arsenalData[index];
            item.progress = 100;
            item.status = item.id === 'disruptor' ? 'RECARR.' : 'PRONTO';
            item.class = 'status-ok';
            item.value = item.id === 'disruptor' ? '100%' : item.value;
            alert(`üîß ${item.name} reparado\nSistema restaurado para 100%.`);
            loadEquipment();
            playSound('success');
        }

        function rechargeEquipment(index) {
            const item = arsenalData[index];
            if (item.id === 'disruptor') {
                item.progress = 100;
                item.status = 'PRONTO';
                item.class = 'status-ok';
                item.value = '100%';
                alert(`‚ö° ${item.name} recarregado\nBateria restaurada para 100%.`);
                loadEquipment();
                playSound('success');
            } else {
                alert('‚ÑπÔ∏è Este equipamento n√£o requer recarga.');
            }
        }

        // ===========================================
        // SISTEMA DO BATM√ìVEL - FUN√á√ïES
        // ===========================================
        function updateBatmobileDisplay() {
            document.getElementById('batSpeed').textContent = `${batmobileStatus.speed} km/h`;
            document.getElementById('batFuel').textContent = `${batmobileStatus.fuel}%`;
            document.getElementById('batSystems').textContent = batmobileStatus.systems;
            document.getElementById('batDestination').textContent = batmobileStatus.destination || '--';
            
            // Atualizar cor do combust√≠vel
            const fuelElement = document.getElementById('batFuel');
            if (batmobileStatus.fuel < 20) {
                fuelElement.style.color = '#ff0040';
            } else if (batmobileStatus.fuel < 50) {
                fuelElement.style.color = '#ffaa00';
            } else {
                fuelElement.style.color = '#00ff88';
            }
        }

        function startBatmobileUpdates() {
            if (liveUpdateIntervals['batmobile']) clearInterval(liveUpdateIntervals['batmobile']);
            
            liveUpdateIntervals['batmobile'] = setInterval(() => {
                if (batmobileStatus.speed > 0) {
                    // Consumir combust√≠vel
                    batmobileStatus.fuel = Math.max(0, batmobileStatus.fuel - 0.1);
                    
                    // Atualizar log
                    const log = document.getElementById('batLog');
                    if (log) {
                        const newEntry = `> ${new Date().toLocaleTimeString()}: Em movimento | Combust√≠vel: ${batmobileStatus.fuel.toFixed(1)}%`;
                        log.innerHTML = newEntry + '<br>' + log.innerHTML;
                        if (log.children.length > 10) {
                            log.removeChild(log.lastChild);
                        }
                    }
                    
                    updateBatmobileDisplay();
                }
            }, 5000); // Atualizar a cada 5 segundos
        }

        function startBatmobile() {
            if (batmobileStatus.speed === 0) {
                batmobileStatus.speed = 60;
                addLog('Batm√≥vel iniciado. Velocidade: 60 km/h');
                updateBatmobileDisplay();
                playSound('success');
            }
        }

        function stopBatmobile() {
            batmobileStatus.speed = 0;
            addLog('Batm√≥vel parado.');
            updateBatmobileDisplay();
            playSound('click');
        }

        function activateTurbo() {
            if (batmobileStatus.speed > 0) {
                batmobileStatus.speed = 180;
                batmobileStatus.turbo = true;
                addLog('Turbo ativado! Velocidade: 180 km/h');
                updateBatmobileDisplay();
                playSound('success');
                
                // Desativar turbo ap√≥s 10 segundos
                setTimeout(() => {
                    if (batmobileStatus.turbo) {
                        batmobileStatus.speed = 60;
                        batmobileStatus.turbo = false;
                        addLog('Turbo desativado. Velocidade normalizada.');
                        updateBatmobileDisplay();
                    }
                }, 10000);
            }
        }

        function toggleCamouflage() {
            batmobileStatus.camouflage = !batmobileStatus.camouflage;
            const status = batmobileStatus.camouflage ? 'ATIVADA' : 'DESATIVADA';
            addLog(`Camuflagem ${status}.`);
            playSound('click');
        }

        function activateWeapons() {
            addLog('Sistema de armas ativado. Alvos travados.');
            playSound('success');
        }

        function activateDefense() {
            addLog('Sistema de defesa ativado. Escudo energ√©tico ativo.');
            playSound('success');
        }

        function setDestination() {
            const input = document.getElementById('routeInput');
            if (input.value.trim()) {
                batmobileStatus.destination = input.value;
                const distance = Math.floor(Math.random() * 50) + 5;
                const time = Math.floor(distance / 60 * 60);
                
                document.getElementById('routeDistance').textContent = `${distance} km`;
                document.getElementById('routeTime').textContent = `${time} min`;
                
                addLog(`Destino definido: ${input.value} | Dist√¢ncia: ${distance} km`);
                input.value = '';
                updateBatmobileDisplay();
                playSound('success');
            }
        }

        function calculateFastestRoute() {
            if (batmobileStatus.destination) {
                const distance = parseInt(document.getElementById('routeDistance').textContent);
                const fastestTime = Math.floor(distance / 180 * 60);
                document.getElementById('routeTime').textContent = `${fastestTime} min (TURBO)`;
                addLog(`Rota r√°pida calculada: ${fastestTime} minutos com Turbo.`);
                playSound('success');
            }
        }

        function addLog(message) {
            const log = document.getElementById('batLog');
            if (log) {
                const newEntry = `> ${new Date().toLocaleTimeString()}: ${message}`;
                log.innerHTML = newEntry + '<br>' + log.innerHTML;
                if (log.children.length > 10) {
                    log.removeChild(log.lastChild);
                }
            }
        }

        // ===========================================
        // MAPA DE GOTHAM - FUN√á√ïES
        // ===========================================
        let mapZoom = 1;
        let mapRotation = 0;

        function initGothamMap() {
            const grid = document.getElementById('hologramGrid');
            if (grid) {
                grid.style.opacity = '0.5';
            }
            
            // Iniciar anima√ß√£o dos pontos de dados
            const dataPoints = document.querySelectorAll('.data-point');
            dataPoints.forEach((point, index) => {
                point.style.animationDelay = `${index * 0.5}s`;
            });
        }

        function showDistrictDetail(districtId) {
            const district = gothamDistricts[districtId];
            const detailPanel = document.getElementById('districtDetail');
            const title = document.getElementById('districtTitle');
            const alert = document.getElementById('districtAlert');
            const info = document.getElementById('districtInfo');
            const timeline = document.getElementById('incidentTimeline');
            const timelineContent = document.getElementById('timelineContent');

            if (district && detailPanel) {
                title.textContent = district.name;
                alert.textContent = district.alert;
                alert.className = `district-alert ${district.alertClass}`;
                info.innerHTML = district.info;

                // Adicionar estat√≠sticas
                info.innerHTML += `
                    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <div style="display: flex; justify-content: space-between;">
                            <span>TAXA CRIMINAL:</span>
                            <span style="color: ${districtId === 'industrial' || districtId === 'arkham' ? '#ff0040' : districtId === 'port' ? '#ff7700' : '#00ff88'};">
                                ${district.crimeRate}
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span>POL√çCIA PRESENTE:</span>
                            <span style="color: ${district.policePresence > '80%' ? '#00ff88' : '#ffaa00'};">${district.policePresence}</span>
                        </div>
                    </div>
                `;

                // Mostrar timeline
                if (district.incidents && district.incidents.length > 0) {
                    timelineContent.innerHTML = district.incidents.map(incident => `
                        <div class="timeline-item">
                            <span class="timeline-time">${incident.time}</span>
                            <span class="timeline-event">${incident.event}</span>
                            <span class="timeline-alert">${incident.alert}</span>
                        </div>
                    `).join('');
                    timeline.style.display = 'block';
                }

                detailPanel.style.display = 'block';

                // Efeito de destaque
                const districtElement = document.querySelector(`.${districtId === 'industrial' ? 'industrial-zone' :
                    districtId === 'center' ? 'city-center' :
                    districtId === 'suburbs' ? 'suburbs' :
                    districtId === 'port' ? 'port-area' :
                    districtId === 'arkham' ? 'arkham' : 'wayne-tower'}`);
                if (districtElement) {
                    districtElement.style.animation = 'pulse 1s 3';
                    setTimeout(() => {
                        districtElement.style.animation = '';
                    }, 3000);
                }

                playSound('click');
            }
        }

        function rotateMap(direction) {
            const map = document.getElementById('gothamMap');
            if (map) {
                mapRotation += direction === 'left' ? -15 : 15;
                map.style.transition = 'transform 0.5s ease';
                map.style.transform = `rotate(${mapRotation}deg) scale(${mapZoom})`;
            }
            playSound('click');
        }

        function toggleGrid() {
            const grid = document.getElementById('hologramGrid');
            if (grid) {
                grid.style.opacity = grid.style.opacity === '0' ? '0.5' : '0';
            }
            playSound('click');
        }

        function zoomIn() {
            if (mapZoom < 2) {
                mapZoom += 0.1;
                updateMapTransform();
            }
            playSound('click');
        }

        function zoomOut() {
            if (mapZoom > 0.5) {
                mapZoom -= 0.1;
                updateMapTransform();
            }
            playSound('click');
        }

        function updateMapTransform() {
            const map = document.getElementById('gothamMap');
            if (map) {
                map.style.transform = `rotate(${mapRotation}deg) scale(${mapZoom})`;
            }
        }

        function scanForActivity() {
            const dataPoints = document.querySelectorAll('.data-point');
            dataPoints.forEach(point => {
                point.style.animation = 'none';
                setTimeout(() => {
                    point.style.animation = 'float 3s infinite ease-in-out';
                    point.style.transform = 'scale(1.5)';
                    setTimeout(() => {
                        point.style.transform = 'scale(1)';
                    }, 500);
                }, 10);
            });

            // Simular detec√ß√£o
            const alerts = ['ATIVIDADE DETECTADA', 'ESCANEAMENTO COMPLETO', '3 ANOMALIAS ENCONTRADAS'];
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            
            alert(`üîç ${randomAlert} - Verifique os pontos brilhantes no mapa.`);
            playSound('success');
        }

        function resetMap() {
            mapZoom = 1;
            mapRotation = 0;
            const map = document.getElementById('gothamMap');
            const detailPanel = document.getElementById('districtDetail');
            const grid = document.getElementById('hologramGrid');

            if (map) {
                map.style.transform = '';
            }
            if (detailPanel) {
                detailPanel.style.display = 'none';
            }
            if (grid) {
                grid.style.opacity = '0.5';
            }

            playSound('click');
        }

        function exportMap() {
            alert('üíæ Exportando mapa de Gotham...');
            playSound('click');
        }

        // ===========================================
        // SISTEMA DE SONS
        // ===========================================
        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);

                switch (type) {
                    case 'success':
                        oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(1760, audioContext.currentTime + 0.1);
                        oscillator.start();
                        oscillator.stop(audioContext.currentTime + 0.2);
                        break;
                    case 'error':
                        oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(110, audioContext.currentTime + 0.1);
                        oscillator.start();
                        oscillator.stop(audioContext.currentTime + 0.3);
                        break;
                    case 'logout':
                        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(55, audioContext.currentTime + 0.5);
                        oscillator.start();
                        oscillator.stop(audioContext.currentTime + 0.5);
                        break;
                    case 'click':
                        oscillator.frequency.setValueAtTime(660, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(330, audioContext.currentTime + 0.1);
                        oscillator.start();
                        oscillator.stop(audioContext.currentTime + 0.1);
                        break;
                }

                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.3);
            } catch (e) {
                console.log("√Åudio n√£o suportado");
            }
        }

        // ===========================================
        // INICIALIZA√á√ÉO
        // ===========================================
        document.addEventListener('DOMContentLoaded', () => {
            // Prevenir zoom em iOS
            document.addEventListener('touchstart', function (event) {
                if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                    event.target.style.fontSize = '16px';
                }
            });

            // Melhorar toques em mobile
            document.addEventListener('touchstart', function () { }, { passive: true });

            // Fechar modais ao clicar fora
            document.addEventListener('click', function (e) {
                const villainModal = document.getElementById('villainDetailModal');
                if (villainModal && e.target === villainModal) {
                    closeVillainDetail();
                }
                
                const equipModal = document.getElementById('equipmentDetailModal');
                if (equipModal && e.target === equipModal) {
                    closeEquipmentDetail();
                }
            });

            console.log('ü¶á BAT-HUD SYSTEM v2.0 INICIALIZADO');
            console.log('Sistemas carregados:');
            console.log('- Autentica√ß√£o ‚úì');
            console.log('- Alerta de Emerg√™ncia ‚úì');
            console.log('- Rastreamento de Vil√µes ‚úì');
            console.log('- Sistema de Arsenal ‚úì');
            console.log('- Controle do Batm√≥vel ‚úì');
            console.log('- Mapa de Gotham ‚úì');
            console.log('- Interface HUD ‚úì');
        });
    </script>
</body>
</html>
